
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="OPENTELEMETRY 文档">
      
      
        <meta name="author" content="OPENTELEMETRY">
      
      
        <link rel="canonical" href="https://wdk-docs.github.io/opentelemetry-docs/docs/collector/trace-receiver/">
      
      
        <link rel="prev" href="../custom-auth/">
      
      
        <link rel="next" href="../../k8s-operator/_index/">
      
      <link rel="icon" href="../../../assets/favicons/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>建立跟踪接收器 - OPENTELEMETRY 文档</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#setting-up-your-receiver-development-and-testing-environment" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="OPENTELEMETRY 文档" class="md-header__button md-logo" aria-label="OPENTELEMETRY 文档" data-md-component="logo">
      
  <img src="../../../assets/logo/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OPENTELEMETRY 文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              建立跟踪接收器
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/wdk-docs/opentelemetry-docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wdk-docs/opentelemetry-docs
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      首页
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../_index/" class="md-tabs__link md-tabs__link--active">
        文档
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../ecosystem/_index/" class="md-tabs__link">
        生态系统
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../status/" class="md-tabs__link">
      状态
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../community/_index/" class="md-tabs__link">
        社区
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../blog/" class="md-tabs__link">
        博客
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OPENTELEMETRY 文档" class="md-nav__button md-logo" aria-label="OPENTELEMETRY 文档" data-md-component="logo">
      
  <img src="../../../assets/logo/logo.svg" alt="logo">

    </a>
    OPENTELEMETRY 文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/wdk-docs/opentelemetry-docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wdk-docs/opentelemetry-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        首页
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          文档
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          文档
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../_index/" class="md-nav__link">
        文档
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what-is-opentelemetry/" class="md-nav__link">
        什么是OpenTelemetry?
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          入门
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          入门
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/_index/" class="md-nav__link">
        入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/dev/" class="md-nav__link">
        开发者入门指南
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/ops/" class="md-nav__link">
        Ops入门
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          概念
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          概念
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/_index/" class="md-nav__link">
        开放遥测概念
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/observability-primer/" class="md-nav__link">
        可观测 Primer
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4_3" id="__nav_2_4_3_label" tabindex="0">
          信号
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_3">
          <span class="md-nav__icon md-icon"></span>
          信号
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/signals/_index/" class="md-nav__link">
        信号
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/signals/traces/" class="md-nav__link">
        Traces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/signals/metrics/" class="md-nav__link">
        Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/signals/logs/" class="md-nav__link">
        Logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/signals/baggage/" class="md-nav__link">
        Baggage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_4" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4_4" id="__nav_2_4_4_label" tabindex="0">
          仪表
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_4">
          <span class="md-nav__icon md-icon"></span>
          仪表
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/instrumentation/_index/" class="md-nav__link">
        仪表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/instrumentation/automatic/" class="md-nav__link">
        自动
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/instrumentation/manual/" class="md-nav__link">
        手动
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/instrumentation/libraries/" class="md-nav__link">
        库
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/components/" class="md-nav__link">
        组件
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/semantic-conventions/" class="md-nav__link">
        语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_7" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../concepts/sampling/">采样</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_7">
          <span class="md-nav__icon md-icon"></span>
          采样
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_8" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4_8" id="__nav_2_4_8_label" tabindex="0">
          SDK配置
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_8">
          <span class="md-nav__icon md-icon"></span>
          SDK配置
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/sdk-configuration/_index/" class="md-nav__link">
        SDK 配置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/sdk-configuration/general-sdk-configuration/" class="md-nav__link">
        通用SDK配置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/sdk-configuration/otlp-exporter-configuration/" class="md-nav__link">
        OTLP导出配置
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/distributions/" class="md-nav__link">
        分布
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/glossary/" class="md-nav__link">
        术语表
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
          演示
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          演示
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/_index/" class="md-nav__link">
        OpenTelemetry 演示文档
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/architecture/" class="md-nav__link">
        演示架构
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_3" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../demo/collector-data-flow-dashboard/">采集器数据流仪表板</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_3">
          <span class="md-nav__icon md-icon"></span>
          采集器数据流仪表板
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/development/" class="md-nav__link">
        开发
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/docker-deployment/" class="md-nav__link">
        Docker 部署
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/feature-flags/" class="md-nav__link">
        功能标志
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/features/" class="md-nav__link">
        演示功能
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/forking/" class="md-nav__link">
        分叉演示存储库
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/kubernetes-deployment/" class="md-nav__link">
        Kubernetes 开发
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/manual-span-attributes/" class="md-nav__link">
        手动跨度属性
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/metric-features/" class="md-nav__link">
        按服务度量特征覆盖率
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_12" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5_12" id="__nav_2_5_12_label" tabindex="0">
          需求
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_12">
          <span class="md-nav__icon md-icon"></span>
          需求
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/requirements/_index/" class="md-nav__link">
        演示需求
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/requirements/application/" class="md-nav__link">
        应用需求
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/requirements/architecture/" class="md-nav__link">
        架构需求
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/requirements/opentelemetry/" class="md-nav__link">
        OpenTelemetry 需求
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/requirements/system/" class="md-nav__link">
        系统需求
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_13" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5_13" id="__nav_2_5_13_label" tabindex="0">
          场景
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_13">
          <span class="md-nav__icon md-icon"></span>
          场景
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/scenarios/_index/" class="md-nav__link">
        场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_13_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../demo/scenarios/recommendation-cache/">建议缓存</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_5_13_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_13_2">
          <span class="md-nav__icon md-icon"></span>
          建议缓存
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_14" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../demo/screenshots/">演示截图</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_14">
          <span class="md-nav__icon md-icon"></span>
          演示截图
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/service-table/" class="md-nav__link">
        服务的角色
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_16" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5_16" id="__nav_2_5_16_label" tabindex="0">
          服务
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_16_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_16">
          <span class="md-nav__icon md-icon"></span>
          服务
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/services/_index/" class="md-nav__link">
        服务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/services/accounting/" class="md-nav__link">
        Accounting Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/services/ad/" class="md-nav__link">
        Ad Service
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/tests/" class="md-nav__link">
        测试
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../demo/trace-features/" class="md-nav__link">
        按服务跟踪功能覆盖
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
          仪表
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          仪表
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/_index/" class="md-nav__link">
        仪表
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_2" id="__nav_2_6_2_label" tabindex="0">
          C++
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_2">
          <span class="md-nav__icon md-icon"></span>
          C++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/cpp/_index/" class="md-nav__link">
        C++
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_3" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_3" id="__nav_2_6_3_label" tabindex="0">
          .NET
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_3">
          <span class="md-nav__icon md-icon"></span>
          .NET
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/net/_index/" class="md-nav__link">
        .NET
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_4" id="__nav_2_6_4_label" tabindex="0">
          Erlang/Elixir
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_4">
          <span class="md-nav__icon md-icon"></span>
          Erlang/Elixir
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/erlang/_index/" class="md-nav__link">
        Erlang/Elixir
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_5" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_5" id="__nav_2_6_5_label" tabindex="0">
          Go
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_5">
          <span class="md-nav__icon md-icon"></span>
          Go
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/go/_index.md" class="md-nav__link">
        None
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_6" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_6" id="__nav_2_6_6_label" tabindex="0">
          Java
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_6">
          <span class="md-nav__icon md-icon"></span>
          Java
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/java/_index/" class="md-nav__link">
        Java
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_7" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_7" id="__nav_2_6_7_label" tabindex="0">
          JavaScript
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_7">
          <span class="md-nav__icon md-icon"></span>
          JavaScript
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/js/_index/" class="md-nav__link">
        JavaScript
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_8" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_8" id="__nav_2_6_8_label" tabindex="0">
          PHP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_8">
          <span class="md-nav__icon md-icon"></span>
          PHP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/php/_index/" class="md-nav__link">
        PHP
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_9" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_9" id="__nav_2_6_9_label" tabindex="0">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_9">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/python/_index/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_10" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_10" id="__nav_2_6_10_label" tabindex="0">
          Ruby
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_10">
          <span class="md-nav__icon md-icon"></span>
          Ruby
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/ruby/_index/" class="md-nav__link">
        Ruby
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_11" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_11" id="__nav_2_6_11_label" tabindex="0">
          Rust
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_11">
          <span class="md-nav__icon md-icon"></span>
          Rust
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/rust/_index/" class="md-nav__link">
        Rust
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_12" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_12" id="__nav_2_6_12_label" tabindex="0">
          Swift
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_12">
          <span class="md-nav__icon md-icon"></span>
          Swift
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/swift/_index/" class="md-nav__link">
        Swift
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_13" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6_13" id="__nav_2_6_13_label" tabindex="0">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6_13">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../instrumentation/other/_index/" class="md-nav__link">
        Other languages
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
          收集器
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
          收集器
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../_index/" class="md-nav__link">
        收集器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_3" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_7_3" id="__nav_2_7_3_label" tabindex="0">
          部署
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_3">
          <span class="md-nav__icon md-icon"></span>
          部署
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/_index/" class="md-nav__link">
        部署
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/agent/" class="md-nav__link">
        代理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/gateway/" class="md-nav__link">
        网关
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/no-collector/" class="md-nav__link">
        没有收集器
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        配置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../management/" class="md-nav__link">
        管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../distributions/" class="md-nav__link">
        分布
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        故障排除
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scaling/" class="md-nav__link">
        扩容采集器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../transforming-telemetry/" class="md-nav__link">
        改变遥测
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom-collector/" class="md-nav__link">
        构建自定义收集器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom-auth/" class="md-nav__link">
        构建自定义身份验证器
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          建立跟踪接收器
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        建立跟踪接收器
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setting-up-your-receiver-development-and-testing-environment" class="md-nav__link">
    Setting up your receiver development and testing environment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-and-validating-your-receiver-settings" class="md-nav__link">
    Reading and Validating your Receiver Settings
  </a>
  
    <nav class="md-nav" aria-label="Reading and Validating your Receiver Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_1" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-the-collector-to-instantiate-your-receiver" class="md-nav__link">
    Enabling the Collector to instantiate your receiver
  </a>
  
    <nav class="md-nav" aria-label="Enabling the Collector to instantiate your receiver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementing-your-receiverfactory" class="md-nav__link">
    Implementing your receiver.Factory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-and-providing-default-settings-for-the-receiver" class="md-nav__link">
    Identifying and Providing default settings for the receiver
  </a>
  
    <nav class="md-nav" aria-label="Identifying and Providing default settings for the receiver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_2" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-the-factory-to-describe-the-receiver-as-capable-of-processing-traces" class="md-nav__link">
    Enabling the factory to describe the receiver as capable of processing traces
  </a>
  
    <nav class="md-nav" aria-label="Enabling the factory to describe the receiver as capable of processing traces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_3" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-the-receiver-factory-to-the-collectors-initialization" class="md-nav__link">
    Adding the receiver factory to the Collector's initialization
  </a>
  
    <nav class="md-nav" aria-label="Adding the receiver factory to the Collector's initialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_4" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementing-the-trace-receiver-component" class="md-nav__link">
    Implementing the trace receiver component
  </a>
  
    <nav class="md-nav" aria-label="Implementing the trace receiver component">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_5" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_6" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keeping-information-passed-by-the-receivers-factory" class="md-nav__link">
    Keeping information passed by the receiver's factory
  </a>
  
    <nav class="md-nav" aria-label="Keeping information passed by the receiver's factory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_7" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_8" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-collectors-trace-data-model" class="md-nav__link">
    The Collector's Trace Data Model
  </a>
  
    <nav class="md-nav" aria-label="The Collector's Trace Data Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#working-with-resources" class="md-nav__link">
    Working with Resources
  </a>
  
    <nav class="md-nav" aria-label="Working with Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_9" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_10" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#describing-resources-through-attributes" class="md-nav__link">
    Describing Resources through attributes
  </a>
  
    <nav class="md-nav" aria-label="Describing Resources through attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_11" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_12" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#representing-operations-with-spans" class="md-nav__link">
    Representing operations with spans
  </a>
  
    <nav class="md-nav" aria-label="Representing operations with spans">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_13" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_14" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
          K8s 操作符
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_8">
          <span class="md-nav__icon md-icon"></span>
          K8s 操作符
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../k8s-operator/_index/" class="md-nav__link">
        Kubernetes开放遥测操作器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../k8s-operator/automatic/" class="md-nav__link">
        注入自动仪表
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
          FaaS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_9">
          <span class="md-nav__icon md-icon"></span>
          FaaS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../faas/_index/" class="md-nav__link">
        Functions as a Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../faas/lambda-auto-instrument/" class="md-nav__link">
        Lambda Auto-Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../faas/lambda-collector/" class="md-nav__link">
        Lambda Collector Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../faas/lambda-manual-instrument/" class="md-nav__link">
        Lambda Manual Instrumentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
          迁移
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_10">
          <span class="md-nav__icon md-icon"></span>
          迁移
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migration/_index/" class="md-nav__link">
        Migration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migration/opencensus/" class="md-nav__link">
        Migrating from OpenCensus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migration/opentracing/" class="md-nav__link">
        Migrating from OpenTracing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_11" id="__nav_2_11_label" tabindex="0">
          规格
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_11">
          <span class="md-nav__icon md-icon"></span>
          规格
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/_index/" class="md-nav__link">
        Specifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../specs/status/" class="md-nav__link">
        Specification Status Summary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_12" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_12" id="__nav_2_12_label" tabindex="0">
          致谢
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_12">
          <span class="md-nav__icon md-icon"></span>
          致谢
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../acknowledgements/_index/" class="md-nav__link">
        Acknowledgements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          生态系统
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          生态系统
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ecosystem/_index/" class="md-nav__link">
        OpenTelemetry Ecosystem
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ecosystem/demo/" class="md-nav__link">
        OpenTelemetry Demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ecosystem/integrations/" class="md-nav__link">
        Integrations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ecosystem/vendors/" class="md-nav__link">
        Vendors
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
          registry
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          registry
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ecosystem/registry/_index/" class="md-nav__link">
        Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../ecosystem/registry/adding/" class="md-nav__link">
        Adding to the registry
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../status/" class="md-nav__link">
        状态
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          社区
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          社区
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/_index/" class="md-nav__link">
        Community
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/marketing-guidelines/" class="md-nav__link">
        OpenTelemetry Marketing Guidelines for Contributing Organizations
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          enduser
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          enduser
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/end-user/_index/" class="md-nav__link">
        End-user Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/end-user/discussion-group/" class="md-nav__link">
        Monthly Discussion Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/end-user/feedback-survey/" class="md-nav__link">
        Feedback Survey
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/end-user/interviews-feedback/" class="md-nav__link">
        Interviews or Feedback Sessions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/end-user/otel-in-practice/" class="md-nav__link">
        OpenTelemetry In Practice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../community/end-user/slack-channel/" class="md-nav__link">
        Slack Channel
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../blog/">博客</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          博客
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setting-up-your-receiver-development-and-testing-environment" class="md-nav__link">
    Setting up your receiver development and testing environment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-and-validating-your-receiver-settings" class="md-nav__link">
    Reading and Validating your Receiver Settings
  </a>
  
    <nav class="md-nav" aria-label="Reading and Validating your Receiver Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_1" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-the-collector-to-instantiate-your-receiver" class="md-nav__link">
    Enabling the Collector to instantiate your receiver
  </a>
  
    <nav class="md-nav" aria-label="Enabling the Collector to instantiate your receiver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementing-your-receiverfactory" class="md-nav__link">
    Implementing your receiver.Factory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-and-providing-default-settings-for-the-receiver" class="md-nav__link">
    Identifying and Providing default settings for the receiver
  </a>
  
    <nav class="md-nav" aria-label="Identifying and Providing default settings for the receiver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_2" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-the-factory-to-describe-the-receiver-as-capable-of-processing-traces" class="md-nav__link">
    Enabling the factory to describe the receiver as capable of processing traces
  </a>
  
    <nav class="md-nav" aria-label="Enabling the factory to describe the receiver as capable of processing traces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_3" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-the-receiver-factory-to-the-collectors-initialization" class="md-nav__link">
    Adding the receiver factory to the Collector's initialization
  </a>
  
    <nav class="md-nav" aria-label="Adding the receiver factory to the Collector's initialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_4" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementing-the-trace-receiver-component" class="md-nav__link">
    Implementing the trace receiver component
  </a>
  
    <nav class="md-nav" aria-label="Implementing the trace receiver component">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_5" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_6" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keeping-information-passed-by-the-receivers-factory" class="md-nav__link">
    Keeping information passed by the receiver's factory
  </a>
  
    <nav class="md-nav" aria-label="Keeping information passed by the receiver's factory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_7" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_8" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-collectors-trace-data-model" class="md-nav__link">
    The Collector's Trace Data Model
  </a>
  
    <nav class="md-nav" aria-label="The Collector's Trace Data Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#working-with-resources" class="md-nav__link">
    Working with Resources
  </a>
  
    <nav class="md-nav" aria-label="Working with Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_9" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_10" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#describing-resources-through-attributes" class="md-nav__link">
    Describing Resources through attributes
  </a>
  
    <nav class="md-nav" aria-label="Describing Resources through attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_11" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_12" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#representing-operations-with-spans" class="md-nav__link">
    Representing operations with spans
  </a>
  
    <nav class="md-nav" aria-label="Representing operations with spans">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-work_13" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-your-work_14" class="md-nav__link">
    Check your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>建立跟踪接收器</h1>

<p>If you are reading this tutorial, you probably already have an idea of the
OpenTelemetry concepts behind distributed tracing, but if you don't you can
quickly read through it <a href="/docs/concepts/signals/traces/">here</a>.</p>
<p>Here is the definition of those concepts according to OpenTelemetry:</p>
<blockquote>
<p>Traces track the progression of a single request, called a trace, as it is
handled by services that make up an application. The request may be initiated
by a user or an application. Distributed tracing is a form of tracing that
traverses process, network and security boundaries.</p>
</blockquote>
<p>Although the definition seems very application centric, you can leverage the
OpenTelemetry trace model as a way to represent a request and quickly understand
its duration and the details about every step involved in completing it.</p>
<p>Assuming you already have a system generating some kind of tracing telemetry,
the <a href="/docs/collector/">OpenTelemetry Collector</a> is the doorway to help you make
it available into the OTel world.</p>
<p>Within the Collector, a trace receiver has the role to receive and convert your
request telemetry from its original format into the OTel trace model, so the
information can be properly processed through the Collector's pipelines.</p>
<p>In order to implement a traces receiver you will need the following:</p>
<ul>
<li>
<p>A <code>Config</code> implementation to enable the trace receiver to gather and validate
  its configurations within the Collector's config.yaml.</p>
</li>
<li>
<p>A <code>receiver.Factory</code> implementation so the Collector can properly instantiate
  the trace receiver component.</p>
</li>
<li>
<p>A <code>TracesReceiver</code> implementation that is responsible to collect the
  telemetry, convert it to the internal trace representation, and hand the
  information to the next consumer in the pipeline.</p>
</li>
</ul>
<p>In this tutorial we will create a sample trace receiver called <code>tailtracer</code> that
simulates a pull operation and generates traces as an outcome of that operation.
The next sections will guide you through the process of implementing the steps
above in order to create the receiver, so let's get started.</p>
<h2 id="setting-up-your-receiver-development-and-testing-environment">Setting up your receiver development and testing environment<a class="headerlink" href="#setting-up-your-receiver-development-and-testing-environment" title="Permanent link">&para;</a></h2>
<p>First use the <a href="/docs/collector/custom-collector">Building a Custom Collector</a>
tutorial to create a Collector instance named <code>otelcol-dev</code>; all you need is to
copy the <code>builder-config.yaml</code> described on Step 2 and make the following
changes:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nt">dist</span><span class="p">:</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otelcol-dev</span><span class="w"> </span><span class="c1"># the binary name. Optional.</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">  </span><span class="nt">output_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./otelcol-dev</span><span class="w"> </span><span class="c1"># the path to write the output (sources and binary). Optional.</span>
</code></pre></div></td></tr></table></div>
<p>As an outcome you should now have a <code>otelcol-dev</code> folder with your Collector's
development instance ready to go.</p>
<p>In order to properly test your trace receiver, you will need a distributed
tracing backend so the Collector can send the telemetry to it. We will be using
<a href="https://www.jaegertracing.io/docs/latest/getting-started/">Jaeger</a>, if you
don't have a <code>Jaeger</code> instance running, you can easily start one using Docker
with the following command:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>jaeger<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">  </span>-p<span class="w"> </span><span class="m">16686</span>:16686<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">  </span>-p<span class="w"> </span><span class="m">14268</span>:14268<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">  </span>-p<span class="w"> </span><span class="m">14250</span>:14250<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">  </span>jaegertracing/all-in-one:1.29
</code></pre></div></td></tr></table></div>
<p>Now, create a <code>config.yaml</code> file so you can set up your Collector's components.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="nb">cd</span><span class="w"> </span>otelcol-dev
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>touch<span class="w"> </span>config.yaml
</code></pre></div></td></tr></table></div>
<p>For now, you just need a basic traces pipeline with the <code>otlp</code> receiver, the
<code>jaeger</code> and <code>logging</code> exporters, here is what your <code>config.yaml</code> file should
look like:</p>
<blockquote>
<p>config.yaml</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="nt">receivers</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">  </span><span class="nt">otlp</span><span class="p">:</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">    </span><span class="nt">protocols</span><span class="p">:</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">      </span><span class="nt">grpc</span><span class="p">:</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="nt">processors</span><span class="p">:</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="nt">exporters</span><span class="p">:</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">  </span><span class="nt">logging</span><span class="p">:</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">    </span><span class="nt">verbosity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detailed</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">  </span><span class="nt">jaeger</span><span class="p">:</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">    </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost:14250</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">    </span><span class="nt">tls</span><span class="p">:</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">      </span><span class="nt">insecure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="w">  </span><span class="nt">pipelines</span><span class="p">:</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="w">    </span><span class="nt">traces</span><span class="p">:</span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="w">      </span><span class="nt">receivers</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">otlp</span><span class="p p-Indicator">]</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="w">      </span><span class="nt">processors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="w">      </span><span class="nt">exporters</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">jaeger</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">logging</span><span class="p p-Indicator">]</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="w">  </span><span class="nt">telemetry</span><span class="p">:</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="w">    </span><span class="nt">logs</span><span class="p">:</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="w">      </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
</code></pre></div></td></tr></table></div>
<p>Notice that I am only using the <code>insecure</code> flag in my <code>jaeger</code> receiver config
to make my local development setup easier; you should not use this flag when
running your collector in production.</p>
<p>In order to verify that your initial pipeline is properly set up, you should
have the following output after running your <code>otelcol-dev</code> command:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="gp">$ </span>./otelcol-dev<span class="w"> </span>--config<span class="w"> </span>config.yaml
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="go">2022-06-21T13:02:09.253-0500    info    builder/exporters_builder.go:255        Exporter was built.     {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="go">2022-06-21T13:02:09.254-0500    info    builder/exporters_builder.go:255        Exporter was built.     {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="go">2022-06-21T13:02:09.254-0500    info    builder/pipelines_builder.go:224        Pipeline was built.     {&quot;kind&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="go">2022-06-21T13:02:09.254-0500    info    builder/receivers_builder.go:225        Receiver was built.     {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;, &quot;datatype&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="go">2022-06-21T13:02:09.254-0500    info    service/telemetry.go:102        Setting up own telemetry...</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="go">2022-06-21T13:02:09.255-0500    info    service/telemetry.go:141        Serving Prometheus metrics      {&quot;address&quot;: &quot;:8888&quot;, &quot;level&quot;: &quot;basic&quot;}</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="go">2022-06-21T13:02:09.255-0500    info    service/service.go:93   Starting extensions...</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="go">2022-06-21T13:02:09.255-0500    info    service/service.go:98   Starting exporters...</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="go">2022-06-21T13:02:09.255-0500    info    builder/exporters_builder.go:40 Exporter is starting... {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="go">2022-06-21T13:02:09.258-0500    info    builder/exporters_builder.go:48 Exporter started.       {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="go">2022-06-21T13:02:09.258-0500    info    jaegerexporter@v0.53.0/exporter.go:186  State of the connection with the Jaeger Collector backend       {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;, &quot;state&quot;: &quot;IDLE&quot;}</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="go">2022-06-21T13:02:09.258-0500    info    builder/exporters_builder.go:40 Exporter is starting... {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="go">2022-06-21T13:02:09.258-0500    info    builder/exporters_builder.go:48 Exporter started.       {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}</span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="go">2022-06-21T13:02:09.258-0500    info    service/service.go:103  Starting processors...</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="go">2022-06-21T13:02:09.258-0500    info    builder/pipelines_builder.go:54 Pipeline is starting... {&quot;kind&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="go">2022-06-21T13:02:09.258-0500    info    builder/pipelines_builder.go:65 Pipeline is started.    {&quot;kind&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="go">2022-06-21T13:02:09.258-0500    info    service/service.go:108  Starting receivers...</span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="go">2022-06-21T13:02:09.258-0500    info    builder/receivers_builder.go:67 Receiver is starting... {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;}</span>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="go">2022-06-21T13:02:09.258-0500    info    otlpreceiver/otlp.go:70 Starting GRPC server on endpoint localhost:55690        {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;}</span>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="go">2022-06-21T13:02:09.261-0500    info    builder/receivers_builder.go:72 Receiver started.       {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;}</span>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="go">2022-06-21T13:02:09.262-0500    info    service/collector.go:226        Starting otelcol-dev... {&quot;Version&quot;: &quot;1.0.0&quot;, &quot;NumCPU&quot;: 12}</span>
<a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="go">2022-06-21T13:02:09.262-0500    info    service/collector.go:134        Everything is ready. Begin running and processing data.</span>
<a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="go">2022-06-21T13:02:10.258-0500    info    jaegerexporter@v0.53.0/exporter.go:186  State of the connection with the Jaeger Collector backend       {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;, &quot;state&quot;: &quot;READY&quot;}</span>
</code></pre></div></td></tr></table></div>
<p>Make sure you see the last line, that will confirm that the Jaeger exporter has
successfully established a connection to your local Jaeger instance. Now that we
have our environment ready, let's start writing your receiver's code.</p>
<p>Now, create another folder called <code>tailtracer</code> so we can have a place to host
all of our receiver code.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>mkdir<span class="w"> </span>tailtracer
</code></pre></div></td></tr></table></div>
<p>Every Collector's component should be created as a Go module, so you will need
to properly initialize the <code>tailtracer</code> module. In my case here is what the
command looked like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nb">cd</span><span class="w"> </span>tailtracer
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>go<span class="w"> </span>mod<span class="w"> </span>init<span class="w"> </span>github.com/rquedas/otel4devs/collector/receiver/trace-receiver/tailtracer
</code></pre></div></td></tr></table></div>
<h2 id="reading-and-validating-your-receiver-settings">Reading and Validating your Receiver Settings<a class="headerlink" href="#reading-and-validating-your-receiver-settings" title="Permanent link">&para;</a></h2>
<p>In order to be instantiated and participate in pipelines the Collector needs to
identify your receiver and properly load its settings from within its
configuration file.</p>
<p>The <code>tailtracer</code> receiver will have the following settings:</p>
<ul>
<li><code>interval</code>: a string representing the time interval (in minutes) between
  telemetry pull operations</li>
<li><code>number_of_traces</code>: the number of mock traces generated for each interval</li>
</ul>
<p>Here is what the <code>tailtracer</code> receiver settings will look like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nt">receivers</span><span class="p">:</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span><span class="nt">tailtracer</span><span class="p">:</span><span class="w"> </span><span class="c1"># this line represents the ID of your receiver</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1m</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="nt">number_of_traces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</code></pre></div></td></tr></table></div>
<p>Under the <code>tailtracer</code> folder, create a file named <code>config.go</code> where you will
write all the code to support your receiver settings.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nb">cd</span><span class="w"> </span>tailtracer
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>touch<span class="w"> </span>config.go
</code></pre></div></td></tr></table></div>
<p>To implement the configuration aspects of a receiver you need create a <code>Config</code>
struct. Add the following code to your <code>config.go</code> file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="kd">type</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="kd">struct</span><span class="p">{</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>In order to be able to give your receiver access to its settings the <code>Config</code>
struct must have a field for each of the receiver's settings.</p>
<p>Here is what your <code>config.go</code> file should look like after you implemented the
requirements above.</p>
<blockquote>
<p>config.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="c1">// Config represents the receiver config settings within the collector&#39;s config.yaml</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="kd">type</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">   </span><span class="nx">Interval</span><span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="s">`mapstructure:&quot;interval&quot;`</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">   </span><span class="nx">NumberOfTraces</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="s">`mapstructure:&quot;number_of_traces&quot;`</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work">Check your work<a class="headerlink" href="#check-your-work" title="Permanent link">&para;</a></h4>
<ul>
<li>I added the <code>Interval</code> and the <code>NumberOfTraces</code> fields so I can properly
  have access to their values from the config.yaml.</li>
</ul>
</blockquote>
<p>Now that you have access to the settings, you can provide any kind of validation
needed for those values by implementing the <code>Validate</code> method according to the
optional
<a href="https://github.com/open-telemetry/opentelemetry-collector/blob/{{%
param collectorVersion %}}/component/config.go#L50">ConfigValidator</a> interface.</p>
<p>In this case, the <code>interval</code> value will be optional (we will look at generating
default values later) but when defined should be at least 1 minute (1m) and the
<code>number_of_traces</code> will be a required value. Here is what the config.go looks
like after implementing the <code>Validate</code> method.</p>
<blockquote>
<p>config.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span>
<span class="normal"><a href="#__codelineno-11-16">16</a></span>
<span class="normal"><a href="#__codelineno-11-17">17</a></span>
<span class="normal"><a href="#__codelineno-11-18">18</a></span>
<span class="normal"><a href="#__codelineno-11-19">19</a></span>
<span class="normal"><a href="#__codelineno-11-20">20</a></span>
<span class="normal"><a href="#__codelineno-11-21">21</a></span>
<span class="normal"><a href="#__codelineno-11-22">22</a></span>
<span class="normal"><a href="#__codelineno-11-23">23</a></span>
<span class="normal"><a href="#__codelineno-11-24">24</a></span>
<span class="normal"><a href="#__codelineno-11-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="s">&quot;time&quot;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="p">)</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="c1">// Config represents the receiver config settings within the collector&#39;s config.yaml</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="kd">type</span><span class="w"> </span><span class="nx">Config</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">    </span><span class="nx">Interval</span><span class="w">       </span><span class="kt">string</span><span class="w"> </span><span class="s">`mapstructure:&quot;interval&quot;`</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">    </span><span class="nx">NumberOfTraces</span><span class="w"> </span><span class="kt">int</span><span class="w">    </span><span class="s">`mapstructure:&quot;number_of_traces&quot;`</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="p">}</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="c1">// Validate checks if the receiver configuration is valid</span>
<a id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">cfg</span><span class="w"> </span><span class="o">*</span><span class="nx">Config</span><span class="p">)</span><span class="w"> </span><span class="nx">Validate</span><span class="p">()</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="w">    </span><span class="nx">interval</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">ParseDuration</span><span class="p">(</span><span class="nx">cfg</span><span class="p">.</span><span class="nx">Interval</span><span class="p">)</span>
<a id="__codelineno-11-17" name="__codelineno-11-17"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">interval</span><span class="p">.</span><span class="nx">Minutes</span><span class="p">()</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-18" name="__codelineno-11-18"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;when defined, the interval has to be set to at least 1 minute (1m)&quot;</span><span class="p">)</span>
<a id="__codelineno-11-19" name="__codelineno-11-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-20" name="__codelineno-11-20"></a>
<a id="__codelineno-11-21" name="__codelineno-11-21"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">cfg</span><span class="p">.</span><span class="nx">NumberOfTraces</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-22" name="__codelineno-11-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;number_of_traces must be greater or equal to 1&quot;</span><span class="p">)</span>
<a id="__codelineno-11-23" name="__codelineno-11-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-24" name="__codelineno-11-24"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-11-25" name="__codelineno-11-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_1">Check your work<a class="headerlink" href="#check-your-work_1" title="Permanent link">&para;</a></h4>
<ul>
<li>I imported the <code>fmt</code> package, so I can properly format print my error
  messages.</li>
<li>I added the <code>Validate</code> method to my Config struct where I am checking if the
  <code>interval</code> setting value is at least 1 minute (1m) and if the
  <code>number_of_traces</code> setting value is greater or equal to 1. If that is not
  true the Collector will generate an error during its startup process and
  display the message accordingly.</li>
</ul>
</blockquote>
<p>If you want to take a closer look at the structs and interfaces involved in the
configuration aspects of a component, take a look at the
<a href="https://github.com/open-telemetry/opentelemetry-collector/blob/{{%
param collectorVersion %}}/component/config.go">component/config.go</a> file inside the Collector's
GitHub project.</p>
<h2 id="enabling-the-collector-to-instantiate-your-receiver">Enabling the Collector to instantiate your receiver<a class="headerlink" href="#enabling-the-collector-to-instantiate-your-receiver" title="Permanent link">&para;</a></h2>
<p>At the beginning of this tutorial, you created your <code>otelcol-dev</code> instance,
which is bootstrapped with the following components:</p>
<ul>
<li>Receivers: OTLP Receiver</li>
<li>Processors: Batch Processor</li>
<li>Exporters: Logging and Jaeger Exporters</li>
</ul>
<p>Go ahead and open the <code>components.go</code> file under the <code>otelcol-dev</code> folder, and
let's take a look at the <code>components()</code> function.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span>
<span class="normal"><a href="#__codelineno-12-20">20</a></span>
<span class="normal"><a href="#__codelineno-12-21">21</a></span>
<span class="normal"><a href="#__codelineno-12-22">22</a></span>
<span class="normal"><a href="#__codelineno-12-23">23</a></span>
<span class="normal"><a href="#__codelineno-12-24">24</a></span>
<span class="normal"><a href="#__codelineno-12-25">25</a></span>
<span class="normal"><a href="#__codelineno-12-26">26</a></span>
<span class="normal"><a href="#__codelineno-12-27">27</a></span>
<span class="normal"><a href="#__codelineno-12-28">28</a></span>
<span class="normal"><a href="#__codelineno-12-29">29</a></span>
<span class="normal"><a href="#__codelineno-12-30">30</a></span>
<span class="normal"><a href="#__codelineno-12-31">31</a></span>
<span class="normal"><a href="#__codelineno-12-32">32</a></span>
<span class="normal"><a href="#__codelineno-12-33">33</a></span>
<span class="normal"><a href="#__codelineno-12-34">34</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">components</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span><span class="nx">factories</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{}</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="nx">factories</span><span class="p">.</span><span class="nx">Extensions</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">extension</span><span class="p">.</span><span class="nx">MakeFactoryMap</span><span class="p">(</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{},</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">    </span><span class="nx">factories</span><span class="p">.</span><span class="nx">Receivers</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">MakeFactoryMap</span><span class="p">(</span>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">        </span><span class="nx">otlpreceiver</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(),</span>
<a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{},</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-17" name="__codelineno-12-17"></a>
<a id="__codelineno-12-18" name="__codelineno-12-18"></a><span class="w">    </span><span class="nx">factories</span><span class="p">.</span><span class="nx">Exporters</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">exporter</span><span class="p">.</span><span class="nx">MakeFactoryMap</span><span class="p">(</span>
<a id="__codelineno-12-19" name="__codelineno-12-19"></a><span class="w">        </span><span class="nx">loggingexporter</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(),</span>
<a id="__codelineno-12-20" name="__codelineno-12-20"></a><span class="w">        </span><span class="nx">jaegerexporter</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(),</span>
<a id="__codelineno-12-21" name="__codelineno-12-21"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-12-22" name="__codelineno-12-22"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-23" name="__codelineno-12-23"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{},</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-12-24" name="__codelineno-12-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-25" name="__codelineno-12-25"></a>
<a id="__codelineno-12-26" name="__codelineno-12-26"></a><span class="w">    </span><span class="nx">factories</span><span class="p">.</span><span class="nx">Processors</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">processor</span><span class="p">.</span><span class="nx">MakeFactoryMap</span><span class="p">(</span>
<a id="__codelineno-12-27" name="__codelineno-12-27"></a><span class="w">        </span><span class="nx">batchprocessor</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(),</span>
<a id="__codelineno-12-28" name="__codelineno-12-28"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-12-29" name="__codelineno-12-29"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-30" name="__codelineno-12-30"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{},</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-12-31" name="__codelineno-12-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-32" name="__codelineno-12-32"></a>
<a id="__codelineno-12-33" name="__codelineno-12-33"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">factories</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-12-34" name="__codelineno-12-34"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>As you can see, the <code>components()</code> function is responsible to provide the
Collector the factories for all its components which is represented by a
variable called <code>factories</code> of type <code>otelcol.Factories</code> (here is the declaration
of the
<a href="https://github.com/open-telemetry/opentelemetry-collector/blob/{{%
param collectorVersion %}}/otelcol/factories.go#L27">otelcol.Factories</a> struct), which will then be
used to instantiate the components that are configured and consumed by the
Collector's pipelines.</p>
<p>Notice that <code>factories.Receivers</code> is the field holding a map to all the receiver
factories (instances of <code>receiver.Factory</code>), and it currently has the
<code>otlpreceiver</code> factory only which is instantiated through the
<code>otlpreceiver.NewFactory()</code> function call.</p>
<p>The <code>tailtracer</code> receiver has to provide a <code>receiver.Factory</code> implementation,
and although you will find a <code>receiver.Factory</code> interface (you can find its
definition in the
<a href="https://github.com/open-telemetry/opentelemetry-collector/blob/{{%
param collectorVersion %}}/receiver/receiver.go#L69">receiver/receiver.go</a> file within the Collector's
project ), the right way to provide the implementation is by using the functions
available within the <code>go.opentelemetry.io/collector/receiver</code> package.</p>
<h3 id="implementing-your-receiverfactory">Implementing your receiver.Factory<a class="headerlink" href="#implementing-your-receiverfactory" title="Permanent link">&para;</a></h3>
<p>Start by creating a file named factory.go within the <code>tailtracer</code> folder.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nb">cd</span><span class="w"> </span>tailtracer
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>touch<span class="w"> </span>factory.go
</code></pre></div></td></tr></table></div>
<p>Now let's follow the convention and add a function named <code>NewFactory()</code> that
will be responsible to instantiate the <code>tailtracer</code> factory. Go ahead the add
the following code to your <code>factory.go</code> file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/receiver&quot;</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="p">)</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="c1">// NewFactory creates a factory for tailtracer receiver.</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="kd">func</span><span class="w"> </span><span class="nx">NewFactory</span><span class="p">()</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">Factory</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>In order to instantiate your <code>tailtracer</code> receiver factory, you will use the
following function from the <code>receiver</code> package:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">NewFactory</span><span class="p">(</span><span class="nx">cfgType</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Type</span><span class="p">,</span><span class="w"> </span><span class="nx">createDefaultConfig</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">CreateDefaultConfigFunc</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">...</span><span class="nx">FactoryOption</span><span class="p">)</span><span class="w"> </span><span class="nx">Factory</span>
</code></pre></div></td></tr></table></div>
<p>The <code>receiver.NewFactory()</code> instantiates and returns a <code>receiver.Factory</code> and it
requires the following parameters:</p>
<ul>
<li>
<p><code>component.Type</code>: a unique string identifier for your receiver across all
  Collector's components.</p>
</li>
<li>
<p><code>component.CreateDefaultConfigFunc</code>: a reference to a function that returns
  the component.Config instance for your receiver.</p>
</li>
<li>
<p><code>...FactoryOption</code>: the slice of <code>receiver.FactoryOption</code>s that will determine
  what type of signal your receiver is capable of processing.</p>
</li>
</ul>
<p>Let's now implement the code to support all the parameters required by
<code>receiver.NewFactory()</code>.</p>
<h3 id="identifying-and-providing-default-settings-for-the-receiver">Identifying and Providing default settings for the receiver<a class="headerlink" href="#identifying-and-providing-default-settings-for-the-receiver" title="Permanent link">&para;</a></h3>
<p>Previously, we said that the <code>interval</code> setting for our <code>tailtracer</code> receiver
would be optional, in that case you will need to provide a default value for it
so it can be used as part of the default settings.</p>
<p>Go ahead and add the following code to your <code>factory.go</code> file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">    </span><span class="nx">typeStr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;tailtracer&quot;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">    </span><span class="nx">defaultInterval</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Minute</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>As for default settings, you just need to add a function that returns a
<code>component.Config</code> holding the default configurations for the <code>tailtracer</code>
receiver.</p>
<p>To accomplish that, go ahead and add the following code to your <code>factory.go</code>
file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">createDefaultConfig</span><span class="p">()</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Config</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Config</span><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">        </span><span class="nx">Interval</span><span class="p">:</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">defaultInterval</span><span class="p">),</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After these two changes you will notice a few imports are missing, so here is
what your <code>factory.go</code> file should look like with the proper imports:</p>
<blockquote>
<p>factory.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span>
<span class="normal"><a href="#__codelineno-18-16">16</a></span>
<span class="normal"><a href="#__codelineno-18-17">17</a></span>
<span class="normal"><a href="#__codelineno-18-18">18</a></span>
<span class="normal"><a href="#__codelineno-18-19">19</a></span>
<span class="normal"><a href="#__codelineno-18-20">20</a></span>
<span class="normal"><a href="#__codelineno-18-21">21</a></span>
<span class="normal"><a href="#__codelineno-18-22">22</a></span>
<span class="normal"><a href="#__codelineno-18-23">23</a></span>
<span class="normal"><a href="#__codelineno-18-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">    </span><span class="s">&quot;time&quot;</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/component&quot;</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/receiver&quot;</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="p">)</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="kd">const</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="w">    </span><span class="nx">typeStr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;tailtracer&quot;</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">    </span><span class="nx">defaultInterval</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Minute</span>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="p">)</span>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a>
<a id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="kd">func</span><span class="w"> </span><span class="nx">createDefaultConfig</span><span class="p">()</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Config</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Config</span><span class="p">{</span>
<a id="__codelineno-18-17" name="__codelineno-18-17"></a><span class="w">        </span><span class="nx">Interval</span><span class="p">:</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">defaultInterval</span><span class="p">),</span>
<a id="__codelineno-18-18" name="__codelineno-18-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-19" name="__codelineno-18-19"></a><span class="p">}</span>
<a id="__codelineno-18-20" name="__codelineno-18-20"></a>
<a id="__codelineno-18-21" name="__codelineno-18-21"></a><span class="c1">// NewFactory creates a factory for tailtracer receiver.</span>
<a id="__codelineno-18-22" name="__codelineno-18-22"></a><span class="kd">func</span><span class="w"> </span><span class="nx">NewFactory</span><span class="p">()</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">Factory</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-23" name="__codelineno-18-23"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-18-24" name="__codelineno-18-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_2">Check your work<a class="headerlink" href="#check-your-work_2" title="Permanent link">&para;</a></h4>
<ul>
<li>Importing the <code>time</code> package in order to support the time.Duration type for
  the defaultInterval</li>
<li>Importing the <code>go.opentelemetry.io/collector/component</code> package, which is
  where <code>component.Config</code> is declared.</li>
<li>Importing the <code>go.opentelemetry.io/collector/receiver</code> package, which is
  where <code>receiver.Factory</code> is declared.</li>
<li>Added a <code>time.Duration</code> constant called <code>defaultInterval</code> to represent the
  default value for our receiver's <code>Interval</code> setting. We will be setting the
  default value for 1 minute hence the assignment of <code>1 * time.Minute</code> as its
  value.</li>
<li>Added a function called <code>createDefaultConfig</code> which is responsible to return
  a component.Config implementation, which in this case is going to be an
  instance of our <code>tailtracer.Config</code> struct.</li>
<li>The <code>tailtracer.Config.Interval</code> field was initialized with the
  <code>defaultInterval</code> constant.</li>
</ul>
</blockquote>
<h3 id="enabling-the-factory-to-describe-the-receiver-as-capable-of-processing-traces">Enabling the factory to describe the receiver as capable of processing traces<a class="headerlink" href="#enabling-the-factory-to-describe-the-receiver-as-capable-of-processing-traces" title="Permanent link">&para;</a></h3>
<p>The same receiver component can process traces, metrics, and logs. The
receiver's factory is responsible for describing those capabilities.</p>
<p>Given that traces are the subject of the tutorial, that's the only signal we
will enable the <code>tailtracer</code> receiver to work with. The <code>receiver</code> package
provides the following function and type to help the factory describe the trace
processing capabilities:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">WithTraces</span><span class="p">(</span><span class="nx">createTracesReceiver</span><span class="w"> </span><span class="nx">CreateTracesFunc</span><span class="p">,</span><span class="w"> </span><span class="nx">sl</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">StabilityLevel</span><span class="p">)</span><span class="w"> </span><span class="nx">FactoryOption</span>
</code></pre></div></td></tr></table></div>
<p>The <code>receiver.WithTraces()</code> instantiates and returns a <code>receiver.FactoryOption</code>
and it requires the following parameters:</p>
<ul>
<li><code>createTracesReceiver</code>: A reference to a function that matches the
  <code>receiver.CreateTracesFunc</code> type</li>
</ul>
<p>The <code>receiver.CreateTracesFunc</code> type is a pointer to a function that is
responsible to instantiate and return a <code>receiver.Traces</code> instance and it
requires the following parameters:</p>
<ul>
<li><code>context.Context</code>: the reference to the Collector's <code>context.Context</code> so your
  trace receiver can properly manage its execution context.</li>
<li><code>receiver.CreateSettings</code>: the reference to some of the Collector's settings
  under which your receiver is created.</li>
<li><code>component.Config</code>: the reference for the receiver config settings passed by
  the Collector to the factory so it can properly read its settings from the
  Collector config.</li>
<li><code>consumer.Traces</code>: the reference to the next <code>consumer.Traces</code> in the
  pipeline, which is where received traces will go. This is either a processor
  or an exporter.</li>
</ul>
<p>Start by adding the bootstrap code to properly implement the
<code>receiver.CreateTracesFunc</code> function pointer. Go ahead and add the following
code to your <code>factory.go</code> file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">createTracesReceiver</span><span class="p">(</span><span class="nx">_</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">CreateSettings</span><span class="p">,</span><span class="w"> </span><span class="nx">baseCfg</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">consumer</span><span class="w"> </span><span class="nx">consumer</span><span class="p">.</span><span class="nx">Traces</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">Traces</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>You now have all the necessary components to successfully instantiate your
receiver factory using the <code>receiver.NewFactory</code> function. Go ahead and and
update your <code>NewFactory()</code> function in your <code>factory.go</code> file as follow:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span>
<span class="normal"><a href="#__codelineno-21-5">5</a></span>
<span class="normal"><a href="#__codelineno-21-6">6</a></span>
<span class="normal"><a href="#__codelineno-21-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="c1">// NewFactory creates a factory for tailtracer receiver.</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="kd">func</span><span class="w"> </span><span class="nx">NewFactory</span><span class="p">()</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">Factory</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">        </span><span class="nx">typeStr</span><span class="p">,</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">        </span><span class="nx">createDefaultConfig</span><span class="p">,</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">        </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">WithTraces</span><span class="p">(</span><span class="nx">createTracesReceiver</span><span class="p">,</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">StabilityLevelAlpha</span><span class="p">))</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After these two changes you will notice a few imports are missing, so here is
what your <code>factory.go</code> file should look like with the proper imports:</p>
<blockquote>
<p>factory.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span>
<span class="normal"><a href="#__codelineno-22-18">18</a></span>
<span class="normal"><a href="#__codelineno-22-19">19</a></span>
<span class="normal"><a href="#__codelineno-22-20">20</a></span>
<span class="normal"><a href="#__codelineno-22-21">21</a></span>
<span class="normal"><a href="#__codelineno-22-22">22</a></span>
<span class="normal"><a href="#__codelineno-22-23">23</a></span>
<span class="normal"><a href="#__codelineno-22-24">24</a></span>
<span class="normal"><a href="#__codelineno-22-25">25</a></span>
<span class="normal"><a href="#__codelineno-22-26">26</a></span>
<span class="normal"><a href="#__codelineno-22-27">27</a></span>
<span class="normal"><a href="#__codelineno-22-28">28</a></span>
<span class="normal"><a href="#__codelineno-22-29">29</a></span>
<span class="normal"><a href="#__codelineno-22-30">30</a></span>
<span class="normal"><a href="#__codelineno-22-31">31</a></span>
<span class="normal"><a href="#__codelineno-22-32">32</a></span>
<span class="normal"><a href="#__codelineno-22-33">33</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">    </span><span class="s">&quot;context&quot;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">    </span><span class="s">&quot;time&quot;</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/component&quot;</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/consumer&quot;</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/receiver&quot;</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="p">)</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="kd">const</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">    </span><span class="nx">typeStr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;tailtracer&quot;</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">    </span><span class="nx">defaultInterval</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Minute</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="p">)</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="kd">func</span><span class="w"> </span><span class="nx">createDefaultConfig</span><span class="p">()</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Config</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Config</span><span class="p">{</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a><span class="w">        </span><span class="nx">Interval</span><span class="p">:</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">defaultInterval</span><span class="p">),</span>
<a id="__codelineno-22-20" name="__codelineno-22-20"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-22-21" name="__codelineno-22-21"></a><span class="p">}</span>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a>
<a id="__codelineno-22-23" name="__codelineno-22-23"></a><span class="kd">func</span><span class="w"> </span><span class="nx">createTracesReceiver</span><span class="p">(</span><span class="nx">_</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">CreateSettings</span><span class="p">,</span><span class="w"> </span><span class="nx">baseCfg</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">consumer</span><span class="w"> </span><span class="nx">consumer</span><span class="p">.</span><span class="nx">Traces</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">Traces</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-24" name="__codelineno-22-24"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-22-25" name="__codelineno-22-25"></a><span class="p">}</span>
<a id="__codelineno-22-26" name="__codelineno-22-26"></a>
<a id="__codelineno-22-27" name="__codelineno-22-27"></a><span class="c1">// NewFactory creates a factory for tailtracer receiver.</span>
<a id="__codelineno-22-28" name="__codelineno-22-28"></a><span class="kd">func</span><span class="w"> </span><span class="nx">NewFactory</span><span class="p">()</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">Factory</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-29" name="__codelineno-22-29"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(</span>
<a id="__codelineno-22-30" name="__codelineno-22-30"></a><span class="w">        </span><span class="nx">typeStr</span><span class="p">,</span>
<a id="__codelineno-22-31" name="__codelineno-22-31"></a><span class="w">        </span><span class="nx">createDefaultConfig</span><span class="p">,</span>
<a id="__codelineno-22-32" name="__codelineno-22-32"></a><span class="w">        </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">WithTraces</span><span class="p">(</span><span class="nx">createTracesReceiver</span><span class="p">,</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">StabilityLevelAlpha</span><span class="p">))</span>
<a id="__codelineno-22-33" name="__codelineno-22-33"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_3">Check your work<a class="headerlink" href="#check-your-work_3" title="Permanent link">&para;</a></h4>
<ul>
<li>Importing the <code>context</code> package in order to support the <code>context.Context</code>
  type referenced in the <code>createTracesReceiver</code> function</li>
<li>Importing the <code>go.opentelemetry.io/collector/consumer</code> package in order to
  support the <code>consumer.Traces</code> type referenced in the <code>createTracesReceiver</code>
  function</li>
<li>Updated the <code>NewFactory()</code> function so it returns the <code>receiver.Factory</code>
  generated by the <code>receiver.NewFactory()</code> call with the required parameters.
  The generated receiver factory will be capable of processing traces through
  the call to
  <code>receiver.WithTraces(createTracesReceiver, component.StabilityLevelAlpha)</code></li>
</ul>
</blockquote>
<p>At this point, you have the <code>tailtracer</code> factory and config code needed for the
Collector to validate the <code>tailtracer</code> receiver settings if they are defined
within the <code>config.yaml</code>. You just need to add it to the Collector's
initialization process.</p>
<h3 id="adding-the-receiver-factory-to-the-collectors-initialization">Adding the receiver factory to the Collector's initialization<a class="headerlink" href="#adding-the-receiver-factory-to-the-collectors-initialization" title="Permanent link">&para;</a></h3>
<p>As explained before, all the Collector components are instantiated by the
<code>components()</code> function within the <code>components.go</code> file.</p>
<p>The <code>tailtracer</code> receiver factory instance has to be added to the <code>factories</code>
map so the Collector can load it properly as part of its initialization process.</p>
<p>Here is what the <code>components.go</code> file looks like after making the changes to
support that:</p>
<blockquote>
<p>components.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span>
<span class="normal"><a href="#__codelineno-23-14">14</a></span>
<span class="normal"><a href="#__codelineno-23-15">15</a></span>
<span class="normal"><a href="#__codelineno-23-16">16</a></span>
<span class="normal"><a href="#__codelineno-23-17">17</a></span>
<span class="normal"><a href="#__codelineno-23-18">18</a></span>
<span class="normal"><a href="#__codelineno-23-19">19</a></span>
<span class="normal"><a href="#__codelineno-23-20">20</a></span>
<span class="normal"><a href="#__codelineno-23-21">21</a></span>
<span class="normal"><a href="#__codelineno-23-22">22</a></span>
<span class="normal"><a href="#__codelineno-23-23">23</a></span>
<span class="normal"><a href="#__codelineno-23-24">24</a></span>
<span class="normal"><a href="#__codelineno-23-25">25</a></span>
<span class="normal"><a href="#__codelineno-23-26">26</a></span>
<span class="normal"><a href="#__codelineno-23-27">27</a></span>
<span class="normal"><a href="#__codelineno-23-28">28</a></span>
<span class="normal"><a href="#__codelineno-23-29">29</a></span>
<span class="normal"><a href="#__codelineno-23-30">30</a></span>
<span class="normal"><a href="#__codelineno-23-31">31</a></span>
<span class="normal"><a href="#__codelineno-23-32">32</a></span>
<span class="normal"><a href="#__codelineno-23-33">33</a></span>
<span class="normal"><a href="#__codelineno-23-34">34</a></span>
<span class="normal"><a href="#__codelineno-23-35">35</a></span>
<span class="normal"><a href="#__codelineno-23-36">36</a></span>
<span class="normal"><a href="#__codelineno-23-37">37</a></span>
<span class="normal"><a href="#__codelineno-23-38">38</a></span>
<span class="normal"><a href="#__codelineno-23-39">39</a></span>
<span class="normal"><a href="#__codelineno-23-40">40</a></span>
<span class="normal"><a href="#__codelineno-23-41">41</a></span>
<span class="normal"><a href="#__codelineno-23-42">42</a></span>
<span class="normal"><a href="#__codelineno-23-43">43</a></span>
<span class="normal"><a href="#__codelineno-23-44">44</a></span>
<span class="normal"><a href="#__codelineno-23-45">45</a></span>
<span class="normal"><a href="#__codelineno-23-46">46</a></span>
<span class="normal"><a href="#__codelineno-23-47">47</a></span>
<span class="normal"><a href="#__codelineno-23-48">48</a></span>
<span class="normal"><a href="#__codelineno-23-49">49</a></span>
<span class="normal"><a href="#__codelineno-23-50">50</a></span>
<span class="normal"><a href="#__codelineno-23-51">51</a></span>
<span class="normal"><a href="#__codelineno-23-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="c1">// Code generated by &quot;go.opentelemetry.io/collector/cmd/builder&quot;. DO NOT EDIT.</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/exporter&quot;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/extension&quot;</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/otelcol&quot;</span>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/processor&quot;</span>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/receiver&quot;</span>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">    </span><span class="nx">loggingexporter</span><span class="w"> </span><span class="s">&quot;go.opentelemetry.io/collector/exporter/loggingexporter&quot;</span>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">    </span><span class="nx">jaegerexporter</span><span class="w"> </span><span class="s">&quot;github.com/open-telemetry/opentelemetry-collector-contrib/exporter/jaegerexporter&quot;</span>
<a id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="w">    </span><span class="nx">batchprocessor</span><span class="w"> </span><span class="s">&quot;go.opentelemetry.io/collector/processor/batchprocessor&quot;</span>
<a id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">    </span><span class="nx">otlpreceiver</span><span class="w"> </span><span class="s">&quot;go.opentelemetry.io/collector/receiver/otlpreceiver&quot;</span>
<a id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="w">    </span><span class="nx">tailtracer</span><span class="w"> </span><span class="s">&quot;github.com/rquedas/otel4devs/collector/receiver/trace-receiver/tailtracer&quot;</span>
<a id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="p">)</span>
<a id="__codelineno-23-17" name="__codelineno-23-17"></a>
<a id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="kd">func</span><span class="w"> </span><span class="nx">components</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-19" name="__codelineno-23-19"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span>
<a id="__codelineno-23-20" name="__codelineno-23-20"></a><span class="w">    </span><span class="nx">factories</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{}</span>
<a id="__codelineno-23-21" name="__codelineno-23-21"></a>
<a id="__codelineno-23-22" name="__codelineno-23-22"></a><span class="w">    </span><span class="nx">factories</span><span class="p">.</span><span class="nx">Extensions</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">extension</span><span class="p">.</span><span class="nx">MakeFactoryMap</span><span class="p">(</span>
<a id="__codelineno-23-23" name="__codelineno-23-23"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-23-24" name="__codelineno-23-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-25" name="__codelineno-23-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{},</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-23-26" name="__codelineno-23-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-27" name="__codelineno-23-27"></a>
<a id="__codelineno-23-28" name="__codelineno-23-28"></a><span class="w">    </span><span class="nx">factories</span><span class="p">.</span><span class="nx">Receivers</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">MakeFactoryMap</span><span class="p">(</span>
<a id="__codelineno-23-29" name="__codelineno-23-29"></a><span class="w">        </span><span class="nx">otlpreceiver</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(),</span>
<a id="__codelineno-23-30" name="__codelineno-23-30"></a><span class="w">        </span><span class="nx">tailtracer</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(),</span>
<a id="__codelineno-23-31" name="__codelineno-23-31"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-23-32" name="__codelineno-23-32"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-33" name="__codelineno-23-33"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{},</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-23-34" name="__codelineno-23-34"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-35" name="__codelineno-23-35"></a>
<a id="__codelineno-23-36" name="__codelineno-23-36"></a><span class="w">    </span><span class="nx">factories</span><span class="p">.</span><span class="nx">Exporters</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">exporter</span><span class="p">.</span><span class="nx">MakeFactoryMap</span><span class="p">(</span>
<a id="__codelineno-23-37" name="__codelineno-23-37"></a><span class="w">        </span><span class="nx">loggingexporter</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(),</span>
<a id="__codelineno-23-38" name="__codelineno-23-38"></a><span class="w">        </span><span class="nx">jaegerexporter</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(),</span>
<a id="__codelineno-23-39" name="__codelineno-23-39"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-23-40" name="__codelineno-23-40"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-41" name="__codelineno-23-41"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{},</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-23-42" name="__codelineno-23-42"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-43" name="__codelineno-23-43"></a>
<a id="__codelineno-23-44" name="__codelineno-23-44"></a><span class="w">    </span><span class="nx">factories</span><span class="p">.</span><span class="nx">Processors</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">processor</span><span class="p">.</span><span class="nx">MakeFactoryMap</span><span class="p">(</span>
<a id="__codelineno-23-45" name="__codelineno-23-45"></a><span class="w">        </span><span class="nx">batchprocessor</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(),</span>
<a id="__codelineno-23-46" name="__codelineno-23-46"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-23-47" name="__codelineno-23-47"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-48" name="__codelineno-23-48"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">otelcol</span><span class="p">.</span><span class="nx">Factories</span><span class="p">{},</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-23-49" name="__codelineno-23-49"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-50" name="__codelineno-23-50"></a>
<a id="__codelineno-23-51" name="__codelineno-23-51"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">factories</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-23-52" name="__codelineno-23-52"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_4">Check your work<a class="headerlink" href="#check-your-work_4" title="Permanent link">&para;</a></h4>
<ul>
<li>Importing the
  <code>github.com/rquedas/otel4devs/collector/receiver/trace-receiver/tailtracer</code>
  module which is where the receiver types and function are.</li>
<li>Added a call to <code>tailtracer.NewFactory()</code> as a parameter of the
  <code>receiver.MakeFactoryMap()</code> call so your <code>tailtracer</code> receiver factory is
  properly added to the <code>factories</code> map.</li>
</ul>
</blockquote>
<p>We added the <code>tailtracer</code> receiver settings to the <code>config.yaml</code> previously, so
here is what the beginning of the output for running your Collector with
<code>otelcol-dev</code> command should look like after building it with the current
codebase:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span>
<span class="normal"><a href="#__codelineno-24-6">6</a></span>
<span class="normal"><a href="#__codelineno-24-7">7</a></span>
<span class="normal"><a href="#__codelineno-24-8">8</a></span>
<span class="normal"><a href="#__codelineno-24-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="gp">$ </span>./otelcol-dev<span class="w"> </span>--config<span class="w"> </span>config.yaml
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="go">2022-02-24T12:17:41.454-0600    info    service/collector.go:190        Applying configuration...</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="go">2022-02-24T12:17:41.454-0600    info    builder/exporters_builder.go:254        Exporter was built.     {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="go">2022-02-24T12:17:41.454-0600    info    builder/exporters_builder.go:254        Exporter was built.     {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="go">2022-02-24T12:17:41.454-0600    info    builder/pipelines_builder.go:222        Pipeline was built.     {&quot;name&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="go">2022-02-24T12:17:41.454-0600    info    builder/receivers_builder.go:111        Ignoring receiver as it is not used by any pipeline      {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;}</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="go">2022-02-24T12:17:41.454-0600    info    builder/receivers_builder.go:224        Receiver was built.     {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;, &quot;datatype&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="go">2022-02-24T12:17:41.454-0600    info    service/service.go:86   Starting extensions...</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="go">2022-02-24T12:17:41.454-0600    info    service/service.go:91   Starting exporters...</span>
</code></pre></div></td></tr></table></div>
<p>Look for the log line for "builder/receivers_builder.go:111" (it's the 4<sup>th</sup> line
from the bottom at the snippet showed here), you can see that the Collector
found the settings for the <code>tailtracer</code> receiver, validated them (the current
settings are all correct), but ignores the receiver given that it's not used in
any pipeline.</p>
<p>Let's check if the <code>tailtracer</code> factory is validating the receiver settings
correctly, the <code>interval</code> setting isn't required, so if you remove it from the
<code>config.yaml</code> and run the command again you should get the same output.</p>
<p>Now, let's test one of the <code>tailtracer</code> settings validation rules. Remove the
<code>number_of_traces</code> setting from the <code>config.yaml</code>, and here is what the output
for running the Collector will look like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="gp">$ </span>./otelcol-dev<span class="w"> </span>--config<span class="w"> </span>config.yaml
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="go">Error: invalid configuration: receiver &quot;tailtracer&quot; has invalid configuration: number_of_traces must be at least 1</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="go">2022/02/24 13:00:20 collector server run finished with error: invalid configuration: receiver &quot;tailtracer&quot; has invalid configuration: number_of_traces must be at least 1</span>
</code></pre></div></td></tr></table></div>
<p>The <code>tailtracer</code> receiver factory and config requirements are done and the
Collector is properly loading your component. You can now move to the core of
your receiver, the implementation of the component itself.</p>
<h2 id="implementing-the-trace-receiver-component">Implementing the trace receiver component<a class="headerlink" href="#implementing-the-trace-receiver-component" title="Permanent link">&para;</a></h2>
<p>In the previous section, I mentioned the fact that a receiver can process any of
the OpenTelemetry signals, and the Collector's API is designed to help you
accomplish that.</p>
<p>All the receiver APIs responsible to enable the signals are currently declared
in the
<a href="https://github.com/open-telemetry/opentelemetry-collector/blob/{{%
param collectorVersion %}}/receiver/receiver.go">receiver/receiver.go</a> file within the OTel
Collector's project in GitHub, open the file and take a minute to browse through
all the interfaces declared in it.</p>
<p>Notice that <code>receiver.Traces</code> (and its siblings <code>receiver.Metrics</code> and
<code>receiver.Logs</code>) at this point in time, doesn't describe any specific methods
other than the ones it "inherits" from <code>component.Component</code>.</p>
<p>It might feel weird, but remember, the Collector's API was meant to be
extensible, and the components and their signals might evolve in different ways,
so the role of those interfaces exist to help support that.</p>
<p>So, to create a <code>receiver.Traces</code>, you just need to implement the following
methods described by <code>component.Component</code> interface:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="nx">Start</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">host</span><span class="w"> </span><span class="nx">Host</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="nx">Shutdown</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span>
</code></pre></div></td></tr></table></div>
<p>Both methods actually act as event handlers used by the Collector to communicate
with its components as part of their lifecycle.</p>
<p>The <code>Start()</code> represents a signal of the Collector telling the component to
start its processing. As part of the event, the Collector will pass the
following information:</p>
<ul>
<li><code>context.Context</code>: Most of the time, a receiver will be processing a
  long-running operation, so the recommendation is to ignore this context and
  actually create a new one from context.Background().</li>
<li><code>Host</code>: The host is meant to enable the receiver to communicate with the
  Collector's host once it's up and running.</li>
</ul>
<p>The <code>Shutdown()</code> represents a signal of the Collector telling the component that
the service is getting shutdown and as such the component should stop its
processing and make all the necessary cleanup work required:</p>
<ul>
<li><code>context.Context</code>: the context passed by the Collector as part of the shutdown
  operation.</li>
</ul>
<p>You will start the implementation by creating a new file called
<code>trace-receiver.go</code> within your project's <code>tailtracer</code> folder and add the
declaration to a type type called <code>tailtracerReceiver</code> as follow:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="kd">type</span><span class="w"> </span><span class="nx">tailtracerReceiver</span><span class="w"> </span><span class="kd">struct</span><span class="p">{</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now that you have the <code>tailtracerReceiver</code> type you can implement the Start()
and Shutdown() methods so the receiver type can be compliant with the
<code>receiver.Traces</code> interface.</p>
<p>Here is what the <code>tailtracer/trace-receiver.go</code> file should look like with the
methods implementation:</p>
<blockquote>
<p>trace-receiver.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">    </span><span class="s">&quot;context&quot;</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/component&quot;</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="p">)</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="kd">type</span><span class="w"> </span><span class="nx">tailtracerReceiver</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="p">}</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="w"> </span><span class="o">*</span><span class="nx">tailtracerReceiver</span><span class="p">)</span><span class="w"> </span><span class="nx">Start</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">host</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Host</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="p">}</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="w"> </span><span class="o">*</span><span class="nx">tailtracerReceiver</span><span class="p">)</span><span class="w"> </span><span class="nx">Shutdown</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_5">Check your work<a class="headerlink" href="#check-your-work_5" title="Permanent link">&para;</a></h4>
<ul>
<li>Importing the <code>context</code> package which is where the <code>Context</code> type and
  functions are declared</li>
<li>Importing the <code>go.opentelemetry.io/collector/component</code> package which is
  where the <code>Host</code> type is declared</li>
<li>Added a bootstrap implementation of the
  <code>Start(ctx context.Context, host component.Host)</code> method to comply with the
  <code>receiver.Traces</code> interface.</li>
<li>Added a bootstrap implementation of the <code>Shutdown(ctx context.Context)</code>
  method to comply with the <code>receiver.Traces</code> interface.</li>
</ul>
</blockquote>
<p>The <code>Start()</code> method is passing 2 references (<code>context.Context</code> and
<code>component.Host</code>) that your receiver might need to keep so they can be used as
part of its processing operations.</p>
<p>The <code>context.Context</code> reference should be used for creating a new context to
support you receiver processing operations, and in that case you will need to
decide the best way to handle context cancellation so you can finalize it
properly as part of the component's shutdown within the <code>Shutdown()</code> method.</p>
<p>The <code>component.Host</code> can be useful during the whole lifecycle of the receiver so
you should keep that reference within your <code>tailtracerReceiver</code> type.</p>
<p>Here is what the <code>tailtracerReceiver</code> type declaration will look like after you
include the fields for keeping the references suggested above:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span>
<span class="normal"><a href="#__codelineno-29-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kd">type</span><span class="w"> </span><span class="nx">tailtracerReceiver</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">  </span><span class="nx">host</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Host</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">  </span><span class="nx">cancel</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">CancelFunc</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now you need to update the <code>Start()</code> methods so the receiver can properly
initialize its own processing context and have the cancellation function kept in
the <code>cancel</code> field and also initialize its <code>host</code> field value. You will also
update the <code>Stop()</code> method in order to finalize the context by calling the
<code>cancel</code> function.</p>
<p>Here is what the <code>trace-receiver.go</code> file look like after making the changes
above:</p>
<blockquote>
<p>trace-receiver.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span>
<span class="normal"><a href="#__codelineno-30-15">15</a></span>
<span class="normal"><a href="#__codelineno-30-16">16</a></span>
<span class="normal"><a href="#__codelineno-30-17">17</a></span>
<span class="normal"><a href="#__codelineno-30-18">18</a></span>
<span class="normal"><a href="#__codelineno-30-19">19</a></span>
<span class="normal"><a href="#__codelineno-30-20">20</a></span>
<span class="normal"><a href="#__codelineno-30-21">21</a></span>
<span class="normal"><a href="#__codelineno-30-22">22</a></span>
<span class="normal"><a href="#__codelineno-30-23">23</a></span>
<span class="normal"><a href="#__codelineno-30-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">    </span><span class="s">&quot;context&quot;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/component&quot;</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="p">)</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="kd">type</span><span class="w"> </span><span class="nx">tailtracerReceiver</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="w">    </span><span class="nx">host</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Host</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">    </span><span class="nx">cancel</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">CancelFunc</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="p">}</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="w"> </span><span class="o">*</span><span class="nx">tailtracerReceiver</span><span class="p">)</span><span class="w"> </span><span class="nx">Start</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">host</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Host</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="w">    </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">host</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">host</span>
<a id="__codelineno-30-15" name="__codelineno-30-15"></a><span class="w">    </span><span class="nx">ctx</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Background</span><span class="p">()</span>
<a id="__codelineno-30-16" name="__codelineno-30-16"></a><span class="w">    </span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">cancel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">WithCancel</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
<a id="__codelineno-30-17" name="__codelineno-30-17"></a>
<a id="__codelineno-30-18" name="__codelineno-30-18"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-30-19" name="__codelineno-30-19"></a><span class="p">}</span>
<a id="__codelineno-30-20" name="__codelineno-30-20"></a>
<a id="__codelineno-30-21" name="__codelineno-30-21"></a><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="w"> </span><span class="o">*</span><span class="nx">tailtracerReceiver</span><span class="p">)</span><span class="w"> </span><span class="nx">Shutdown</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-22" name="__codelineno-30-22"></a><span class="w">    </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">cancel</span><span class="p">()</span>
<a id="__codelineno-30-23" name="__codelineno-30-23"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-30-24" name="__codelineno-30-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_6">Check your work<a class="headerlink" href="#check-your-work_6" title="Permanent link">&para;</a></h4>
<ul>
<li>Updated the <code>Start()</code> method by adding the initialization to the <code>host</code>
  field with the <code>component.Host</code> reference passed by the Collector and the
  <code>cancel</code> function field with the cancellation based on a new context created
  with <code>context.Background()</code> (according the Collector's API documentation
  suggestions).</li>
<li>Updated the <code>Stop()</code> method by adding a call to the <code>cancel()</code> context
  cancellation function.</li>
</ul>
</blockquote>
<h3 id="keeping-information-passed-by-the-receivers-factory">Keeping information passed by the receiver's factory<a class="headerlink" href="#keeping-information-passed-by-the-receivers-factory" title="Permanent link">&para;</a></h3>
<p>Now that you have implemented the <code>receiver.Traces</code> interface methods, your
<code>tailtracer</code> receiver component is ready to be instantiated and returned by its
factory.</p>
<p>Open the <code>tailtracer/factory.go</code> file and navigate to the
<code>createTracesReceiver()</code> function. Notice that the factory will pass references
as part of the <code>createTracesReceiver()</code> function parameters that your receiver
actually requires to work properly like its configuration settings
(<code>component.Config</code>), the next <code>Consumer</code> in the pipeline that will consume the
generated traces (<code>consumer.Traces</code>) and the Collector's logger so the
<code>tailtracer</code> receiver can add meaningful events to it
(<code>receiver.CreateSettings</code>).</p>
<p>Given that all this information will be only be made available to the receiver
at the moment its instantiated by the factory, The <code>tailtracerReceiver</code> type
will need fields to keep that information and use it within other stages of its
lifecycle.</p>
<p>Here is what the <code>trace-receiver.go</code> file looks like with the updated
<code>tailtracerReceiver</code> type declaration:</p>
<blockquote>
<p>trace-receiver.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span>
<span class="normal"><a href="#__codelineno-31-15">15</a></span>
<span class="normal"><a href="#__codelineno-31-16">16</a></span>
<span class="normal"><a href="#__codelineno-31-17">17</a></span>
<span class="normal"><a href="#__codelineno-31-18">18</a></span>
<span class="normal"><a href="#__codelineno-31-19">19</a></span>
<span class="normal"><a href="#__codelineno-31-20">20</a></span>
<span class="normal"><a href="#__codelineno-31-21">21</a></span>
<span class="normal"><a href="#__codelineno-31-22">22</a></span>
<span class="normal"><a href="#__codelineno-31-23">23</a></span>
<span class="normal"><a href="#__codelineno-31-24">24</a></span>
<span class="normal"><a href="#__codelineno-31-25">25</a></span>
<span class="normal"><a href="#__codelineno-31-26">26</a></span>
<span class="normal"><a href="#__codelineno-31-27">27</a></span>
<span class="normal"><a href="#__codelineno-31-28">28</a></span>
<span class="normal"><a href="#__codelineno-31-29">29</a></span>
<span class="normal"><a href="#__codelineno-31-30">30</a></span>
<span class="normal"><a href="#__codelineno-31-31">31</a></span>
<span class="normal"><a href="#__codelineno-31-32">32</a></span>
<span class="normal"><a href="#__codelineno-31-33">33</a></span>
<span class="normal"><a href="#__codelineno-31-34">34</a></span>
<span class="normal"><a href="#__codelineno-31-35">35</a></span>
<span class="normal"><a href="#__codelineno-31-36">36</a></span>
<span class="normal"><a href="#__codelineno-31-37">37</a></span>
<span class="normal"><a href="#__codelineno-31-38">38</a></span>
<span class="normal"><a href="#__codelineno-31-39">39</a></span>
<span class="normal"><a href="#__codelineno-31-40">40</a></span>
<span class="normal"><a href="#__codelineno-31-41">41</a></span>
<span class="normal"><a href="#__codelineno-31-42">42</a></span>
<span class="normal"><a href="#__codelineno-31-43">43</a></span>
<span class="normal"><a href="#__codelineno-31-44">44</a></span>
<span class="normal"><a href="#__codelineno-31-45">45</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">    </span><span class="s">&quot;context&quot;</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">    </span><span class="s">&quot;time&quot;</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/component&quot;</span>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/consumer&quot;</span>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="w">    </span><span class="s">&quot;go.uber.org/zap&quot;</span>
<a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="p">)</span>
<a id="__codelineno-31-10" name="__codelineno-31-10"></a>
<a id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="kd">type</span><span class="w"> </span><span class="nx">tailtracerReceiver</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="w">    </span><span class="nx">host</span><span class="w">         </span><span class="nx">component</span><span class="p">.</span><span class="nx">Host</span>
<a id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="w">    </span><span class="nx">cancel</span><span class="w">       </span><span class="nx">context</span><span class="p">.</span><span class="nx">CancelFunc</span>
<a id="__codelineno-31-14" name="__codelineno-31-14"></a><span class="w">    </span><span class="nx">logger</span><span class="w">       </span><span class="o">*</span><span class="nx">zap</span><span class="p">.</span><span class="nx">Logger</span>
<a id="__codelineno-31-15" name="__codelineno-31-15"></a><span class="w">    </span><span class="nx">nextConsumer</span><span class="w"> </span><span class="nx">consumer</span><span class="p">.</span><span class="nx">Traces</span>
<a id="__codelineno-31-16" name="__codelineno-31-16"></a><span class="w">    </span><span class="nx">config</span><span class="w">       </span><span class="o">*</span><span class="nx">Config</span>
<a id="__codelineno-31-17" name="__codelineno-31-17"></a><span class="p">}</span>
<a id="__codelineno-31-18" name="__codelineno-31-18"></a>
<a id="__codelineno-31-19" name="__codelineno-31-19"></a><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="w"> </span><span class="o">*</span><span class="nx">tailtracerReceiver</span><span class="p">)</span><span class="w"> </span><span class="nx">Start</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">host</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Host</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-20" name="__codelineno-31-20"></a><span class="w">    </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">host</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">host</span>
<a id="__codelineno-31-21" name="__codelineno-31-21"></a><span class="w">    </span><span class="nx">ctx</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Background</span><span class="p">()</span>
<a id="__codelineno-31-22" name="__codelineno-31-22"></a><span class="w">    </span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">cancel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">WithCancel</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
<a id="__codelineno-31-23" name="__codelineno-31-23"></a>
<a id="__codelineno-31-24" name="__codelineno-31-24"></a><span class="w">    </span><span class="nx">interval</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">ParseDuration</span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">Interval</span><span class="p">)</span>
<a id="__codelineno-31-25" name="__codelineno-31-25"></a><span class="w">    </span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-26" name="__codelineno-31-26"></a><span class="w">        </span><span class="nx">ticker</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">NewTicker</span><span class="p">(</span><span class="nx">interval</span><span class="p">)</span>
<a id="__codelineno-31-27" name="__codelineno-31-27"></a><span class="w">        </span><span class="k">defer</span><span class="w"> </span><span class="nx">ticker</span><span class="p">.</span><span class="nx">Stop</span><span class="p">()</span>
<a id="__codelineno-31-28" name="__codelineno-31-28"></a>
<a id="__codelineno-31-29" name="__codelineno-31-29"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-30" name="__codelineno-31-30"></a><span class="w">            </span><span class="k">select</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-31" name="__codelineno-31-31"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">ticker</span><span class="p">.</span><span class="nx">C</span><span class="p">:</span>
<a id="__codelineno-31-32" name="__codelineno-31-32"></a><span class="w">                    </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">Info</span><span class="p">(</span><span class="s">&quot;I should start processing traces now!&quot;</span><span class="p">)</span>
<a id="__codelineno-31-33" name="__codelineno-31-33"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">Done</span><span class="p">():</span>
<a id="__codelineno-31-34" name="__codelineno-31-34"></a><span class="w">                    </span><span class="k">return</span>
<a id="__codelineno-31-35" name="__codelineno-31-35"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-31-36" name="__codelineno-31-36"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-31-37" name="__codelineno-31-37"></a><span class="w">    </span><span class="p">}()</span>
<a id="__codelineno-31-38" name="__codelineno-31-38"></a>
<a id="__codelineno-31-39" name="__codelineno-31-39"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-31-40" name="__codelineno-31-40"></a><span class="p">}</span>
<a id="__codelineno-31-41" name="__codelineno-31-41"></a>
<a id="__codelineno-31-42" name="__codelineno-31-42"></a><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="w"> </span><span class="o">*</span><span class="nx">tailtracerReceiver</span><span class="p">)</span><span class="w"> </span><span class="nx">Shutdown</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-43" name="__codelineno-31-43"></a><span class="w">    </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">cancel</span><span class="p">()</span>
<a id="__codelineno-31-44" name="__codelineno-31-44"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-31-45" name="__codelineno-31-45"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_7">Check your work<a class="headerlink" href="#check-your-work_7" title="Permanent link">&para;</a></h4>
<ul>
<li>Importing the <code>go.opentelemetry.io/collector/consumer</code> which is where the
  pipeline's consumer types and interfaces are declared.</li>
<li>Importing the <code>go.uber.org/zap</code> package, which is what the Collector uses
  for its logging capabilities.</li>
<li>Added a <code>zap.Logger</code> field named <code>logger</code> so we can have access to the
  Collector's logger reference from within the receiver.</li>
<li>Added a <code>consumer.Traces</code> field named <code>nextConsumer</code> so we can push the
  traces generated by the <code>tailtracer</code> receiver to the next consumer declared
  in the Collector's pipeline.</li>
<li>Added a <code>Config</code> field named <code>config</code> so we can have access to receiver's
  configuration settings defined within the Collector's config.</li>
<li>Added a variable named <code>interval</code> that will be initialized as a
  <code>time.Duration</code> based on the value of the <code>interval</code> settings of the
  <code>tailtracer</code> receiver defined within the Collector's config.</li>
<li>Added a <code>go func()</code> to implement the <code>ticker</code> mechanism so our receiver can
  generate traces every time the <code>ticker</code> reaches the amount of time specified
  by the <code>interval</code> variable and used the <code>tailtracerRcvr.logger</code> field to
  generate a info message every time the receiver supposed to be generating
  traces.</li>
</ul>
</blockquote>
<p>The <code>tailtracerReceiver</code> type is now ready to be instantiated and keep all
meaningful information passed by its factory.</p>
<p>Open the <code>tailtracer/factory.go</code> file and navigate to the
<code>createTracesReceiver()</code> function.</p>
<p>The receiver is only instantiated if it's declared as a component within a
pipeline and the factory is responsible to make sure the next consumer (either a
processor or exporter) in the pipeline is valid otherwise it should generate an
error.</p>
<p>The Collector's API provides some standard error types to help the factory
handle pipeline configurations. Your receiver factory should throw a
<code>component.ErrNilNextConsumer</code> in case the next consumer has an issue and is
passed as nil.</p>
<p>The <code>createTracesReceiver()</code> function will need a guard clause to make that
validation.</p>
<p>You will also need variables to properly initialize the <code>config</code> and the
<code>logger</code> fields of the <code>tailtracerReceiver</code> instance.</p>
<p>Here is what the <code>factory.go</code> file looks like with the updated
<code>createTracesReceiver()</code> function:</p>
<blockquote>
<p>factory.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span>
<span class="normal"><a href="#__codelineno-32-14">14</a></span>
<span class="normal"><a href="#__codelineno-32-15">15</a></span>
<span class="normal"><a href="#__codelineno-32-16">16</a></span>
<span class="normal"><a href="#__codelineno-32-17">17</a></span>
<span class="normal"><a href="#__codelineno-32-18">18</a></span>
<span class="normal"><a href="#__codelineno-32-19">19</a></span>
<span class="normal"><a href="#__codelineno-32-20">20</a></span>
<span class="normal"><a href="#__codelineno-32-21">21</a></span>
<span class="normal"><a href="#__codelineno-32-22">22</a></span>
<span class="normal"><a href="#__codelineno-32-23">23</a></span>
<span class="normal"><a href="#__codelineno-32-24">24</a></span>
<span class="normal"><a href="#__codelineno-32-25">25</a></span>
<span class="normal"><a href="#__codelineno-32-26">26</a></span>
<span class="normal"><a href="#__codelineno-32-27">27</a></span>
<span class="normal"><a href="#__codelineno-32-28">28</a></span>
<span class="normal"><a href="#__codelineno-32-29">29</a></span>
<span class="normal"><a href="#__codelineno-32-30">30</a></span>
<span class="normal"><a href="#__codelineno-32-31">31</a></span>
<span class="normal"><a href="#__codelineno-32-32">32</a></span>
<span class="normal"><a href="#__codelineno-32-33">33</a></span>
<span class="normal"><a href="#__codelineno-32-34">34</a></span>
<span class="normal"><a href="#__codelineno-32-35">35</a></span>
<span class="normal"><a href="#__codelineno-32-36">36</a></span>
<span class="normal"><a href="#__codelineno-32-37">37</a></span>
<span class="normal"><a href="#__codelineno-32-38">38</a></span>
<span class="normal"><a href="#__codelineno-32-39">39</a></span>
<span class="normal"><a href="#__codelineno-32-40">40</a></span>
<span class="normal"><a href="#__codelineno-32-41">41</a></span>
<span class="normal"><a href="#__codelineno-32-42">42</a></span>
<span class="normal"><a href="#__codelineno-32-43">43</a></span>
<span class="normal"><a href="#__codelineno-32-44">44</a></span>
<span class="normal"><a href="#__codelineno-32-45">45</a></span>
<span class="normal"><a href="#__codelineno-32-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">    </span><span class="s">&quot;context&quot;</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">    </span><span class="s">&quot;time&quot;</span>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/component&quot;</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/consumer&quot;</span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/receiver&quot;</span>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="p">)</span>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="kd">const</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="w">    </span><span class="nx">typeStr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;tailtracer&quot;</span>
<a id="__codelineno-32-14" name="__codelineno-32-14"></a><span class="w">    </span><span class="nx">defaultInterval</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Minute</span>
<a id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="p">)</span>
<a id="__codelineno-32-16" name="__codelineno-32-16"></a>
<a id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="kd">func</span><span class="w"> </span><span class="nx">createDefaultConfig</span><span class="p">()</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Config</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Config</span><span class="p">{</span>
<a id="__codelineno-32-19" name="__codelineno-32-19"></a><span class="w">        </span><span class="nx">Interval</span><span class="p">:</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">defaultInterval</span><span class="p">),</span>
<a id="__codelineno-32-20" name="__codelineno-32-20"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-21" name="__codelineno-32-21"></a><span class="p">}</span>
<a id="__codelineno-32-22" name="__codelineno-32-22"></a>
<a id="__codelineno-32-23" name="__codelineno-32-23"></a><span class="kd">func</span><span class="w"> </span><span class="nx">createTracesReceiver</span><span class="p">(</span><span class="nx">_</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">CreateSettings</span><span class="p">,</span><span class="w"> </span><span class="nx">baseCfg</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Config</span><span class="p">,</span><span class="w"> </span><span class="nx">consumer</span><span class="w"> </span><span class="nx">consumer</span><span class="p">.</span><span class="nx">Traces</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">Traces</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-24" name="__codelineno-32-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">consumer</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-25" name="__codelineno-32-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">ErrNilNextConsumer</span>
<a id="__codelineno-32-26" name="__codelineno-32-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-27" name="__codelineno-32-27"></a>
<a id="__codelineno-32-28" name="__codelineno-32-28"></a><span class="w">    </span><span class="nx">logger</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">params</span><span class="p">.</span><span class="nx">Logger</span>
<a id="__codelineno-32-29" name="__codelineno-32-29"></a><span class="w">    </span><span class="nx">tailtracerCfg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">baseCfg</span><span class="p">.(</span><span class="o">*</span><span class="nx">Config</span><span class="p">)</span>
<a id="__codelineno-32-30" name="__codelineno-32-30"></a>
<a id="__codelineno-32-31" name="__codelineno-32-31"></a><span class="w">    </span><span class="nx">traceRcvr</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">tailtracerReceiver</span><span class="p">{</span>
<a id="__codelineno-32-32" name="__codelineno-32-32"></a><span class="w">        </span><span class="nx">logger</span><span class="p">:</span><span class="w">       </span><span class="nx">logger</span><span class="p">,</span>
<a id="__codelineno-32-33" name="__codelineno-32-33"></a><span class="w">        </span><span class="nx">nextConsumer</span><span class="p">:</span><span class="w"> </span><span class="nx">consumer</span><span class="p">,</span>
<a id="__codelineno-32-34" name="__codelineno-32-34"></a><span class="w">        </span><span class="nx">config</span><span class="p">:</span><span class="w">       </span><span class="nx">tailtracerCfg</span><span class="p">,</span>
<a id="__codelineno-32-35" name="__codelineno-32-35"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-36" name="__codelineno-32-36"></a>
<a id="__codelineno-32-37" name="__codelineno-32-37"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">traceRcvr</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-32-38" name="__codelineno-32-38"></a><span class="p">}</span>
<a id="__codelineno-32-39" name="__codelineno-32-39"></a>
<a id="__codelineno-32-40" name="__codelineno-32-40"></a><span class="c1">// NewFactory creates a factory for tailtracer receiver.</span>
<a id="__codelineno-32-41" name="__codelineno-32-41"></a><span class="kd">func</span><span class="w"> </span><span class="nx">NewFactory</span><span class="p">()</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">Factory</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-42" name="__codelineno-32-42"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">NewFactory</span><span class="p">(</span>
<a id="__codelineno-32-43" name="__codelineno-32-43"></a><span class="w">        </span><span class="nx">typeStr</span><span class="p">,</span>
<a id="__codelineno-32-44" name="__codelineno-32-44"></a><span class="w">        </span><span class="nx">createDefaultConfig</span><span class="p">,</span>
<a id="__codelineno-32-45" name="__codelineno-32-45"></a><span class="w">        </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">WithTraces</span><span class="p">(</span><span class="nx">createTracesReceiver</span><span class="p">,</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">StabilityLevelAlpha</span><span class="p">))</span>
<a id="__codelineno-32-46" name="__codelineno-32-46"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_8">Check your work<a class="headerlink" href="#check-your-work_8" title="Permanent link">&para;</a></h4>
<ul>
<li>Added a guard clause that verifies if the consumer is properly instantiated
  and if not returns the <code>component.ErrNilNextConsumer</code>error.</li>
<li>Added a variable called <code>logger</code> and initialized it with the Collector's
  logger that is available as a field named <code>Logger</code> within the
  <code>receiver.CreateSettings</code> reference.</li>
<li>Added a variable called <code>tailtracerCfg</code> and initialized it by casting the
  <code>component.Config</code> reference to the <code>tailtracer</code> receiver <code>Config</code>.</li>
<li>Added a variable called <code>traceRcvr</code> and initialized it with the
  <code>tailtracerReceiver</code> instance using the factory information stored within
  the variables.</li>
<li>Updated the return statement to now include the <code>traceRcvr</code> instance.</li>
</ul>
</blockquote>
<p>With the factory fully implemented and instantiating the trace receiver
component you are ready to test the receiver as part of a pipeline. Go ahead and
add the <code>tailtracer</code> receiver to your <code>traces</code> pipeline in the <code>config.yaml</code> as
follow:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span>
<span class="normal"><a href="#__codelineno-33-4">4</a></span>
<span class="normal"><a href="#__codelineno-33-5">5</a></span>
<span class="normal"><a href="#__codelineno-33-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="w">  </span><span class="nt">pipelines</span><span class="p">:</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">    </span><span class="nt">traces</span><span class="p">:</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">      </span><span class="nt">receivers</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">otlp</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">tailtracer</span><span class="p p-Indicator">]</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">      </span><span class="nt">processors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="w">      </span><span class="nt">exporters</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">jaeger</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">logging</span><span class="p p-Indicator">]</span>
</code></pre></div></td></tr></table></div>
<p>Here is what the output for running your Collector with <code>otelcol-dev</code> command
should look like after you updated the <code>traces</code> pipeline:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-34-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-34-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-34-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-34-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-34-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-34-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-34-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-34-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-34-10">10</a></span>
<span class="normal"><a href="#__codelineno-34-11">11</a></span>
<span class="normal"><a href="#__codelineno-34-12">12</a></span>
<span class="normal"><a href="#__codelineno-34-13">13</a></span>
<span class="normal"><a href="#__codelineno-34-14">14</a></span>
<span class="normal"><a href="#__codelineno-34-15">15</a></span>
<span class="normal"><a href="#__codelineno-34-16">16</a></span>
<span class="normal"><a href="#__codelineno-34-17">17</a></span>
<span class="normal"><a href="#__codelineno-34-18">18</a></span>
<span class="normal"><a href="#__codelineno-34-19">19</a></span>
<span class="normal"><a href="#__codelineno-34-20">20</a></span>
<span class="normal"><a href="#__codelineno-34-21">21</a></span>
<span class="normal"><a href="#__codelineno-34-22">22</a></span>
<span class="normal"><a href="#__codelineno-34-23">23</a></span>
<span class="normal"><a href="#__codelineno-34-24">24</a></span>
<span class="normal"><a href="#__codelineno-34-25">25</a></span>
<span class="normal"><a href="#__codelineno-34-26">26</a></span>
<span class="normal"><a href="#__codelineno-34-27">27</a></span>
<span class="normal"><a href="#__codelineno-34-28">28</a></span>
<span class="normal"><a href="#__codelineno-34-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="gp">$ </span>./otelcol-dev<span class="w"> </span>--config<span class="w"> </span>config.yaml
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="go">2022-03-03T11:19:50.779-0600    info    service/collector.go:190        Applying configuration...</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="go">2022-03-03T11:19:50.780-0600    info    builder/exporters_builder.go:254        Exporter was built.     {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="go">2022-03-03T11:19:50.780-0600    info    builder/exporters_builder.go:254        Exporter was built.     {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}</span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="go">2022-03-03T11:19:50.780-0600    info    builder/pipelines_builder.go:222        Pipeline was built.     {&quot;name&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="go">2022-03-03T11:19:50.780-0600    info    builder/receivers_builder.go:224        Receiver was built.     {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;, &quot;datatype&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="go">2022-03-03T11:19:50.780-0600    info    builder/receivers_builder.go:224        Receiver was built.     {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;, &quot;datatype&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="go">2022-03-03T11:19:50.780-0600    info    service/service.go:86   Starting extensions...</span>
<a id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="go">2022-03-03T11:19:50.780-0600    info    service/service.go:91   Starting exporters...</span>
<a id="__codelineno-34-10" name="__codelineno-34-10"></a><span class="go">2022-03-03T11:19:50.780-0600    info    builder/exporters_builder.go:40 Exporter is starting... {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}</span>
<a id="__codelineno-34-11" name="__codelineno-34-11"></a><span class="go">2022-03-03T11:19:50.781-0600    info    builder/exporters_builder.go:48 Exporter started.       {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}</span>
<a id="__codelineno-34-12" name="__codelineno-34-12"></a><span class="go">2022-03-03T11:19:50.781-0600    info    jaegerexporter@v0.41.0/exporter.go:186  State of the connection with the Jaeger Collector backend       {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;, &quot;state&quot;: &quot;IDLE&quot;}</span>
<a id="__codelineno-34-13" name="__codelineno-34-13"></a><span class="go">2022-03-03T11:19:50.781-0600    info    builder/exporters_builder.go:40 Exporter is starting... {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}</span>
<a id="__codelineno-34-14" name="__codelineno-34-14"></a><span class="go">2022-03-03T11:19:50.781-0600    info    builder/exporters_builder.go:48 Exporter started.       {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}</span>
<a id="__codelineno-34-15" name="__codelineno-34-15"></a><span class="go">2022-03-03T11:19:50.781-0600    info    service/service.go:96   Starting processors...</span>
<a id="__codelineno-34-16" name="__codelineno-34-16"></a><span class="go">2022-03-03T11:19:50.781-0600    info    builder/pipelines_builder.go:54 Pipeline is starting... {&quot;name&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-34-17" name="__codelineno-34-17"></a><span class="go">2022-03-03T11:19:50.781-0600    info    builder/pipelines_builder.go:65 Pipeline is started.    {&quot;name&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}</span>
<a id="__codelineno-34-18" name="__codelineno-34-18"></a><span class="go">2022-03-03T11:19:50.781-0600    info    service/service.go:101  Starting receivers...</span>
<a id="__codelineno-34-19" name="__codelineno-34-19"></a><span class="go">2022-03-03T11:19:50.781-0600    info    builder/receivers_builder.go:68 Receiver is starting... {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;}</span>
<a id="__codelineno-34-20" name="__codelineno-34-20"></a><span class="go">2022-03-03T11:19:50.781-0600    info    otlpreceiver/otlp.go:69 Starting GRPC server on endpoint localhost:55680        {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;}</span>
<a id="__codelineno-34-21" name="__codelineno-34-21"></a><span class="go">2022-03-03T11:19:50.783-0600    info    builder/receivers_builder.go:73 Receiver started.       {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;}</span>
<a id="__codelineno-34-22" name="__codelineno-34-22"></a><span class="go">2022-03-03T11:19:50.783-0600    info    builder/receivers_builder.go:68 Receiver is starting... {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;}</span>
<a id="__codelineno-34-23" name="__codelineno-34-23"></a><span class="go">2022-03-03T11:19:50.783-0600    info    builder/receivers_builder.go:73 Receiver started.       {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;}</span>
<a id="__codelineno-34-24" name="__codelineno-34-24"></a><span class="go">2022-03-03T11:19:50.783-0600    info    service/telemetry.go:92 Setting up own telemetry...</span>
<a id="__codelineno-34-25" name="__codelineno-34-25"></a><span class="go">2022-03-03T11:19:50.788-0600    info    service/telemetry.go:116        Serving Prometheus metrics      {&quot;address&quot;: &quot;:8888&quot;, &quot;level&quot;: &quot;basic&quot;, &quot;service.instance.id&quot;: &quot;0ca4907c-6fda-4fe1-b0e9-b73d789354a4&quot;, &quot;service.version&quot;: &quot;latest&quot;}</span>
<a id="__codelineno-34-26" name="__codelineno-34-26"></a><span class="go">2022-03-03T11:19:50.788-0600    info    service/collector.go:239        Starting otelcol-dev... {&quot;Version&quot;: &quot;1.0.0&quot;, &quot;NumCPU&quot;: 12}</span>
<a id="__codelineno-34-27" name="__codelineno-34-27"></a><span class="go">2022-03-03T11:19:50.788-0600    info    service/collector.go:135        Everything is ready. Begin running and processing data.</span>
<a id="__codelineno-34-28" name="__codelineno-34-28"></a><span class="go">2022-03-21T15:19:51.717-0500    info    jaegerexporter@v0.46.0/exporter.go:186  State of the connection with the Jaeger Collector backend   {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;, &quot;state&quot;: &quot;READY&quot;}</span>
<a id="__codelineno-34-29" name="__codelineno-34-29"></a><span class="go">2022-03-03T11:20:51.783-0600    info    tailtracer/trace-receiver.go:23  I should start processing traces now!   {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;}</span>
</code></pre></div></td></tr></table></div>
<p>Look for the log line for "builder/receivers_builder.go:68 Receiver is
starting... {"kind": "receiver", "name": "tailtracer"}", you can see that the
Collector found the settings for the <code>tailtracer</code> receiver within the <code>traces</code>
pipeline and is now instantiating it and starting it given that 1 minute after
the Collector has started, you can see the info line we added to the <code>ticker</code>
function within the <code>Start()</code> method.</p>
<p>Now, go ahead and press <kbd>Ctrl + C</kbd> in your Collector's terminal so you
want watch the shutdown process happening. Here is what the output should look
like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a>^C2022-03-03T11:20:14.652-0600  info    service/collector.go:166        Received signal from OS {&quot;signal&quot;: &quot;interrupt&quot;}
<a id="__codelineno-35-2" name="__codelineno-35-2"></a>2022-03-03T11:20:14.652-0600    info    service/collector.go:255        Starting shutdown...
<a id="__codelineno-35-3" name="__codelineno-35-3"></a>2022-03-03T11:20:14.652-0600    info    service/service.go:121  Stopping receivers...
<a id="__codelineno-35-4" name="__codelineno-35-4"></a>2022-03-03T11:20:14.653-0600    info    tailtracer/trace-receiver.go:29  I am done and ready to shutdown!        {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;}
<a id="__codelineno-35-5" name="__codelineno-35-5"></a>2022-03-03T11:20:14.653-0600    info    service/service.go:126  Stopping processors...
<a id="__codelineno-35-6" name="__codelineno-35-6"></a>2022-03-03T11:20:14.653-0600    info    builder/pipelines_builder.go:73 Pipeline is shutting down...    {&quot;name&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}
<a id="__codelineno-35-7" name="__codelineno-35-7"></a>2022-03-03T11:20:14.653-0600    info    builder/pipelines_builder.go:77 Pipeline is shutdown.   {&quot;name&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}
<a id="__codelineno-35-8" name="__codelineno-35-8"></a>2022-03-03T11:20:14.653-0600    info    service/service.go:131  Stopping exporters...
<a id="__codelineno-35-9" name="__codelineno-35-9"></a>2022-03-03T11:20:14.653-0600    info    service/service.go:136  Stopping extensions...
<a id="__codelineno-35-10" name="__codelineno-35-10"></a>2022-03-03T11:20:14.653-0600    info    service/collector.go:273        Shutdown complete.
</code></pre></div></td></tr></table></div>
<p>As you can see there is an info log line for the <code>tailtracer</code> receiver which
means the component is responding correctly to the <code>Shutdown()</code> event. In the
next section you will learn more about the OpenTelemetry Trace data model so the
<code>tailtracer</code> receiver can finally generate traces!</p>
<h2 id="the-collectors-trace-data-model">The Collector's Trace Data Model<a class="headerlink" href="#the-collectors-trace-data-model" title="Permanent link">&para;</a></h2>
<p>You might be familiar with OpenTelemetry traces by using the SDKs and
instrumenting an application so you can see and evaluate your traces within a
distributed tracing backend like Jaeger.</p>
<p>Here is what a trace looks like in Jaeger:</p>
<p><img alt="Jaeger trace" src="/img/docs/tutorials/Jaeger.jpeg" /></p>
<p>Granted, this is a Jaeger trace, but it was generated by a trace pipeline within
the Collector, therefore you can use it to learn a few things about the OTel
trace data model :</p>
<ul>
<li>A trace is made of one or multiple spans structured within a hierarchy to
  represent dependencies.</li>
<li>The spans can represent operations within a service and/or across services.</li>
</ul>
<p>Creating a trace within the trace receiver will be slightly different than the
way you would do it with the SDKs, so let's start reviewing the high level
concepts.</p>
<h3 id="working-with-resources">Working with Resources<a class="headerlink" href="#working-with-resources" title="Permanent link">&para;</a></h3>
<p>In the OTel world, all telemetry is generated by a <code>Resource</code>, here is the
definition according to the <a href="/docs/specs/otel/resource/sdk">OTel spec</a>:</p>
<blockquote>
<p>A <code>Resource</code> is an immutable representation of the entity producing telemetry
as Attributes. For example, a process producing telemetry that is running in a
container on Kubernetes has a Pod name, it is in a namespace and possibly is
part of a Deployment which also has a name. All three of these attributes can
be included in the <code>Resource</code>.</p>
</blockquote>
<p>Traces are most commonly used to represent a service request (the Services
entity described by Jaeger's model), which are normally implemented as processes
running in a compute unit, but OTel's API approach to describe a <code>Resource</code>
through attributes is flexible enough to represent any entity that you may
require like ATMs, IoT sensors, the sky is the limit.</p>
<p>So it's safe to say that for a trace to exist, a <code>Resource</code> will have to start
it.</p>
<p>In this tutorial we will simulate a system that has telemetry that demonstrate
ATMs located in 2 different states (eg: Illinois and California) accessing the
Account's backend system to execute balance, deposit and withdraw operations,
therefore we will have to implement code to create the <code>Resource</code> types
representing the ATM and the backend system.</p>
<p>Go ahead and create a file named <code>model.go</code> inside the <code>tailtracer</code> folder</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="nb">cd</span><span class="w"> </span>tailtracer
<a id="__codelineno-36-2" name="__codelineno-36-2"></a>touch<span class="w"> </span>model.go
</code></pre></div></td></tr></table></div>
<p>Now, within the <code>model.go</code> file, add the definition for the <code>Atm</code> and the
<code>BackendSystem</code> types as follow:</p>
<blockquote>
<p>model.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-37-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-37-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-37-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-37-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-37-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-37-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-37-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-37-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-37-10">10</a></span>
<span class="normal"><a href="#__codelineno-37-11">11</a></span>
<span class="normal"><a href="#__codelineno-37-12">12</a></span>
<span class="normal"><a href="#__codelineno-37-13">13</a></span>
<span class="normal"><a href="#__codelineno-37-14">14</a></span>
<span class="normal"><a href="#__codelineno-37-15">15</a></span>
<span class="normal"><a href="#__codelineno-37-16">16</a></span>
<span class="normal"><a href="#__codelineno-37-17">17</a></span>
<span class="normal"><a href="#__codelineno-37-18">18</a></span>
<span class="normal"><a href="#__codelineno-37-19">19</a></span>
<span class="normal"><a href="#__codelineno-37-20">20</a></span>
<span class="normal"><a href="#__codelineno-37-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="kd">type</span><span class="w"> </span><span class="nx">Atm</span><span class="w"> </span><span class="kd">struct</span><span class="p">{</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">    </span><span class="nx">ID</span><span class="w">           </span><span class="kt">int64</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">    </span><span class="nx">Version</span><span class="w">      </span><span class="kt">string</span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">    </span><span class="nx">Name</span><span class="w">         </span><span class="kt">string</span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="w">    </span><span class="nx">StateID</span><span class="w">      </span><span class="kt">string</span>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="w">    </span><span class="nx">SerialNumber</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="w">    </span><span class="nx">ISPNetwork</span><span class="w">   </span><span class="kt">string</span>
<a id="__codelineno-37-10" name="__codelineno-37-10"></a><span class="p">}</span>
<a id="__codelineno-37-11" name="__codelineno-37-11"></a>
<a id="__codelineno-37-12" name="__codelineno-37-12"></a><span class="kd">type</span><span class="w"> </span><span class="nx">BackendSystem</span><span class="w"> </span><span class="kd">struct</span><span class="p">{</span>
<a id="__codelineno-37-13" name="__codelineno-37-13"></a><span class="w">    </span><span class="nx">Version</span><span class="w">       </span><span class="kt">string</span>
<a id="__codelineno-37-14" name="__codelineno-37-14"></a><span class="w">    </span><span class="nx">ProcessName</span><span class="w">   </span><span class="kt">string</span>
<a id="__codelineno-37-15" name="__codelineno-37-15"></a><span class="w">    </span><span class="nx">OSType</span><span class="w">        </span><span class="kt">string</span>
<a id="__codelineno-37-16" name="__codelineno-37-16"></a><span class="w">    </span><span class="nx">OSVersion</span><span class="w">     </span><span class="kt">string</span>
<a id="__codelineno-37-17" name="__codelineno-37-17"></a><span class="w">    </span><span class="nx">CloudProvider</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-37-18" name="__codelineno-37-18"></a><span class="w">    </span><span class="nx">CloudRegion</span><span class="w">   </span><span class="kt">string</span>
<a id="__codelineno-37-19" name="__codelineno-37-19"></a><span class="w">    </span><span class="nx">ServiceName</span><span class="w">   </span><span class="kt">string</span>
<a id="__codelineno-37-20" name="__codelineno-37-20"></a><span class="w">    </span><span class="nx">Endpoint</span><span class="w">      </span><span class="kt">string</span>
<a id="__codelineno-37-21" name="__codelineno-37-21"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>These types are meant to represent the entities as they are within the system
being observed and they contain information that would be quite meaningful to be
added to the traces as part of the <code>Resource</code> definition. You will add some
helper functions to generate the instances of those types.</p>
<p>Here is what the <code>model.go</code> file will look with the helper functions:</p>
<blockquote>
<p>model.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-38-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-38-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-38-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-38-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-38-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-38-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-38-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-38-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-38-10">10</a></span>
<span class="normal"><a href="#__codelineno-38-11">11</a></span>
<span class="normal"><a href="#__codelineno-38-12">12</a></span>
<span class="normal"><a href="#__codelineno-38-13">13</a></span>
<span class="normal"><a href="#__codelineno-38-14">14</a></span>
<span class="normal"><a href="#__codelineno-38-15">15</a></span>
<span class="normal"><a href="#__codelineno-38-16">16</a></span>
<span class="normal"><a href="#__codelineno-38-17">17</a></span>
<span class="normal"><a href="#__codelineno-38-18">18</a></span>
<span class="normal"><a href="#__codelineno-38-19">19</a></span>
<span class="normal"><a href="#__codelineno-38-20">20</a></span>
<span class="normal"><a href="#__codelineno-38-21">21</a></span>
<span class="normal"><a href="#__codelineno-38-22">22</a></span>
<span class="normal"><a href="#__codelineno-38-23">23</a></span>
<span class="normal"><a href="#__codelineno-38-24">24</a></span>
<span class="normal"><a href="#__codelineno-38-25">25</a></span>
<span class="normal"><a href="#__codelineno-38-26">26</a></span>
<span class="normal"><a href="#__codelineno-38-27">27</a></span>
<span class="normal"><a href="#__codelineno-38-28">28</a></span>
<span class="normal"><a href="#__codelineno-38-29">29</a></span>
<span class="normal"><a href="#__codelineno-38-30">30</a></span>
<span class="normal"><a href="#__codelineno-38-31">31</a></span>
<span class="normal"><a href="#__codelineno-38-32">32</a></span>
<span class="normal"><a href="#__codelineno-38-33">33</a></span>
<span class="normal"><a href="#__codelineno-38-34">34</a></span>
<span class="normal"><a href="#__codelineno-38-35">35</a></span>
<span class="normal"><a href="#__codelineno-38-36">36</a></span>
<span class="normal"><a href="#__codelineno-38-37">37</a></span>
<span class="normal"><a href="#__codelineno-38-38">38</a></span>
<span class="normal"><a href="#__codelineno-38-39">39</a></span>
<span class="normal"><a href="#__codelineno-38-40">40</a></span>
<span class="normal"><a href="#__codelineno-38-41">41</a></span>
<span class="normal"><a href="#__codelineno-38-42">42</a></span>
<span class="normal"><a href="#__codelineno-38-43">43</a></span>
<span class="normal"><a href="#__codelineno-38-44">44</a></span>
<span class="normal"><a href="#__codelineno-38-45">45</a></span>
<span class="normal"><a href="#__codelineno-38-46">46</a></span>
<span class="normal"><a href="#__codelineno-38-47">47</a></span>
<span class="normal"><a href="#__codelineno-38-48">48</a></span>
<span class="normal"><a href="#__codelineno-38-49">49</a></span>
<span class="normal"><a href="#__codelineno-38-50">50</a></span>
<span class="normal"><a href="#__codelineno-38-51">51</a></span>
<span class="normal"><a href="#__codelineno-38-52">52</a></span>
<span class="normal"><a href="#__codelineno-38-53">53</a></span>
<span class="normal"><a href="#__codelineno-38-54">54</a></span>
<span class="normal"><a href="#__codelineno-38-55">55</a></span>
<span class="normal"><a href="#__codelineno-38-56">56</a></span>
<span class="normal"><a href="#__codelineno-38-57">57</a></span>
<span class="normal"><a href="#__codelineno-38-58">58</a></span>
<span class="normal"><a href="#__codelineno-38-59">59</a></span>
<span class="normal"><a href="#__codelineno-38-60">60</a></span>
<span class="normal"><a href="#__codelineno-38-61">61</a></span>
<span class="normal"><a href="#__codelineno-38-62">62</a></span>
<span class="normal"><a href="#__codelineno-38-63">63</a></span>
<span class="normal"><a href="#__codelineno-38-64">64</a></span>
<span class="normal"><a href="#__codelineno-38-65">65</a></span>
<span class="normal"><a href="#__codelineno-38-66">66</a></span>
<span class="normal"><a href="#__codelineno-38-67">67</a></span>
<span class="normal"><a href="#__codelineno-38-68">68</a></span>
<span class="normal"><a href="#__codelineno-38-69">69</a></span>
<span class="normal"><a href="#__codelineno-38-70">70</a></span>
<span class="normal"><a href="#__codelineno-38-71">71</a></span>
<span class="normal"><a href="#__codelineno-38-72">72</a></span>
<span class="normal"><a href="#__codelineno-38-73">73</a></span>
<span class="normal"><a href="#__codelineno-38-74">74</a></span>
<span class="normal"><a href="#__codelineno-38-75">75</a></span>
<span class="normal"><a href="#__codelineno-38-76">76</a></span>
<span class="normal"><a href="#__codelineno-38-77">77</a></span>
<span class="normal"><a href="#__codelineno-38-78">78</a></span>
<span class="normal"><a href="#__codelineno-38-79">79</a></span>
<span class="normal"><a href="#__codelineno-38-80">80</a></span>
<span class="normal"><a href="#__codelineno-38-81">81</a></span>
<span class="normal"><a href="#__codelineno-38-82">82</a></span>
<span class="normal"><a href="#__codelineno-38-83">83</a></span>
<span class="normal"><a href="#__codelineno-38-84">84</a></span>
<span class="normal"><a href="#__codelineno-38-85">85</a></span>
<span class="normal"><a href="#__codelineno-38-86">86</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">    </span><span class="s">&quot;math/rand&quot;</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">    </span><span class="s">&quot;time&quot;</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="p">)</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="kd">type</span><span class="w"> </span><span class="nx">Atm</span><span class="w"> </span><span class="kd">struct</span><span class="p">{</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="w">    </span><span class="nx">ID</span><span class="w">           </span><span class="kt">int64</span>
<a id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="w">    </span><span class="nx">Version</span><span class="w">      </span><span class="kt">string</span>
<a id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="w">    </span><span class="nx">Name</span><span class="w">         </span><span class="kt">string</span>
<a id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="w">    </span><span class="nx">StateID</span><span class="w">      </span><span class="kt">string</span>
<a id="__codelineno-38-13" name="__codelineno-38-13"></a><span class="w">    </span><span class="nx">SerialNumber</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-38-14" name="__codelineno-38-14"></a><span class="w">    </span><span class="nx">ISPNetwork</span><span class="w">   </span><span class="kt">string</span>
<a id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="p">}</span>
<a id="__codelineno-38-16" name="__codelineno-38-16"></a>
<a id="__codelineno-38-17" name="__codelineno-38-17"></a><span class="kd">type</span><span class="w"> </span><span class="nx">BackendSystem</span><span class="w"> </span><span class="kd">struct</span><span class="p">{</span>
<a id="__codelineno-38-18" name="__codelineno-38-18"></a><span class="w">    </span><span class="nx">Version</span><span class="w">       </span><span class="kt">string</span>
<a id="__codelineno-38-19" name="__codelineno-38-19"></a><span class="w">    </span><span class="nx">ProcessName</span><span class="w">   </span><span class="kt">string</span>
<a id="__codelineno-38-20" name="__codelineno-38-20"></a><span class="w">    </span><span class="nx">OSType</span><span class="w">        </span><span class="kt">string</span>
<a id="__codelineno-38-21" name="__codelineno-38-21"></a><span class="w">    </span><span class="nx">OSVersion</span><span class="w">     </span><span class="kt">string</span>
<a id="__codelineno-38-22" name="__codelineno-38-22"></a><span class="w">    </span><span class="nx">CloudProvider</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-38-23" name="__codelineno-38-23"></a><span class="w">    </span><span class="nx">CloudRegion</span><span class="w">   </span><span class="kt">string</span>
<a id="__codelineno-38-24" name="__codelineno-38-24"></a><span class="w">    </span><span class="nx">Endpoint</span><span class="w">      </span><span class="kt">string</span>
<a id="__codelineno-38-25" name="__codelineno-38-25"></a><span class="p">}</span>
<a id="__codelineno-38-26" name="__codelineno-38-26"></a>
<a id="__codelineno-38-27" name="__codelineno-38-27"></a><span class="kd">func</span><span class="w"> </span><span class="nx">generateAtm</span><span class="p">()</span><span class="w"> </span><span class="nx">Atm</span><span class="p">{</span>
<a id="__codelineno-38-28" name="__codelineno-38-28"></a><span class="w">    </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">getRandomNumber</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-38-29" name="__codelineno-38-29"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">newAtm</span><span class="w"> </span><span class="nx">Atm</span>
<a id="__codelineno-38-30" name="__codelineno-38-30"></a>
<a id="__codelineno-38-31" name="__codelineno-38-31"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-32" name="__codelineno-38-32"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-38-33" name="__codelineno-38-33"></a><span class="w">            </span><span class="nx">newAtm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Atm</span><span class="p">{</span>
<a id="__codelineno-38-34" name="__codelineno-38-34"></a><span class="w">                </span><span class="nx">ID</span><span class="p">:</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span>
<a id="__codelineno-38-35" name="__codelineno-38-35"></a><span class="w">                </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ATM-111-IL&quot;</span><span class="p">,</span>
<a id="__codelineno-38-36" name="__codelineno-38-36"></a><span class="w">                </span><span class="nx">SerialNumber</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;atmxph-2022-111&quot;</span><span class="p">,</span>
<a id="__codelineno-38-37" name="__codelineno-38-37"></a><span class="w">                </span><span class="nx">Version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1.0&quot;</span><span class="p">,</span>
<a id="__codelineno-38-38" name="__codelineno-38-38"></a><span class="w">                </span><span class="nx">ISPNetwork</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comcast-chicago&quot;</span><span class="p">,</span>
<a id="__codelineno-38-39" name="__codelineno-38-39"></a><span class="w">                </span><span class="nx">StateID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;IL&quot;</span><span class="p">,</span>
<a id="__codelineno-38-40" name="__codelineno-38-40"></a>
<a id="__codelineno-38-41" name="__codelineno-38-41"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-38-42" name="__codelineno-38-42"></a>
<a id="__codelineno-38-43" name="__codelineno-38-43"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-38-44" name="__codelineno-38-44"></a><span class="w">            </span><span class="nx">newAtm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">Atm</span><span class="p">{</span>
<a id="__codelineno-38-45" name="__codelineno-38-45"></a><span class="w">                </span><span class="nx">ID</span><span class="p">:</span><span class="w"> </span><span class="mi">222</span><span class="p">,</span>
<a id="__codelineno-38-46" name="__codelineno-38-46"></a><span class="w">                </span><span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ATM-222-CA&quot;</span><span class="p">,</span>
<a id="__codelineno-38-47" name="__codelineno-38-47"></a><span class="w">                </span><span class="nx">SerialNumber</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;atmxph-2022-222&quot;</span><span class="p">,</span>
<a id="__codelineno-38-48" name="__codelineno-38-48"></a><span class="w">                </span><span class="nx">Version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1.0&quot;</span><span class="p">,</span>
<a id="__codelineno-38-49" name="__codelineno-38-49"></a><span class="w">                </span><span class="nx">ISPNetwork</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comcast-sanfrancisco&quot;</span><span class="p">,</span>
<a id="__codelineno-38-50" name="__codelineno-38-50"></a><span class="w">                </span><span class="nx">StateID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CA&quot;</span><span class="p">,</span>
<a id="__codelineno-38-51" name="__codelineno-38-51"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-38-52" name="__codelineno-38-52"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-38-53" name="__codelineno-38-53"></a>
<a id="__codelineno-38-54" name="__codelineno-38-54"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">newAtm</span>
<a id="__codelineno-38-55" name="__codelineno-38-55"></a><span class="p">}</span>
<a id="__codelineno-38-56" name="__codelineno-38-56"></a>
<a id="__codelineno-38-57" name="__codelineno-38-57"></a><span class="kd">func</span><span class="w"> </span><span class="nx">generateBackendSystem</span><span class="p">()</span><span class="w"> </span><span class="nx">BackendSystem</span><span class="p">{</span>
<a id="__codelineno-38-58" name="__codelineno-38-58"></a><span class="w">    </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">getRandomNumber</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-38-59" name="__codelineno-38-59"></a>
<a id="__codelineno-38-60" name="__codelineno-38-60"></a><span class="w">    </span><span class="nx">newBackend</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">BackendSystem</span><span class="p">{</span>
<a id="__codelineno-38-61" name="__codelineno-38-61"></a><span class="w">        </span><span class="nx">ProcessName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;accounts&quot;</span><span class="p">,</span>
<a id="__codelineno-38-62" name="__codelineno-38-62"></a><span class="w">        </span><span class="nx">Version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v2.5&quot;</span><span class="p">,</span>
<a id="__codelineno-38-63" name="__codelineno-38-63"></a><span class="w">        </span><span class="nx">OSType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lnx&quot;</span><span class="p">,</span>
<a id="__codelineno-38-64" name="__codelineno-38-64"></a><span class="w">        </span><span class="nx">OSVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4.16.10-300.fc28.x86_64&quot;</span><span class="p">,</span>
<a id="__codelineno-38-65" name="__codelineno-38-65"></a><span class="w">        </span><span class="nx">CloudProvider</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;amzn&quot;</span><span class="p">,</span>
<a id="__codelineno-38-66" name="__codelineno-38-66"></a><span class="w">        </span><span class="nx">CloudRegion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;us-east-2&quot;</span><span class="p">,</span>
<a id="__codelineno-38-67" name="__codelineno-38-67"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-38-68" name="__codelineno-38-68"></a>
<a id="__codelineno-38-69" name="__codelineno-38-69"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-70" name="__codelineno-38-70"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-38-71" name="__codelineno-38-71"></a><span class="w">            </span><span class="nx">newBackend</span><span class="p">.</span><span class="nx">Endpoint</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;api/v2.5/balance&quot;</span>
<a id="__codelineno-38-72" name="__codelineno-38-72"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-38-73" name="__codelineno-38-73"></a><span class="w">            </span><span class="nx">newBackend</span><span class="p">.</span><span class="nx">Endpoint</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;api/v2.5/deposit&quot;</span>
<a id="__codelineno-38-74" name="__codelineno-38-74"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-38-75" name="__codelineno-38-75"></a><span class="w">            </span><span class="nx">newBackend</span><span class="p">.</span><span class="nx">Endpoint</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;api/v2.5/withdrawn&quot;</span>
<a id="__codelineno-38-76" name="__codelineno-38-76"></a>
<a id="__codelineno-38-77" name="__codelineno-38-77"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-38-78" name="__codelineno-38-78"></a>
<a id="__codelineno-38-79" name="__codelineno-38-79"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">newBackend</span>
<a id="__codelineno-38-80" name="__codelineno-38-80"></a><span class="p">}</span>
<a id="__codelineno-38-81" name="__codelineno-38-81"></a>
<a id="__codelineno-38-82" name="__codelineno-38-82"></a><span class="kd">func</span><span class="w"> </span><span class="nx">getRandomNumber</span><span class="p">(</span><span class="nx">min</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">max</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-83" name="__codelineno-38-83"></a><span class="w">    </span><span class="nx">rand</span><span class="p">.</span><span class="nx">Seed</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">().</span><span class="nx">UnixNano</span><span class="p">())</span>
<a id="__codelineno-38-84" name="__codelineno-38-84"></a><span class="w">    </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nx">Intn</span><span class="p">(</span><span class="nx">max</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">min</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">min</span><span class="p">)</span>
<a id="__codelineno-38-85" name="__codelineno-38-85"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">i</span>
<a id="__codelineno-38-86" name="__codelineno-38-86"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_9">Check your work<a class="headerlink" href="#check-your-work_9" title="Permanent link">&para;</a></h4>
<ul>
<li>Imported the <code>math/rand</code> and <code>time</code> packages to support the implementation
  of the <code>generateRandomNumber</code> function</li>
<li>Added the <code>generateAtm</code> function that instantiates an <code>Atm</code> type and
  randomly assign either Illinois or California as values for <code>StateID</code> and
  the equivalent value for <code>ISPNetwork</code></li>
<li>Added the <code>generateBackendSystem</code> function that instantiates a
  <code>BackendSystem</code>type and randomly assign service endpoint values for the
  <code>Endpoint</code> field</li>
<li>Added the <code>generateRandomNumber</code> function to help generating random numbers
  between a desired range.</li>
</ul>
</blockquote>
<p>Now that you have the functions to generate object instances representing the
entities generating telemetry, you are ready to represent those entities in the
OTel Collector world.</p>
<p>The Collector's API provides a package named <code>ptrace</code> (nested under the <code>pdata</code>
package) with all the types, interfaces and helper functions required to work
with traces within the Collector's pipeline components.</p>
<p>Open the <code>tailtracer/model.go</code> file and add
<code>go.opentelemetry.io/collector/pdata/ptrace</code> to the <code>import</code> clause so you can
have access to the <code>ptrace</code> package capabilities.</p>
<p>Before you can define a <code>Resource</code>, you need to create a <code>ptrace.Traces</code> that
will be responsible to propagate the traces through the Collector's pipeline and
you can use the helper function <code>ptrace.NewTraces()</code> to instantiate it. You will
also need to create instances of the <code>Atm</code> and <code>BackendSystem</code> types so you can
have data to represent the telemetry sources involved in your trace.</p>
<p>Open the <code>tailtracer/model.go</code> file and add the following function to it:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-39-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-39-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-39-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-39-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-39-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-39-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-39-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-39-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-39-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">generateTraces</span><span class="p">(</span><span class="nx">numberOfTraces</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">Traces</span><span class="p">{</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="w">    </span><span class="nx">traces</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">NewTraces</span><span class="p">()</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">numberOfTraces</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">{</span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">        </span><span class="nx">newAtm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">generateAtm</span><span class="p">()</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">        </span><span class="nx">newBackendSystem</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">generateBackendSystem</span><span class="p">()</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">traces</span>
<a id="__codelineno-39-10" name="__codelineno-39-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>By now you have heard and read enough about how traces are made up of Spans. You
have probably also written some instrumentation code using the SDK's functions
and types available to create them, but what you probably didn't know, is that
within the Collector's API, that there are other types of "spans" involved in
creating a trace.</p>
<p>You will start with a type called <code>ptrace.ResourceSpans</code> which represents the
resource and all the operations that it either originated or received while
participating in a trace. You can find its definition within the
<a href="https://github.com/open-telemetry/opentelemetry-collector/blob/{{%
param collectorVersion %}}/pdata/internal/data/protogen/trace/v1/trace.pb.go">/pdata/internal/data/protogen/trace/v1/trace.pb.go</a>.</p>
<p><code>ptrace.Traces</code> has a method named <code>ResourceSpans()</code> which returns an instance
of a helper type called <code>ptrace.ResourceSpansSlice</code>. The
<code>ptrace.ResourceSpansSlice</code> type has methods to help you handle the array of
<code>ptrace.ResourceSpans</code> that will contain as many items as the number of
<code>Resource</code> entities participating in the request represented by the trace.</p>
<p><code>ptrace.ResourceSpansSlice</code> has a method named <code>AppendEmpty()</code> that adds a new
<code>ptrace.ResourceSpan</code> to the array and return its reference.</p>
<p>Once you have an instance of a <code>ptrace.ResourceSpan</code> you will use a method named
<code>Resource()</code> which will return the instance of the <code>pcommon.Resource</code> associated
with the <code>ResourceSpan</code>.</p>
<p>Update the <code>generateTrace()</code> function with the following changes:</p>
<ul>
<li>add a variable named <code>resourceSpan</code> to represent the <code>ResourceSpan</code></li>
<li>add a variable named <code>atmResource</code> to represent the <code>pcommon.Resource</code>
  associated with the <code>ResourceSpan</code>.</li>
<li>Use the methods mentioned above to initialize both variables respectively.</li>
</ul>
<p>Here is what the function should look like after you implemented these changes:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">generateTraces</span><span class="p">(</span><span class="nx">numberOfTraces</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">Traces</span><span class="p">{</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">    </span><span class="nx">traces</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">NewTraces</span><span class="p">()</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">numberOfTraces</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">{</span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">        </span><span class="nx">newAtm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">generateAtm</span><span class="p">()</span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">        </span><span class="nx">newBackendSystem</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">generateBackendSystem</span><span class="p">()</span>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">        </span><span class="nx">resourceSpan</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">traces</span><span class="p">.</span><span class="nx">ResourceSpans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">        </span><span class="nx">atmResource</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">resourceSpan</span><span class="p">.</span><span class="nx">Resource</span><span class="p">()</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a>
<a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">traces</span>
<a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_10">Check your work<a class="headerlink" href="#check-your-work_10" title="Permanent link">&para;</a></h4>
<ul>
<li>Added the <code>resourceSpan</code> variable and initialized it with the <code>ResourceSpan</code>
  reference returned by the <code>traces.ResourceSpans().AppendEmpty()</code> call</li>
<li>Added the <code>atmResource</code> variable and initialized it with the
  <code>pcommon.Resource</code> reference returned by the <code>resourceSpan.Resource()</code> call</li>
</ul>
</blockquote>
<h3 id="describing-resources-through-attributes">Describing Resources through attributes<a class="headerlink" href="#describing-resources-through-attributes" title="Permanent link">&para;</a></h3>
<p>The Collector's API provides a package named <code>pcommon</code> (nested under the <code>pdata</code>
package) with all the types and helper functions required to describe a
<code>Resource</code>.</p>
<p>In the Collector's world, a <code>Resource</code> is described by attributes in a key/value
pair format represented by the <code>pcommon.Map</code> type.</p>
<p>You can check the definition of the <code>pcommon.Map</code> type and the related helper
functions to create attribute values using the supported formats in the
<a href="https://github.com/open-telemetry/opentelemetry-collector/blob/{{%
param collectorVersion %}}/pdata/pcommon/common.go">/pdata/pcommon/common.go</a> file within the Otel
Collector's GitHub project.</p>
<p>Key/value pairs provide a lot of flexibility to help model your <code>Resource</code> data,
so the OTel specification has some guidelines in place to help organize and
minimize the conflicts across all the different types of telemetry generation
entities that it may need to represent.</p>
<p>These guidelines are known as Resource Semantic Conventions and are
<a href="/docs/specs/otel/resource/semantic_conventions/">documented in the OTel specification</a>.</p>
<p>When creating your own attributes to represent your own telemetry generation
entities, you should follow the guideline provided by the specification:</p>
<blockquote>
<p>Attributes are grouped logically by the type of the concept that they
described. Attributes in the same group have a common prefix that ends with a
dot. For example all attributes that describe Kubernetes properties start with
<code>k8s.</code></p>
</blockquote>
<p>Let's start by opening the <code>tailtracer/model.go</code> and adding
<code>go.opentelemetry.io/collector/pdata/pcommon</code> to the <code>import</code> clause so you can
have access to the <code>pcommon</code> package capabilities.</p>
<p>Now go ahead and add a function to read the field values from an <code>Atm</code> instance
and write them as attributes (grouped by the prefix "atm.") into a
<code>pcommon.Resource</code> instance. Here is what the function looks like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span>
<span class="normal"><a href="#__codelineno-41-4">4</a></span>
<span class="normal"><a href="#__codelineno-41-5">5</a></span>
<span class="normal"><a href="#__codelineno-41-6">6</a></span>
<span class="normal"><a href="#__codelineno-41-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">fillResourceWithAtm</span><span class="p">(</span><span class="nx">resource</span><span class="w"> </span><span class="o">*</span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">Resource</span><span class="p">,</span><span class="w"> </span><span class="nx">atm</span><span class="w"> </span><span class="nx">Atm</span><span class="p">){</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="w">   </span><span class="nx">atmAttrs</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">resource</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">()</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">   </span><span class="nx">atmAttrs</span><span class="p">.</span><span class="nx">PutInt</span><span class="p">(</span><span class="s">&quot;atm.id&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">atm</span><span class="p">.</span><span class="nx">ID</span><span class="p">)</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">   </span><span class="nx">atmAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="s">&quot;atm.stateid&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">atm</span><span class="p">.</span><span class="nx">StateID</span><span class="p">)</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">   </span><span class="nx">atmAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="s">&quot;atm.ispnetwork&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">atm</span><span class="p">.</span><span class="nx">ISPNetwork</span><span class="p">)</span>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">   </span><span class="nx">atmAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="s">&quot;atm.serialnumber&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">atm</span><span class="p">.</span><span class="nx">SerialNumber</span><span class="p">)</span>
<a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_11">Check your work<a class="headerlink" href="#check-your-work_11" title="Permanent link">&para;</a></h4>
<ul>
<li>Declared a variable called <code>atmAttrs</code> and initialized it with the
  <code>pcommon.Map</code> reference returned by the <code>resource.Attributes()</code> call</li>
<li>Used the <code>PutInt()</code> and <code>PutStr()</code> methods from <code>pcommon.Map</code> to add int and
  string attributes based on the equivalent <code>Atm</code> field types. Notice that
  because those attributes are very specific and only represent the <code>Atm</code>
  entity, they are all grouped within the "atm." prefix.</li>
</ul>
</blockquote>
<p>The resource semantic conventions also have prescriptive attribute names and
well-known values to represent telemetry generation entities that are common and
applicable across different domains like
<a href="/docs/specs/otel/resource/semantic_conventions/#compute-unit">compute unit</a>,
<a href="/docs/specs/otel/resource/semantic_conventions/#compute-unit">environment</a> and
others.</p>
<p>So, when you look at the <code>BackendSystem</code> entity, it has fields representing
<a href="/docs/specs/otel/resource/semantic_conventions/os/">OS</a> related information and
<a href="/docs/specs/otel/resource/semantic_conventions/cloud/">Cloud</a> related
information, and we will use the attribute names and values prescribed by the
resource semantic convention to represent that information on its <code>Resource</code>.</p>
<p>All the resource semantic convention attribute names and well known-values are
kept within the
<a href="https://github.com/open-telemetry/opentelemetry-collector/blob/{{%
param collectorVersion %}}/semconv/v1.9.0/generated_resource.go">/semconv/v1.9.0/generated_resource.go</a> file within the
Collector's GitHub project.</p>
<p>Let's create a function to read the field values from an <code>BackendSystem</code>
instance and write them as attributes into a <code>pcommon.Resource</code> instance. Open
the <code>tailtracer/model.go</code> file and add the following function:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span>
<span class="normal"><a href="#__codelineno-42-11">11</a></span>
<span class="normal"><a href="#__codelineno-42-12">12</a></span>
<span class="normal"><a href="#__codelineno-42-13">13</a></span>
<span class="normal"><a href="#__codelineno-42-14">14</a></span>
<span class="normal"><a href="#__codelineno-42-15">15</a></span>
<span class="normal"><a href="#__codelineno-42-16">16</a></span>
<span class="normal"><a href="#__codelineno-42-17">17</a></span>
<span class="normal"><a href="#__codelineno-42-18">18</a></span>
<span class="normal"><a href="#__codelineno-42-19">19</a></span>
<span class="normal"><a href="#__codelineno-42-20">20</a></span>
<span class="normal"><a href="#__codelineno-42-21">21</a></span>
<span class="normal"><a href="#__codelineno-42-22">22</a></span>
<span class="normal"><a href="#__codelineno-42-23">23</a></span>
<span class="normal"><a href="#__codelineno-42-24">24</a></span>
<span class="normal"><a href="#__codelineno-42-25">25</a></span>
<span class="normal"><a href="#__codelineno-42-26">26</a></span>
<span class="normal"><a href="#__codelineno-42-27">27</a></span>
<span class="normal"><a href="#__codelineno-42-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">fillResourceWithBackendSystem</span><span class="p">(</span><span class="nx">resource</span><span class="w"> </span><span class="o">*</span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">Resource</span><span class="p">,</span><span class="w"> </span><span class="nx">backend</span><span class="w"> </span><span class="nx">BackendSystem</span><span class="p">){</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="w">    </span><span class="nx">backendAttrs</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">resource</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">()</span>
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">osType</span><span class="p">,</span><span class="w"> </span><span class="nx">cloudProvider</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-42-4" name="__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">CloudProvider</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;amzn&quot;</span><span class="p">:</span>
<a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="w">            </span><span class="nx">cloudProvider</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeCloudProviderAWS</span>
<a id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">OSType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;mcrsft&quot;</span><span class="p">:</span>
<a id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="w">            </span><span class="nx">cloudProvider</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeCloudProviderAzure</span>
<a id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">OSType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;gogl&quot;</span><span class="p">:</span>
<a id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="w">            </span><span class="nx">cloudProvider</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeCloudProviderGCP</span>
<a id="__codelineno-42-12" name="__codelineno-42-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-42-13" name="__codelineno-42-13"></a>
<a id="__codelineno-42-14" name="__codelineno-42-14"></a><span class="w">    </span><span class="nx">backendAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeCloudProvider</span><span class="p">,</span><span class="w"> </span><span class="nx">cloudProvider</span><span class="p">)</span>
<a id="__codelineno-42-15" name="__codelineno-42-15"></a><span class="w">    </span><span class="nx">backendAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeCloudRegion</span><span class="p">,</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">CloudRegion</span><span class="p">)</span>
<a id="__codelineno-42-16" name="__codelineno-42-16"></a>
<a id="__codelineno-42-17" name="__codelineno-42-17"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-18" name="__codelineno-42-18"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">OSType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;lnx&quot;</span><span class="p">:</span>
<a id="__codelineno-42-19" name="__codelineno-42-19"></a><span class="w">            </span><span class="nx">osType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeOSTypeLinux</span>
<a id="__codelineno-42-20" name="__codelineno-42-20"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">OSType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;wndws&quot;</span><span class="p">:</span>
<a id="__codelineno-42-21" name="__codelineno-42-21"></a><span class="w">            </span><span class="nx">osType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeOSTypeWindows</span>
<a id="__codelineno-42-22" name="__codelineno-42-22"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">OSType</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;slrs&quot;</span><span class="p">:</span>
<a id="__codelineno-42-23" name="__codelineno-42-23"></a><span class="w">            </span><span class="nx">osType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeOSTypeSolaris</span>
<a id="__codelineno-42-24" name="__codelineno-42-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-42-25" name="__codelineno-42-25"></a>
<a id="__codelineno-42-26" name="__codelineno-42-26"></a><span class="w">    </span><span class="nx">backendAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeOSType</span><span class="p">,</span><span class="w"> </span><span class="nx">osType</span><span class="p">)</span>
<a id="__codelineno-42-27" name="__codelineno-42-27"></a><span class="w">    </span><span class="nx">backendAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeOSVersion</span><span class="p">,</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">OSVersion</span><span class="p">)</span>
<a id="__codelineno-42-28" name="__codelineno-42-28"></a><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Notice that I didn't add an attribute named "atm.name" or "backendsystem.name"
to the <code>pcommon.Resource</code> representing the <code>Atm</code> and <code>BackendSystem</code> entity
names, that's because most (not to say all) distributed tracing backend systems
that are compatible with the OTel trace specification, interpret the
<code>pcommon.Resource</code> described in a trace as a <code>Service</code>, therefore they expect
the <code>pcommon.Resource</code> to carry a required attribute named <code>service.name</code> as
prescribed by the resource semantic convention.</p>
<p>We will also use non-required attribute named <code>service.version</code> to represent the
version information for both <code>Atm</code> and <code>BackendSystem</code> entities.</p>
<p>Here is what the <code>tailtracer/model.go</code> file looks like after adding the code for
properly assign the "service." group attributes:</p>
<blockquote>
<p>model.go</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">  1</a></span>
<span class="normal"><a href="#__codelineno-43-2">  2</a></span>
<span class="normal"><a href="#__codelineno-43-3">  3</a></span>
<span class="normal"><a href="#__codelineno-43-4">  4</a></span>
<span class="normal"><a href="#__codelineno-43-5">  5</a></span>
<span class="normal"><a href="#__codelineno-43-6">  6</a></span>
<span class="normal"><a href="#__codelineno-43-7">  7</a></span>
<span class="normal"><a href="#__codelineno-43-8">  8</a></span>
<span class="normal"><a href="#__codelineno-43-9">  9</a></span>
<span class="normal"><a href="#__codelineno-43-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-43-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-43-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-43-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-43-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-43-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-43-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-43-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-43-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-43-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-43-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-43-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-43-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-43-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-43-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-43-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-43-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-43-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-43-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-43-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-43-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-43-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-43-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-43-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-43-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-43-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-43-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-43-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-43-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-43-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-43-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-43-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-43-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-43-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-43-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-43-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-43-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-43-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-43-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-43-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-43-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-43-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-43-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-43-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-43-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-43-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-43-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-43-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-43-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-43-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-43-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-43-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-43-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-43-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-43-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-43-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-43-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-43-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-43-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-43-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-43-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-43-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-43-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-43-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-43-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-43-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-43-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-43-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-43-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-43-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-43-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-43-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-43-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-43-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-43-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-43-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-43-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-43-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-43-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-43-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-43-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-43-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-43-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-43-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-43-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-43-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-43-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-43-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-43-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-43-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-43-100">100</a></span>
<span class="normal"><a href="#__codelineno-43-101">101</a></span>
<span class="normal"><a href="#__codelineno-43-102">102</a></span>
<span class="normal"><a href="#__codelineno-43-103">103</a></span>
<span class="normal"><a href="#__codelineno-43-104">104</a></span>
<span class="normal"><a href="#__codelineno-43-105">105</a></span>
<span class="normal"><a href="#__codelineno-43-106">106</a></span>
<span class="normal"><a href="#__codelineno-43-107">107</a></span>
<span class="normal"><a href="#__codelineno-43-108">108</a></span>
<span class="normal"><a href="#__codelineno-43-109">109</a></span>
<span class="normal"><a href="#__codelineno-43-110">110</a></span>
<span class="normal"><a href="#__codelineno-43-111">111</a></span>
<span class="normal"><a href="#__codelineno-43-112">112</a></span>
<span class="normal"><a href="#__codelineno-43-113">113</a></span>
<span class="normal"><a href="#__codelineno-43-114">114</a></span>
<span class="normal"><a href="#__codelineno-43-115">115</a></span>
<span class="normal"><a href="#__codelineno-43-116">116</a></span>
<span class="normal"><a href="#__codelineno-43-117">117</a></span>
<span class="normal"><a href="#__codelineno-43-118">118</a></span>
<span class="normal"><a href="#__codelineno-43-119">119</a></span>
<span class="normal"><a href="#__codelineno-43-120">120</a></span>
<span class="normal"><a href="#__codelineno-43-121">121</a></span>
<span class="normal"><a href="#__codelineno-43-122">122</a></span>
<span class="normal"><a href="#__codelineno-43-123">123</a></span>
<span class="normal"><a href="#__codelineno-43-124">124</a></span>
<span class="normal"><a href="#__codelineno-43-125">125</a></span>
<span class="normal"><a href="#__codelineno-43-126">126</a></span>
<span class="normal"><a href="#__codelineno-43-127">127</a></span>
<span class="normal"><a href="#__codelineno-43-128">128</a></span>
<span class="normal"><a href="#__codelineno-43-129">129</a></span>
<span class="normal"><a href="#__codelineno-43-130">130</a></span>
<span class="normal"><a href="#__codelineno-43-131">131</a></span>
<span class="normal"><a href="#__codelineno-43-132">132</a></span>
<span class="normal"><a href="#__codelineno-43-133">133</a></span>
<span class="normal"><a href="#__codelineno-43-134">134</a></span>
<span class="normal"><a href="#__codelineno-43-135">135</a></span>
<span class="normal"><a href="#__codelineno-43-136">136</a></span>
<span class="normal"><a href="#__codelineno-43-137">137</a></span>
<span class="normal"><a href="#__codelineno-43-138">138</a></span>
<span class="normal"><a href="#__codelineno-43-139">139</a></span>
<span class="normal"><a href="#__codelineno-43-140">140</a></span>
<span class="normal"><a href="#__codelineno-43-141">141</a></span>
<span class="normal"><a href="#__codelineno-43-142">142</a></span>
<span class="normal"><a href="#__codelineno-43-143">143</a></span>
<span class="normal"><a href="#__codelineno-43-144">144</a></span>
<span class="normal"><a href="#__codelineno-43-145">145</a></span>
<span class="normal"><a href="#__codelineno-43-146">146</a></span>
<span class="normal"><a href="#__codelineno-43-147">147</a></span>
<span class="normal"><a href="#__codelineno-43-148">148</a></span>
<span class="normal"><a href="#__codelineno-43-149">149</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">tailtracer</span>
<a id="__codelineno-43-2" name="__codelineno-43-2"></a>
<a id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="w">    </span><span class="s">&quot;math/rand&quot;</span>
<a id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="w">    </span><span class="s">&quot;time&quot;</span>
<a id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/pdata/pcommon&quot;</span>
<a id="__codelineno-43-7" name="__codelineno-43-7"></a><span class="w">    </span><span class="s">&quot;go.opentelemetry.io/collector/pdata/ptrace&quot;</span>
<a id="__codelineno-43-8" name="__codelineno-43-8"></a><span class="w">    </span><span class="nx">conventions</span><span class="w"> </span><span class="s">&quot;go.opentelemetry.io/collector/semconv/v1.9.0&quot;&quot;</span>
<a id="__codelineno-43-9" name="__codelineno-43-9"></a><span class="s">)</span>
<a id="__codelineno-43-10" name="__codelineno-43-10"></a>
<a id="__codelineno-43-11" name="__codelineno-43-11"></a><span class="s">type Atm struct {</span>
<a id="__codelineno-43-12" name="__codelineno-43-12"></a><span class="s">    ID           int64</span>
<a id="__codelineno-43-13" name="__codelineno-43-13"></a><span class="s">    Version      string</span>
<a id="__codelineno-43-14" name="__codelineno-43-14"></a><span class="s">    Name         string</span>
<a id="__codelineno-43-15" name="__codelineno-43-15"></a><span class="s">    StateID      string</span>
<a id="__codelineno-43-16" name="__codelineno-43-16"></a><span class="s">    SerialNumber string</span>
<a id="__codelineno-43-17" name="__codelineno-43-17"></a><span class="s">    ISPNetwork   string</span>
<a id="__codelineno-43-18" name="__codelineno-43-18"></a><span class="s">}</span>
<a id="__codelineno-43-19" name="__codelineno-43-19"></a>
<a id="__codelineno-43-20" name="__codelineno-43-20"></a><span class="s">type BackendSystem struct {</span>
<a id="__codelineno-43-21" name="__codelineno-43-21"></a><span class="s">    Version       string</span>
<a id="__codelineno-43-22" name="__codelineno-43-22"></a><span class="s">    ProcessName   string</span>
<a id="__codelineno-43-23" name="__codelineno-43-23"></a><span class="s">    OSType        string</span>
<a id="__codelineno-43-24" name="__codelineno-43-24"></a><span class="s">    OSVersion     string</span>
<a id="__codelineno-43-25" name="__codelineno-43-25"></a><span class="s">    CloudProvider string</span>
<a id="__codelineno-43-26" name="__codelineno-43-26"></a><span class="s">    CloudRegion   string</span>
<a id="__codelineno-43-27" name="__codelineno-43-27"></a><span class="s">    Endpoint      string</span>
<a id="__codelineno-43-28" name="__codelineno-43-28"></a><span class="s">}</span>
<a id="__codelineno-43-29" name="__codelineno-43-29"></a>
<a id="__codelineno-43-30" name="__codelineno-43-30"></a><span class="s">func generateAtm() Atm {</span>
<a id="__codelineno-43-31" name="__codelineno-43-31"></a><span class="s">    i := getRandomNumber(1, 2)</span>
<a id="__codelineno-43-32" name="__codelineno-43-32"></a><span class="s">    var newAtm Atm</span>
<a id="__codelineno-43-33" name="__codelineno-43-33"></a>
<a id="__codelineno-43-34" name="__codelineno-43-34"></a><span class="s">    switch i {</span>
<a id="__codelineno-43-35" name="__codelineno-43-35"></a><span class="s">        case 1:</span>
<a id="__codelineno-43-36" name="__codelineno-43-36"></a><span class="s">            newAtm = Atm{</span>
<a id="__codelineno-43-37" name="__codelineno-43-37"></a><span class="s">                ID:           111,</span>
<a id="__codelineno-43-38" name="__codelineno-43-38"></a><span class="s">                Name:         &quot;</span><span class="nx">ATM</span><span class="o">-</span><span class="mi">111</span><span class="o">-</span><span class="nx">IL</span><span class="s">&quot;,</span>
<a id="__codelineno-43-39" name="__codelineno-43-39"></a><span class="s">                SerialNumber: &quot;</span><span class="nx">atmxph</span><span class="o">-</span><span class="mi">2022</span><span class="o">-</span><span class="mi">111</span><span class="s">&quot;,</span>
<a id="__codelineno-43-40" name="__codelineno-43-40"></a><span class="s">                Version:      &quot;</span><span class="nx">v1</span><span class="mf">.0</span><span class="s">&quot;,</span>
<a id="__codelineno-43-41" name="__codelineno-43-41"></a><span class="s">                ISPNetwork:   &quot;</span><span class="nx">comcast</span><span class="o">-</span><span class="nx">chicago</span><span class="s">&quot;,</span>
<a id="__codelineno-43-42" name="__codelineno-43-42"></a><span class="s">                StateID:      &quot;</span><span class="nx">IL</span><span class="s">&quot;,</span>
<a id="__codelineno-43-43" name="__codelineno-43-43"></a><span class="s">            }</span>
<a id="__codelineno-43-44" name="__codelineno-43-44"></a>
<a id="__codelineno-43-45" name="__codelineno-43-45"></a><span class="s">        case 2:</span>
<a id="__codelineno-43-46" name="__codelineno-43-46"></a><span class="s">            newAtm = Atm{</span>
<a id="__codelineno-43-47" name="__codelineno-43-47"></a><span class="s">                ID:           222,</span>
<a id="__codelineno-43-48" name="__codelineno-43-48"></a><span class="s">                Name:         &quot;</span><span class="nx">ATM</span><span class="o">-</span><span class="mi">222</span><span class="o">-</span><span class="nx">CA</span><span class="s">&quot;,</span>
<a id="__codelineno-43-49" name="__codelineno-43-49"></a><span class="s">                SerialNumber: &quot;</span><span class="nx">atmxph</span><span class="o">-</span><span class="mi">2022</span><span class="o">-</span><span class="mi">222</span><span class="s">&quot;,</span>
<a id="__codelineno-43-50" name="__codelineno-43-50"></a><span class="s">                Version:      &quot;</span><span class="nx">v1</span><span class="mf">.0</span><span class="s">&quot;,</span>
<a id="__codelineno-43-51" name="__codelineno-43-51"></a><span class="s">                ISPNetwork:   &quot;</span><span class="nx">comcast</span><span class="o">-</span><span class="nx">sanfrancisco</span><span class="s">&quot;,</span>
<a id="__codelineno-43-52" name="__codelineno-43-52"></a><span class="s">                StateID:      &quot;</span><span class="nx">CA</span><span class="s">&quot;,</span>
<a id="__codelineno-43-53" name="__codelineno-43-53"></a><span class="s">            }</span>
<a id="__codelineno-43-54" name="__codelineno-43-54"></a><span class="s">    }</span>
<a id="__codelineno-43-55" name="__codelineno-43-55"></a>
<a id="__codelineno-43-56" name="__codelineno-43-56"></a><span class="s">    return newAtm</span>
<a id="__codelineno-43-57" name="__codelineno-43-57"></a><span class="s">}</span>
<a id="__codelineno-43-58" name="__codelineno-43-58"></a>
<a id="__codelineno-43-59" name="__codelineno-43-59"></a><span class="s">func generateBackendSystem() BackendSystem {</span>
<a id="__codelineno-43-60" name="__codelineno-43-60"></a><span class="s">    i := getRandomNumber(1, 3)</span>
<a id="__codelineno-43-61" name="__codelineno-43-61"></a>
<a id="__codelineno-43-62" name="__codelineno-43-62"></a><span class="s">    newBackend := BackendSystem{</span>
<a id="__codelineno-43-63" name="__codelineno-43-63"></a><span class="s">        ProcessName:   &quot;</span><span class="nx">accounts</span><span class="s">&quot;,</span>
<a id="__codelineno-43-64" name="__codelineno-43-64"></a><span class="s">        Version:       &quot;</span><span class="nx">v2</span><span class="mf">.5</span><span class="s">&quot;,</span>
<a id="__codelineno-43-65" name="__codelineno-43-65"></a><span class="s">        OSType:        &quot;</span><span class="nx">lnx</span><span class="s">&quot;,</span>
<a id="__codelineno-43-66" name="__codelineno-43-66"></a><span class="s">        OSVersion:     &quot;</span><span class="mf">4.16.10</span><span class="o">-</span><span class="mf">300.</span><span class="nx">fc28</span><span class="p">.</span><span class="nx">x86_64</span><span class="s">&quot;,</span>
<a id="__codelineno-43-67" name="__codelineno-43-67"></a><span class="s">        CloudProvider: &quot;</span><span class="nx">amzn</span><span class="s">&quot;,</span>
<a id="__codelineno-43-68" name="__codelineno-43-68"></a><span class="s">        CloudRegion:   &quot;</span><span class="nx">us</span><span class="o">-</span><span class="nx">east</span><span class="o">-</span><span class="mi">2</span><span class="s">&quot;,</span>
<a id="__codelineno-43-69" name="__codelineno-43-69"></a><span class="s">    }</span>
<a id="__codelineno-43-70" name="__codelineno-43-70"></a>
<a id="__codelineno-43-71" name="__codelineno-43-71"></a><span class="s">    switch i {</span>
<a id="__codelineno-43-72" name="__codelineno-43-72"></a><span class="s">        case 1:</span>
<a id="__codelineno-43-73" name="__codelineno-43-73"></a><span class="s">            newBackend.Endpoint = &quot;</span><span class="nx">api</span><span class="o">/</span><span class="nx">v2</span><span class="mf">.5</span><span class="o">/</span><span class="nx">balance</span><span class="s">&quot;</span>
<a id="__codelineno-43-74" name="__codelineno-43-74"></a><span class="s">        case 2:</span>
<a id="__codelineno-43-75" name="__codelineno-43-75"></a><span class="s">            newBackend.Endpoint = &quot;</span><span class="nx">api</span><span class="o">/</span><span class="nx">v2</span><span class="mf">.5</span><span class="o">/</span><span class="nx">deposit</span><span class="s">&quot;</span>
<a id="__codelineno-43-76" name="__codelineno-43-76"></a><span class="s">        case 3:</span>
<a id="__codelineno-43-77" name="__codelineno-43-77"></a><span class="s">            newBackend.Endpoint = &quot;</span><span class="nx">api</span><span class="o">/</span><span class="nx">v2</span><span class="mf">.5</span><span class="o">/</span><span class="nx">withdrawn</span><span class="s">&quot;</span>
<a id="__codelineno-43-78" name="__codelineno-43-78"></a><span class="s">    }</span>
<a id="__codelineno-43-79" name="__codelineno-43-79"></a>
<a id="__codelineno-43-80" name="__codelineno-43-80"></a><span class="s">    return newBackend</span>
<a id="__codelineno-43-81" name="__codelineno-43-81"></a><span class="s">}</span>
<a id="__codelineno-43-82" name="__codelineno-43-82"></a>
<a id="__codelineno-43-83" name="__codelineno-43-83"></a><span class="s">func getRandomNumber(min int, max int) int {</span>
<a id="__codelineno-43-84" name="__codelineno-43-84"></a><span class="s">    rand.Seed(time.Now().UnixNano())</span>
<a id="__codelineno-43-85" name="__codelineno-43-85"></a><span class="s">    i := (rand.Intn(max-min+1) + min)</span>
<a id="__codelineno-43-86" name="__codelineno-43-86"></a><span class="s">    return i</span>
<a id="__codelineno-43-87" name="__codelineno-43-87"></a><span class="s">}</span>
<a id="__codelineno-43-88" name="__codelineno-43-88"></a>
<a id="__codelineno-43-89" name="__codelineno-43-89"></a><span class="s">func generateTraces(numberOfTraces int) ptrace.Traces {</span>
<a id="__codelineno-43-90" name="__codelineno-43-90"></a><span class="s">    traces := ptrace.NewTraces()</span>
<a id="__codelineno-43-91" name="__codelineno-43-91"></a>
<a id="__codelineno-43-92" name="__codelineno-43-92"></a><span class="s">    for i := 0; i &lt;= numberOfTraces; i++ {</span>
<a id="__codelineno-43-93" name="__codelineno-43-93"></a><span class="s">        newAtm := generateAtm()</span>
<a id="__codelineno-43-94" name="__codelineno-43-94"></a><span class="s">        newBackendSystem := generateBackendSystem()</span>
<a id="__codelineno-43-95" name="__codelineno-43-95"></a>
<a id="__codelineno-43-96" name="__codelineno-43-96"></a><span class="s">        resourceSpan := traces.ResourceSpans().AppendEmpty()</span>
<a id="__codelineno-43-97" name="__codelineno-43-97"></a><span class="s">        atmResource := resourceSpan.Resource()</span>
<a id="__codelineno-43-98" name="__codelineno-43-98"></a><span class="s">        fillResourceWithAtm(&amp;atmResource, newAtm)</span>
<a id="__codelineno-43-99" name="__codelineno-43-99"></a>
<a id="__codelineno-43-100" name="__codelineno-43-100"></a><span class="s">        resourceSpan = traces.ResourceSpans().AppendEmpty()</span>
<a id="__codelineno-43-101" name="__codelineno-43-101"></a><span class="s">        backendResource := resourceSpan.Resource()</span>
<a id="__codelineno-43-102" name="__codelineno-43-102"></a><span class="s">        fillResourceWithBackendSystem(&amp;backendResource, newBackendSystem)</span>
<a id="__codelineno-43-103" name="__codelineno-43-103"></a><span class="s">    }</span>
<a id="__codelineno-43-104" name="__codelineno-43-104"></a>
<a id="__codelineno-43-105" name="__codelineno-43-105"></a><span class="s">    return traces</span>
<a id="__codelineno-43-106" name="__codelineno-43-106"></a><span class="s">}</span>
<a id="__codelineno-43-107" name="__codelineno-43-107"></a>
<a id="__codelineno-43-108" name="__codelineno-43-108"></a><span class="s">func fillResourceWithAtm(resource *pcommon.Resource, atm Atm) {</span>
<a id="__codelineno-43-109" name="__codelineno-43-109"></a><span class="s">    atmAttrs := resource.Attributes()</span>
<a id="__codelineno-43-110" name="__codelineno-43-110"></a><span class="s">    atmAttrs.PutInt(&quot;</span><span class="nx">atm</span><span class="p">.</span><span class="nx">id</span><span class="s">&quot;, atm.ID)</span>
<a id="__codelineno-43-111" name="__codelineno-43-111"></a><span class="s">    atmAttrs.PutStr(&quot;</span><span class="nx">atm</span><span class="p">.</span><span class="nx">stateid</span><span class="s">&quot;, atm.StateID)</span>
<a id="__codelineno-43-112" name="__codelineno-43-112"></a><span class="s">    atmAttrs.PutStr(&quot;</span><span class="nx">atm</span><span class="p">.</span><span class="nx">ispnetwork</span><span class="s">&quot;, atm.ISPNetwork)</span>
<a id="__codelineno-43-113" name="__codelineno-43-113"></a><span class="s">    atmAttrs.PutStr(&quot;</span><span class="nx">atm</span><span class="p">.</span><span class="nx">serialnumber</span><span class="s">&quot;, atm.SerialNumber)</span>
<a id="__codelineno-43-114" name="__codelineno-43-114"></a><span class="s">    atmAttrs.PutStr(conventions.AttributeServiceName, atm.Name)</span>
<a id="__codelineno-43-115" name="__codelineno-43-115"></a><span class="s">    atmAttrs.PutStr(conventions.AttributeServiceVersion, atm.Version)</span>
<a id="__codelineno-43-116" name="__codelineno-43-116"></a>
<a id="__codelineno-43-117" name="__codelineno-43-117"></a><span class="s">}</span>
<a id="__codelineno-43-118" name="__codelineno-43-118"></a>
<a id="__codelineno-43-119" name="__codelineno-43-119"></a><span class="s">func fillResourceWithBackendSystem(resource *pcommon.Resource, backend BackendSystem) {</span>
<a id="__codelineno-43-120" name="__codelineno-43-120"></a><span class="s">    backendAttrs := resource.Attributes()</span>
<a id="__codelineno-43-121" name="__codelineno-43-121"></a><span class="s">    var osType, cloudProvider string</span>
<a id="__codelineno-43-122" name="__codelineno-43-122"></a>
<a id="__codelineno-43-123" name="__codelineno-43-123"></a><span class="s">    switch {</span>
<a id="__codelineno-43-124" name="__codelineno-43-124"></a><span class="s">        case backend.CloudProvider == &quot;</span><span class="nx">amzn</span><span class="s">&quot;:</span>
<a id="__codelineno-43-125" name="__codelineno-43-125"></a><span class="s">            cloudProvider = conventions.AttributeCloudProviderAWS</span>
<a id="__codelineno-43-126" name="__codelineno-43-126"></a><span class="s">        case backend.OSType == &quot;</span><span class="nx">mcrsft</span><span class="s">&quot;:</span>
<a id="__codelineno-43-127" name="__codelineno-43-127"></a><span class="s">            cloudProvider = conventions.AttributeCloudProviderAzure</span>
<a id="__codelineno-43-128" name="__codelineno-43-128"></a><span class="s">        case backend.OSType == &quot;</span><span class="nx">gogl</span><span class="s">&quot;:</span>
<a id="__codelineno-43-129" name="__codelineno-43-129"></a><span class="s">            cloudProvider = conventions.AttributeCloudProviderGCP</span>
<a id="__codelineno-43-130" name="__codelineno-43-130"></a><span class="s">    }</span>
<a id="__codelineno-43-131" name="__codelineno-43-131"></a>
<a id="__codelineno-43-132" name="__codelineno-43-132"></a><span class="s">    backendAttrs.PutStr(conventions.AttributeCloudProvider, cloudProvider)</span>
<a id="__codelineno-43-133" name="__codelineno-43-133"></a><span class="s">    backendAttrs.PutStr(conventions.AttributeCloudRegion, backend.CloudRegion)</span>
<a id="__codelineno-43-134" name="__codelineno-43-134"></a>
<a id="__codelineno-43-135" name="__codelineno-43-135"></a><span class="s">    switch {</span>
<a id="__codelineno-43-136" name="__codelineno-43-136"></a><span class="s">        case backend.OSType == &quot;</span><span class="nx">lnx</span><span class="s">&quot;:</span>
<a id="__codelineno-43-137" name="__codelineno-43-137"></a><span class="s">            osType = conventions.AttributeOSTypeLinux</span>
<a id="__codelineno-43-138" name="__codelineno-43-138"></a><span class="s">        case backend.OSType == &quot;</span><span class="nx">wndws</span><span class="s">&quot;:</span>
<a id="__codelineno-43-139" name="__codelineno-43-139"></a><span class="s">            osType = conventions.AttributeOSTypeWindows</span>
<a id="__codelineno-43-140" name="__codelineno-43-140"></a><span class="s">        case backend.OSType == &quot;</span><span class="nx">slrs</span><span class="err">&quot;</span><span class="p">:</span>
<a id="__codelineno-43-141" name="__codelineno-43-141"></a><span class="w">            </span><span class="nx">osType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeOSTypeSolaris</span>
<a id="__codelineno-43-142" name="__codelineno-43-142"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-43-143" name="__codelineno-43-143"></a>
<a id="__codelineno-43-144" name="__codelineno-43-144"></a><span class="w">    </span><span class="nx">backendAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeOSType</span><span class="p">,</span><span class="w"> </span><span class="nx">osType</span><span class="p">)</span>
<a id="__codelineno-43-145" name="__codelineno-43-145"></a><span class="w">    </span><span class="nx">backendAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeOSVersion</span><span class="p">,</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">OSVersion</span><span class="p">)</span>
<a id="__codelineno-43-146" name="__codelineno-43-146"></a>
<a id="__codelineno-43-147" name="__codelineno-43-147"></a><span class="w">    </span><span class="nx">backendAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeServiceName</span><span class="p">,</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">ProcessName</span><span class="p">)</span>
<a id="__codelineno-43-148" name="__codelineno-43-148"></a><span class="w">    </span><span class="nx">backendAttrs</span><span class="p">.</span><span class="nx">PutStr</span><span class="p">(</span><span class="nx">conventions</span><span class="p">.</span><span class="nx">AttributeServiceVersion</span><span class="p">,</span><span class="w"> </span><span class="nx">backend</span><span class="p">.</span><span class="nx">Version</span><span class="p">)</span>
<a id="__codelineno-43-149" name="__codelineno-43-149"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_12">Check your work<a class="headerlink" href="#check-your-work_12" title="Permanent link">&para;</a></h4>
<ul>
<li>Imported the <code>go.opentelemetry.io/collector/semconv/v1.9.0</code> package as
  <code>conventions</code>, in order to have access to all resource semantic conventions
  attribute names and values.</li>
<li>Updated the <code>fillResourceWithAtm()</code> function by adding lines to properly
  assign the "service.name" and "service.version" attributes to the
  <code>pcommon.Resource</code> representing the <code>Atm</code> entity</li>
<li>Updated the <code>fillResourceWithBackendSystem()</code> function by adding lines to
  properly assign the "service.name" and "service.version" attributes to the
  <code>pcommon.Resource</code> representing the <code>BackendSystem</code> entity</li>
<li>Updated the <code>generateTraces</code> function by adding lines to properly
  instantiate a <code>pcommon.Resource</code> and fill in the attribute information for
  both <code>Atm</code> and <code>BackendSystem</code> entities using the <code>fillResourceWithAtm()</code>
  and <code>fillResourceWithBackendSystem()</code> functions</li>
</ul>
</blockquote>
<h3 id="representing-operations-with-spans">Representing operations with spans<a class="headerlink" href="#representing-operations-with-spans" title="Permanent link">&para;</a></h3>
<p>You now have a <code>ResourceSpan</code> instance with their respective <code>Resource</code> properly
filled with attributes to represent the <code>Atm</code> and <code>BackendSystem</code> entities, you
are ready to represent the operations that each <code>Resource</code> execute as part of a
trace within the <code>ResourceSpan</code>.</p>
<p>In the OTel world, in order for a system to generate telemetry, it needs to be
instrumented either manually or automatically through an instrumentation
library.</p>
<p>The instrumentation libraries are responsible to set the scope (also known as
the instrumentation scope) in which the operations participating on a trace
happened and then describe those operations as spans within the context of the
trace.</p>
<p><code>pdata.ResourceSpans</code> has a method named <code>ScopeSpans()</code> which returns an
instance of a helper type called <code>ptrace.ScopeSpansSlice</code>. The
<code>ptrace.ScopeSpansSlice</code> type has methods to help you handle the array of
<code>ptrace.ScopeSpans</code> that will contain as many items as the number of
<code>ptrace.ScopeSpan</code> representing the different instrumentation scopes and the
spans it generated within the context of a trace.</p>
<p><code>ptrace.ScopeSpansSlice</code> has a method named <code>AppendEmpty()</code> that adds a new
<code>ptrace.ScopeSpans</code> to the array and return its reference.</p>
<p>Let's create a function to instantiate a <code>ptrace.ScopeSpans</code> representing for
the ATM system's instrumentation scope and its spans. Open the
<code>tailtracer/model.go</code> file and add the following function:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1">1</a></span>
<span class="normal"><a href="#__codelineno-44-2">2</a></span>
<span class="normal"><a href="#__codelineno-44-3">3</a></span>
<span class="normal"><a href="#__codelineno-44-4">4</a></span>
<span class="normal"><a href="#__codelineno-44-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">appendAtmSystemInstrScopeSpans</span><span class="p">(</span><span class="nx">resourceSpans</span><span class="w"> </span><span class="o">*</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">ResourceSpans</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">ScopeSpans</span><span class="p">){</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="w">    </span><span class="nx">scopeSpans</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">resourceSpans</span><span class="p">.</span><span class="nx">ScopeSpans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">scopeSpans</span>
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The <code>ptrace.ScopeSpans</code> has a method named <code>Scope()</code> that returns a reference
for the <code>pcommon.InstrumentationScope</code> instance representing the instrumentation
scope that generated the spans.</p>
<p><code>pcommon.InstrumentationScope</code> has the following methods to describe an
instrumentation scope:</p>
<ul>
<li>
<p><code>SetName(v string)</code> sets the name for the instrumentation library</p>
</li>
<li>
<p><code>SetVersion(v string)</code> sets the version for the instrumentation library</p>
</li>
<li>
<p><code>Name() string</code> returns the name associated with the instrumentation library</p>
</li>
<li>
<p><code>Version() string</code> returns the version associated with the instrumentation
  library</p>
</li>
</ul>
<p>Let's update the <code>appendAtmSystemInstrScopeSpans</code> function so we can set the
name and version of the instrumentation scope for the new <code>ptrace.ScopeSpans</code>.
Here is what <code>appendAtmSystemInstrScopeSpans</code> looks like after the update:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span>
<span class="normal"><a href="#__codelineno-45-4">4</a></span>
<span class="normal"><a href="#__codelineno-45-5">5</a></span>
<span class="normal"><a href="#__codelineno-45-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">appendAtmSystemInstrScopeSpans</span><span class="p">(</span><span class="nx">resourceSpans</span><span class="w"> </span><span class="o">*</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">ResourceSpans</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">ScopeSpans</span><span class="p">){</span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="w">    </span><span class="nx">scopeSpans</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">resourceSpans</span><span class="p">.</span><span class="nx">ScopeSpans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="w">    </span><span class="nx">scopeSpans</span><span class="p">.</span><span class="nx">Scope</span><span class="p">().</span><span class="nx">SetName</span><span class="p">(</span><span class="s">&quot;atm-system&quot;</span><span class="p">)</span>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="w">    </span><span class="nx">scopeSpans</span><span class="p">.</span><span class="nx">Scope</span><span class="p">().</span><span class="nx">SetVersion</span><span class="p">(</span><span class="s">&quot;v1.0&quot;</span><span class="p">)</span>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">scopeSpans</span>
<a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>You can now update the <code>generateTraces</code> function and add variables to represent
the instrumentation scope used by both <code>Atm</code> and <code>BackendSystem</code> entities by
initializing them with the <code>appendAtmSystemInstrScopeSpans()</code>. Here is what
<code>generateTraces()</code> looks like after the update:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-46-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-46-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-46-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-46-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-46-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-46-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-46-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-46-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-46-10">10</a></span>
<span class="normal"><a href="#__codelineno-46-11">11</a></span>
<span class="normal"><a href="#__codelineno-46-12">12</a></span>
<span class="normal"><a href="#__codelineno-46-13">13</a></span>
<span class="normal"><a href="#__codelineno-46-14">14</a></span>
<span class="normal"><a href="#__codelineno-46-15">15</a></span>
<span class="normal"><a href="#__codelineno-46-16">16</a></span>
<span class="normal"><a href="#__codelineno-46-17">17</a></span>
<span class="normal"><a href="#__codelineno-46-18">18</a></span>
<span class="normal"><a href="#__codelineno-46-19">19</a></span>
<span class="normal"><a href="#__codelineno-46-20">20</a></span>
<span class="normal"><a href="#__codelineno-46-21">21</a></span>
<span class="normal"><a href="#__codelineno-46-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">generateTraces</span><span class="p">(</span><span class="nx">numberOfTraces</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">Traces</span><span class="p">{</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="w">    </span><span class="nx">traces</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ptraces</span><span class="p">.</span><span class="nx">NewTraces</span><span class="p">()</span>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">numberOfTraces</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">{</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="w">        </span><span class="nx">newAtm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">generateAtm</span><span class="p">()</span>
<a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="w">        </span><span class="nx">newBackendSystem</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">generateBackendSystem</span><span class="p">()</span>
<a id="__codelineno-46-7" name="__codelineno-46-7"></a>
<a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="w">        </span><span class="nx">resourceSpan</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">traces</span><span class="p">.</span><span class="nx">ResourceSpans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-46-9" name="__codelineno-46-9"></a><span class="w">        </span><span class="nx">atmResource</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">resourceSpan</span><span class="p">.</span><span class="nx">Resource</span><span class="p">()</span>
<a id="__codelineno-46-10" name="__codelineno-46-10"></a><span class="w">        </span><span class="nx">fillResourceWithAtm</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">atmResource</span><span class="p">,</span><span class="w"> </span><span class="nx">newAtm</span><span class="p">)</span>
<a id="__codelineno-46-11" name="__codelineno-46-11"></a>
<a id="__codelineno-46-12" name="__codelineno-46-12"></a><span class="w">        </span><span class="nx">atmInstScope</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">appendAtmSystemInstrScopeSpans</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">resourceSpan</span><span class="p">)</span>
<a id="__codelineno-46-13" name="__codelineno-46-13"></a>
<a id="__codelineno-46-14" name="__codelineno-46-14"></a><span class="w">        </span><span class="nx">resourceSpan</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">traces</span><span class="p">.</span><span class="nx">ResourceSpans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-46-15" name="__codelineno-46-15"></a><span class="w">        </span><span class="nx">backendResource</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">resourceSpan</span><span class="p">.</span><span class="nx">Resource</span><span class="p">()</span>
<a id="__codelineno-46-16" name="__codelineno-46-16"></a><span class="w">        </span><span class="nx">fillResourceWithBackendSystem</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">backendResource</span><span class="p">,</span><span class="w"> </span><span class="nx">newBackendSystem</span><span class="p">)</span>
<a id="__codelineno-46-17" name="__codelineno-46-17"></a>
<a id="__codelineno-46-18" name="__codelineno-46-18"></a><span class="w">        </span><span class="nx">backendInstScope</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">appendAtmSystemInstrScopeSpans</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">resourceSpan</span><span class="p">)</span>
<a id="__codelineno-46-19" name="__codelineno-46-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-46-20" name="__codelineno-46-20"></a>
<a id="__codelineno-46-21" name="__codelineno-46-21"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">traces</span>
<a id="__codelineno-46-22" name="__codelineno-46-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>At this point, you have everything needed to represent the telemetry generation
entities in your system and the instrumentation scope that is responsible to
identify operations and generate the traces for the system. The next step is to
finally create the spans representing the operations that the given
instrumentation scope generated as part of a trace.</p>
<p><code>ptrace.ScopeSpans</code> has a method named <code>Spans()</code> which returns an instance of a
helper type called <code>ptrace.SpanSlice</code>. The <code>ptrace.SpanSlice</code> type has methods
to help you handle the array of <code>ptrace.Span</code> that will contain as many items as
the number of operations the instrumentation scope was able to identify and
describe as part of the trace.</p>
<p><code>ptrace.SpanSlice</code> has a method named <code>AppendEmpty()</code> that adds a new
<code>ptrace.Span</code> to the array and return its reference.</p>
<p><code>ptrace.Span</code> has the following methods to describe an operation:</p>
<ul>
<li>
<p><code>SetTraceID(v pcommon.TraceID)</code> sets the <code>pcommon.TraceID</code> uniquely
  identifying the trace which this span is associated with</p>
</li>
<li>
<p><code>SetSpanID(v pcommon.SpanID)</code> sets the <code>pcommon.SpanID</code> uniquely identifying
  this span within the context of the trace it is associated with</p>
</li>
<li>
<p><code>SetParentSpanID(v pcommon.SpanID)</code> sets <code>pcommon.SpanID</code> for the parent
  span/operation in case the operation represented by this span is executed as
  part of the parent (nested)</p>
</li>
<li>
<p><code>SetName(v string)</code> sets the name of the operation for the span</p>
</li>
<li>
<p><code>SetKind(v ptrace.SpanKind)</code> sets <code>ptrace.SpanKind</code> defining what kind of
  operation the span represents.</p>
</li>
<li>
<p><code>SetStartTimestamp(v pcommon.Timestamp)</code> sets the <code>pcommon.Timestamp</code>
  representing the date and time when the operation represented by the span has
  started</p>
</li>
<li>
<p><code>SetEndTimestamp(v pcommon.Timestamp)</code> sets the <code>pcommon.Timestamp</code>
  representing the date and time when the operation represented by the span has
  ended</p>
</li>
</ul>
<p>As you can see per the methods above, a <code>ptrace.Span</code> is uniquely identified by
2 required IDs; their own unique ID represented by the <code>pcommon.SpanID</code> type and
the ID of the trace they are associated with represented by a <code>pcommon.TraceID</code>
type.</p>
<p>The <code>pcommon.TraceID</code> has to carry a globally unique ID represented through a 16
byte array and should follow the
<a href="https://www.w3.org/TR/trace-context/#trace-id">W3C Trace Context specification</a>
while the <code>pcommon.SpanID</code> is a unique ID within the context of the trace they
are associated with and it's represented through a 8 byte array.</p>
<p>The <code>pcommon</code> package provides the following types to generate the span's IDs:</p>
<ul>
<li>
<p><code>type TraceID [16]byte</code></p>
</li>
<li>
<p><code>type SpanID [8]byte</code></p>
</li>
</ul>
<p>For this tutorial, you will be creating the IDs using functions from
<code>github.com/google/uuid</code> package for the <code>pcommon.TraceID</code> and functions from
the <code>crypto/rand</code> package to randomly generate the <code>pcommon.SpanID</code>. Open the
<code>tailtracer/model.go</code> file and add both packages to the <code>import</code> statement;
after that, add the following functions to help generate both IDs:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-47-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-47-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-47-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-47-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-47-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-47-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-47-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-47-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-47-10">10</a></span>
<span class="normal"><a href="#__codelineno-47-11">11</a></span>
<span class="normal"><a href="#__codelineno-47-12">12</a></span>
<span class="normal"><a href="#__codelineno-47-13">13</a></span>
<span class="normal"><a href="#__codelineno-47-14">14</a></span>
<span class="normal"><a href="#__codelineno-47-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">NewTraceID</span><span class="p">()</span><span class="w"> </span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">TraceID</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">TraceID</span><span class="p">(</span><span class="nx">uuid</span><span class="p">.</span><span class="nx">New</span><span class="p">())</span>
<a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="p">}</span>
<a id="__codelineno-47-4" name="__codelineno-47-4"></a>
<a id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="kd">func</span><span class="w"> </span><span class="nx">NewSpanID</span><span class="p">()</span><span class="w"> </span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">SpanID</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">rngSeed</span><span class="w"> </span><span class="kt">int64</span>
<a id="__codelineno-47-7" name="__codelineno-47-7"></a><span class="w">    </span><span class="nx">_</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">binary</span><span class="p">.</span><span class="nx">Read</span><span class="p">(</span><span class="nx">crand</span><span class="p">.</span><span class="nx">Reader</span><span class="p">,</span><span class="w"> </span><span class="nx">binary</span><span class="p">.</span><span class="nx">LittleEndian</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">rngSeed</span><span class="p">)</span>
<a id="__codelineno-47-8" name="__codelineno-47-8"></a><span class="w">    </span><span class="nx">randSource</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">rand</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nx">NewSource</span><span class="p">(</span><span class="nx">rngSeed</span><span class="p">))</span>
<a id="__codelineno-47-9" name="__codelineno-47-9"></a>
<a id="__codelineno-47-10" name="__codelineno-47-10"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">sid</span><span class="w"> </span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="kt">byte</span>
<a id="__codelineno-47-11" name="__codelineno-47-11"></a><span class="w">    </span><span class="nx">randSource</span><span class="p">.</span><span class="nx">Read</span><span class="p">(</span><span class="nx">sid</span><span class="p">[:])</span>
<a id="__codelineno-47-12" name="__codelineno-47-12"></a><span class="w">    </span><span class="nx">spanID</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">SpanID</span><span class="p">(</span><span class="nx">sid</span><span class="p">)</span>
<a id="__codelineno-47-13" name="__codelineno-47-13"></a>
<a id="__codelineno-47-14" name="__codelineno-47-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">spanID</span>
<a id="__codelineno-47-15" name="__codelineno-47-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now that you have a way to properly identify the spans, you can start creating
them to represent the operations within and across the entities in your system.</p>
<p>As part of the <code>generateBackendSystem()</code> function, we have randomly assigned the
operations that the <code>BackEndSystem</code> entity can provide as services to the
system. We will now open the <code>tailtracer/model.go</code> file and a function called
<code>appendTraceSpans()</code> that will be responsible to create a trace and append spans
representing the <code>BackendSystem</code> operations. Here is what the initial
implementation for the <code>appendTraceSpans()</code> function looks like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-48-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-48-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-48-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-48-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-48-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-48-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-48-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-48-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-48-10">10</a></span>
<span class="normal"><a href="#__codelineno-48-11">11</a></span>
<span class="normal"><a href="#__codelineno-48-12">12</a></span>
<span class="normal"><a href="#__codelineno-48-13">13</a></span>
<span class="normal"><a href="#__codelineno-48-14">14</a></span>
<span class="normal"><a href="#__codelineno-48-15">15</a></span>
<span class="normal"><a href="#__codelineno-48-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">appendTraceSpans</span><span class="p">(</span><span class="nx">backend</span><span class="w"> </span><span class="o">*</span><span class="nx">BackendSystem</span><span class="p">,</span><span class="w"> </span><span class="nx">backendScopeSpans</span><span class="w"> </span><span class="o">*</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">ScopeSpans</span><span class="p">,</span><span class="w"> </span><span class="nx">atmScopeSpans</span><span class="w"> </span><span class="o">*</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">ScopeSpans</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="w">    </span><span class="nx">traceId</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewTraceID</span><span class="p">()</span>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="w">    </span><span class="nx">backendSpanId</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewSpanID</span><span class="p">()</span>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="w">    </span><span class="nx">backendDuration</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">ParseDuration</span><span class="p">(</span><span class="s">&quot;1s&quot;</span><span class="p">)</span>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">    </span><span class="nx">backendSpanStartTime</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">()</span>
<a id="__codelineno-48-7" name="__codelineno-48-7"></a><span class="w">    </span><span class="nx">backendSpanFinishTime</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">backendSpanStartTime</span><span class="p">.</span><span class="nx">Add</span><span class="p">(</span><span class="nx">backendDuration</span><span class="p">)</span>
<a id="__codelineno-48-8" name="__codelineno-48-8"></a>
<a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">backendScopeSpans</span><span class="p">.</span><span class="nx">Spans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-48-10" name="__codelineno-48-10"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetTraceID</span><span class="p">(</span><span class="nx">traceId</span><span class="p">)</span>
<a id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetSpanID</span><span class="p">(</span><span class="nx">backendSpanId</span><span class="p">)</span>
<a id="__codelineno-48-12" name="__codelineno-48-12"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetName</span><span class="p">(</span><span class="nx">backend</span><span class="p">.</span><span class="nx">Endpoint</span><span class="p">)</span>
<a id="__codelineno-48-13" name="__codelineno-48-13"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetKind</span><span class="p">(</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">SpanKindServer</span><span class="p">)</span>
<a id="__codelineno-48-14" name="__codelineno-48-14"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetStartTimestamp</span><span class="p">(</span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">NewTimestampFromTime</span><span class="p">(</span><span class="nx">backendSpanStartTime</span><span class="p">))</span>
<a id="__codelineno-48-15" name="__codelineno-48-15"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetEndTimestamp</span><span class="p">(</span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">NewTimestampFromTime</span><span class="p">(</span><span class="nx">backendSpanFinishTime</span><span class="p">))</span>
<a id="__codelineno-48-16" name="__codelineno-48-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_13">Check your work<a class="headerlink" href="#check-your-work_13" title="Permanent link">&para;</a></h4>
<ul>
<li>Added <code>traceId</code> and <code>backendSpanId</code> variables to respectively represent the
  trace and the span id and initialized them with the helper functions created
  previously</li>
<li>Added <code>backendSpanStartTime</code> and <code>backendSpanFinishTime</code> to represent the
  start and the end time of the operation. For the tutorial, any
  <code>BackendSystem</code> operation will take 1 second.</li>
<li>Added a variable called <code>backendSpan</code> which will hold the instance of the
  <code>ptrace.Span</code> representing this operation.</li>
<li>Setting the <code>Name</code> of the span with the <code>Endpoint</code> field value from the
  <code>BackendSystem</code> instance</li>
<li>Setting the <code>Kind</code> of the span as <code>ptrace.SpanKindServer</code>. Take a look at
  <a href="/docs/specs/otel/trace/api/#spankind">SpanKind section</a> within the trace
  specification to understand how to properly define SpanKind.</li>
<li>Used all the methods mentioned before to fill the <code>ptrace.Span</code> with the
  proper values to represent the <code>BackendSystem</code> operation</li>
</ul>
</blockquote>
<p>You probably noticed that there are 2 references to <code>ptrace.ScopeSpans</code> as
parameters in the <code>appendTraceSpans()</code> function, but we only used one of them.
Don't worry about it for now, we will get back to it later.</p>
<p>You will now update the <code>generateTraces()</code> function so it can actually generate
the trace by calling the <code>appendTraceSpans()</code> function. Here is what the updated
<code>generateTraces()</code> function looks like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span>
<span class="normal"><a href="#__codelineno-49-13">13</a></span>
<span class="normal"><a href="#__codelineno-49-14">14</a></span>
<span class="normal"><a href="#__codelineno-49-15">15</a></span>
<span class="normal"><a href="#__codelineno-49-16">16</a></span>
<span class="normal"><a href="#__codelineno-49-17">17</a></span>
<span class="normal"><a href="#__codelineno-49-18">18</a></span>
<span class="normal"><a href="#__codelineno-49-19">19</a></span>
<span class="normal"><a href="#__codelineno-49-20">20</a></span>
<span class="normal"><a href="#__codelineno-49-21">21</a></span>
<span class="normal"><a href="#__codelineno-49-22">22</a></span>
<span class="normal"><a href="#__codelineno-49-23">23</a></span>
<span class="normal"><a href="#__codelineno-49-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">generateTraces</span><span class="p">(</span><span class="nx">numberOfTraces</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">Traces</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="w">    </span><span class="nx">traces</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">NewTraces</span><span class="p">()</span>
<a id="__codelineno-49-3" name="__codelineno-49-3"></a>
<a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">numberOfTraces</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="w">        </span><span class="nx">newAtm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">generateAtm</span><span class="p">()</span>
<a id="__codelineno-49-6" name="__codelineno-49-6"></a><span class="w">        </span><span class="nx">newBackendSystem</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">generateBackendSystem</span><span class="p">()</span>
<a id="__codelineno-49-7" name="__codelineno-49-7"></a>
<a id="__codelineno-49-8" name="__codelineno-49-8"></a><span class="w">        </span><span class="nx">resourceSpan</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">traces</span><span class="p">.</span><span class="nx">ResourceSpans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-49-9" name="__codelineno-49-9"></a><span class="w">        </span><span class="nx">atmResource</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">resourceSpan</span><span class="p">.</span><span class="nx">Resource</span><span class="p">()</span>
<a id="__codelineno-49-10" name="__codelineno-49-10"></a><span class="w">        </span><span class="nx">fillResourceWithAtm</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">atmResource</span><span class="p">,</span><span class="w"> </span><span class="nx">newAtm</span><span class="p">)</span>
<a id="__codelineno-49-11" name="__codelineno-49-11"></a>
<a id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="w">        </span><span class="nx">atmInstScope</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">appendAtmSystemInstrScopeSpans</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">resourceSpan</span><span class="p">)</span>
<a id="__codelineno-49-13" name="__codelineno-49-13"></a>
<a id="__codelineno-49-14" name="__codelineno-49-14"></a><span class="w">        </span><span class="nx">resourceSpan</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">traces</span><span class="p">.</span><span class="nx">ResourceSpans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-49-15" name="__codelineno-49-15"></a><span class="w">        </span><span class="nx">backendResource</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">resourceSpan</span><span class="p">.</span><span class="nx">Resource</span><span class="p">()</span>
<a id="__codelineno-49-16" name="__codelineno-49-16"></a><span class="w">        </span><span class="nx">fillResourceWithBackendSystem</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">backendResource</span><span class="p">,</span><span class="w"> </span><span class="nx">newBackendSystem</span><span class="p">)</span>
<a id="__codelineno-49-17" name="__codelineno-49-17"></a>
<a id="__codelineno-49-18" name="__codelineno-49-18"></a><span class="w">        </span><span class="nx">backendInstScope</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">appendAtmSystemInstrScopeSpans</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">resourceSpan</span><span class="p">)</span>
<a id="__codelineno-49-19" name="__codelineno-49-19"></a>
<a id="__codelineno-49-20" name="__codelineno-49-20"></a><span class="w">        </span><span class="nx">appendTraceSpans</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">newBackendSystem</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">backendInstScope</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">atmInstScope</span><span class="p">)</span>
<a id="__codelineno-49-21" name="__codelineno-49-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-49-22" name="__codelineno-49-22"></a>
<a id="__codelineno-49-23" name="__codelineno-49-23"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">traces</span>
<a id="__codelineno-49-24" name="__codelineno-49-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>You now have the <code>BackendSystem</code> entity and its operations represented in spans
within a proper trace context! All you need to do is to push the generated trace
through the pipeline so the next consumer (either a processor or an exporter)
can receive and process it.</p>
<p><code>consumer.Traces</code> has a method called <code>ConsumeTraces()</code> which is responsible to
push the generated traces to the next consumer in the pipeline. All you need to
do now is to update the <code>Start()</code> method within the <code>tailtracerReceiver</code> type
and add the code to use it.</p>
<p>Open the <code>tailtracer/trace-receiver.go</code> file and update the <code>Start()</code> method as
follow:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-50-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-50-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-50-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-50-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-50-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-50-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-50-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-50-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-50-10">10</a></span>
<span class="normal"><a href="#__codelineno-50-11">11</a></span>
<span class="normal"><a href="#__codelineno-50-12">12</a></span>
<span class="normal"><a href="#__codelineno-50-13">13</a></span>
<span class="normal"><a href="#__codelineno-50-14">14</a></span>
<span class="normal"><a href="#__codelineno-50-15">15</a></span>
<span class="normal"><a href="#__codelineno-50-16">16</a></span>
<span class="normal"><a href="#__codelineno-50-17">17</a></span>
<span class="normal"><a href="#__codelineno-50-18">18</a></span>
<span class="normal"><a href="#__codelineno-50-19">19</a></span>
<span class="normal"><a href="#__codelineno-50-20">20</a></span>
<span class="normal"><a href="#__codelineno-50-21">21</a></span>
<span class="normal"><a href="#__codelineno-50-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="w"> </span><span class="o">*</span><span class="nx">tailtracerReceiver</span><span class="p">)</span><span class="w"> </span><span class="nx">Start</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">host</span><span class="w"> </span><span class="nx">component</span><span class="p">.</span><span class="nx">Host</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="w">    </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">host</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">host</span>
<a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="w">    </span><span class="nx">ctx</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Background</span><span class="p">()</span>
<a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="w">    </span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">cancel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">WithCancel</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
<a id="__codelineno-50-5" name="__codelineno-50-5"></a>
<a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="w">    </span><span class="nx">interval</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">ParseDuration</span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">Interval</span><span class="p">)</span>
<a id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="w">    </span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-8" name="__codelineno-50-8"></a><span class="w">        </span><span class="nx">ticker</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">NewTicker</span><span class="p">(</span><span class="nx">interval</span><span class="p">)</span>
<a id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="w">        </span><span class="k">defer</span><span class="w"> </span><span class="nx">ticker</span><span class="p">.</span><span class="nx">Stop</span><span class="p">()</span>
<a id="__codelineno-50-10" name="__codelineno-50-10"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-11" name="__codelineno-50-11"></a><span class="w">            </span><span class="k">select</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-12" name="__codelineno-50-12"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">ticker</span><span class="p">.</span><span class="nx">C</span><span class="p">:</span>
<a id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="w">                    </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">Info</span><span class="p">(</span><span class="s">&quot;I should start processing traces now!&quot;</span><span class="p">)</span>
<a id="__codelineno-50-14" name="__codelineno-50-14"></a><span class="w">                    </span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">nextConsumer</span><span class="p">.</span><span class="nx">ConsumeTraces</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">generateTraces</span><span class="p">(</span><span class="nx">tailtracerRcvr</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">NumberOfTraces</span><span class="p">))</span>
<a id="__codelineno-50-15" name="__codelineno-50-15"></a><span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">Done</span><span class="p">():</span>
<a id="__codelineno-50-16" name="__codelineno-50-16"></a><span class="w">                    </span><span class="k">return</span>
<a id="__codelineno-50-17" name="__codelineno-50-17"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-50-18" name="__codelineno-50-18"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-50-19" name="__codelineno-50-19"></a><span class="w">    </span><span class="p">}()</span>
<a id="__codelineno-50-20" name="__codelineno-50-20"></a>
<a id="__codelineno-50-21" name="__codelineno-50-21"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-50-22" name="__codelineno-50-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
<h4 id="check-your-work_14">Check your work<a class="headerlink" href="#check-your-work_14" title="Permanent link">&para;</a></h4>
<ul>
<li>Added a line under the <code>case &lt;=ticker.C</code> condition calling the
  <code>tailtracerRcvr.nextConsumer.ConsumeTraces()</code> method passing the new context
  created within the <code>Start()</code> method (<code>ctx</code>) and a call to the
  <code>generateTraces</code> function so the generated traces can be pushed to the next
  consumer in the pipeline</li>
</ul>
</blockquote>
<p>If you run your <code>otelcol-dev</code>, here is what the output should look like after 2
minutes running:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1">  1</a></span>
<span class="normal"><a href="#__codelineno-51-2">  2</a></span>
<span class="normal"><a href="#__codelineno-51-3">  3</a></span>
<span class="normal"><a href="#__codelineno-51-4">  4</a></span>
<span class="normal"><a href="#__codelineno-51-5">  5</a></span>
<span class="normal"><a href="#__codelineno-51-6">  6</a></span>
<span class="normal"><a href="#__codelineno-51-7">  7</a></span>
<span class="normal"><a href="#__codelineno-51-8">  8</a></span>
<span class="normal"><a href="#__codelineno-51-9">  9</a></span>
<span class="normal"><a href="#__codelineno-51-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-51-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-51-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-51-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-51-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-51-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-51-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-51-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-51-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-51-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-51-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-51-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-51-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-51-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-51-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-51-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-51-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-51-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-51-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-51-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-51-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-51-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-51-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-51-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-51-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-51-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-51-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-51-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-51-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-51-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-51-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-51-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-51-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-51-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-51-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-51-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-51-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-51-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-51-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-51-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-51-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-51-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-51-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-51-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-51-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-51-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-51-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-51-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-51-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-51-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-51-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-51-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-51-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-51-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-51-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-51-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-51-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-51-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-51-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-51-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-51-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-51-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-51-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-51-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-51-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-51-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-51-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-51-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-51-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-51-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-51-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-51-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-51-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-51-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-51-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-51-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-51-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-51-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-51-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-51-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-51-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-51-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-51-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-51-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-51-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-51-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-51-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-51-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-51-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-51-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-51-100">100</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a>Starting: /Users/rquedas/go/bin/dlv dap --check-go-version=false --listen=127.0.0.1:54625 --log-dest=3 from /Users/rquedas/Documents/vscode-workspace/otel4devs/collector/receiver/trace-receiver/otelcol-dev
<a id="__codelineno-51-2" name="__codelineno-51-2"></a>DAP server listening at: 127.0.0.1:54625
<a id="__codelineno-51-3" name="__codelineno-51-3"></a>2022-03-21T15:44:22.737-0500    info    builder/exporters_builder.go:255    Exporter was built. {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}
<a id="__codelineno-51-4" name="__codelineno-51-4"></a>2022-03-21T15:44:22.737-0500    info    builder/exporters_builder.go:255    Exporter was built. {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}
<a id="__codelineno-51-5" name="__codelineno-51-5"></a>2022-03-21T15:44:22.737-0500    info    builder/pipelines_builder.go:223    Pipeline was built. {&quot;name&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}
<a id="__codelineno-51-6" name="__codelineno-51-6"></a>2022-03-21T15:44:22.738-0500    info    builder/receivers_builder.go:226    Receiver was built. {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;, &quot;datatype&quot;: &quot;traces&quot;}
<a id="__codelineno-51-7" name="__codelineno-51-7"></a>2022-03-21T15:44:22.738-0500    info    builder/receivers_builder.go:226    Receiver was built. {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;, &quot;datatype&quot;: &quot;traces&quot;}
<a id="__codelineno-51-8" name="__codelineno-51-8"></a>2022-03-21T15:44:22.738-0500    info    service/service.go:82   Starting extensions...
<a id="__codelineno-51-9" name="__codelineno-51-9"></a>2022-03-21T15:44:22.738-0500    info    service/service.go:87   Starting exporters...
<a id="__codelineno-51-10" name="__codelineno-51-10"></a>2022-03-21T15:44:22.738-0500    info    builder/exporters_builder.go:40 Exporter is starting... {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}
<a id="__codelineno-51-11" name="__codelineno-51-11"></a>2022-03-21T15:44:22.738-0500    info    builder/exporters_builder.go:48 Exporter started.   {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;logging&quot;}
<a id="__codelineno-51-12" name="__codelineno-51-12"></a>2022-03-21T15:44:22.738-0500    info    builder/exporters_builder.go:40 Exporter is starting... {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}
<a id="__codelineno-51-13" name="__codelineno-51-13"></a>2022-03-21T15:44:22.738-0500    info    builder/exporters_builder.go:48 Exporter started.   {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;}
<a id="__codelineno-51-14" name="__codelineno-51-14"></a>2022-03-21T15:44:22.738-0500    info    service/service.go:92   Starting processors...
<a id="__codelineno-51-15" name="__codelineno-51-15"></a>2022-03-21T15:44:22.738-0500    info    jaegerexporter@v0.46.0/exporter.go:186  State of the connection with the Jaeger Collector backend   {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;, &quot;state&quot;: &quot;IDLE&quot;}
<a id="__codelineno-51-16" name="__codelineno-51-16"></a>2022-03-21T15:44:22.738-0500    info    builder/pipelines_builder.go:54 Pipeline is starting... {&quot;name&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}
<a id="__codelineno-51-17" name="__codelineno-51-17"></a>2022-03-21T15:44:22.738-0500    info    builder/pipelines_builder.go:65 Pipeline is started.    {&quot;name&quot;: &quot;pipeline&quot;, &quot;name&quot;: &quot;traces&quot;}
<a id="__codelineno-51-18" name="__codelineno-51-18"></a>2022-03-21T15:44:22.738-0500    info    service/service.go:97   Starting receivers...
<a id="__codelineno-51-19" name="__codelineno-51-19"></a>2022-03-21T15:44:22.738-0500    info    builder/receivers_builder.go:68 Receiver is starting... {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;}
<a id="__codelineno-51-20" name="__codelineno-51-20"></a>2022-03-21T15:44:22.738-0500    info    otlpreceiver/otlp.go:69 Starting GRPC server on endpoint localhost:55680    {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;}
<a id="__codelineno-51-21" name="__codelineno-51-21"></a>2022-03-21T15:44:22.741-0500    info    builder/receivers_builder.go:73 Receiver started.   {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;otlp&quot;}
<a id="__codelineno-51-22" name="__codelineno-51-22"></a>2022-03-21T15:44:22.741-0500    info    builder/receivers_builder.go:68 Receiver is starting... {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;}
<a id="__codelineno-51-23" name="__codelineno-51-23"></a>2022-03-21T15:44:22.741-0500    info    builder/receivers_builder.go:73 Receiver started.   {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;}
<a id="__codelineno-51-24" name="__codelineno-51-24"></a>2022-03-21T15:44:22.741-0500    info    service/telemetry.go:109    Setting up own telemetry...
<a id="__codelineno-51-25" name="__codelineno-51-25"></a>2022-03-21T15:44:22.741-0500    info    service/telemetry.go:129    Serving Prometheus metrics  {&quot;address&quot;: &quot;:8888&quot;, &quot;level&quot;: &quot;basic&quot;, &quot;service.instance.id&quot;: &quot;4b134d3e-2822-4360-b2c6-7030bea0beec&quot;, &quot;service.version&quot;: &quot;latest&quot;}
<a id="__codelineno-51-26" name="__codelineno-51-26"></a>2022-03-21T15:44:22.742-0500    info    service/collector.go:248    Starting otelcol-dev... {&quot;Version&quot;: &quot;1.0.0&quot;, &quot;NumCPU&quot;: 12}
<a id="__codelineno-51-27" name="__codelineno-51-27"></a>2022-03-21T15:44:22.742-0500    info    service/collector.go:144    Everything is ready. Begin running and processing data.
<a id="__codelineno-51-28" name="__codelineno-51-28"></a>2022-03-21T15:44:23.739-0500    info    jaegerexporter@v0.46.0/exporter.go:186  State of the connection with the Jaeger Collector backend   {&quot;kind&quot;: &quot;exporter&quot;, &quot;name&quot;: &quot;jaeger&quot;, &quot;state&quot;: &quot;READY&quot;}
<a id="__codelineno-51-29" name="__codelineno-51-29"></a>2022-03-21T15:45:22.743-0500    info    tailtracer/trace-receiver.go:33 I should start processing traces now!   {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;}
<a id="__codelineno-51-30" name="__codelineno-51-30"></a>2022-03-21T15:45:22.743-0500    INFO    loggingexporter/logging_exporter.go:40  TracesExporter  {&quot;#spans&quot;: 1}
<a id="__codelineno-51-31" name="__codelineno-51-31"></a>2022-03-21T15:45:22.743-0500    DEBUG   loggingexporter/logging_exporter.go:49  ResourceSpans #0
<a id="__codelineno-51-32" name="__codelineno-51-32"></a>Resource SchemaURL:
<a id="__codelineno-51-33" name="__codelineno-51-33"></a>Resource labels:
<a id="__codelineno-51-34" name="__codelineno-51-34"></a>     -&gt; atm.id: INT(222)
<a id="__codelineno-51-35" name="__codelineno-51-35"></a>     -&gt; atm.stateid: STRING(CA)
<a id="__codelineno-51-36" name="__codelineno-51-36"></a>     -&gt; atm.ispnetwork: STRING(comcast-sanfrancisco)
<a id="__codelineno-51-37" name="__codelineno-51-37"></a>     -&gt; atm.serialnumber: STRING(atmxph-2022-222)
<a id="__codelineno-51-38" name="__codelineno-51-38"></a>     -&gt; service.name: STRING(ATM-222-CA)
<a id="__codelineno-51-39" name="__codelineno-51-39"></a>     -&gt; service.version: STRING(v1.0)
<a id="__codelineno-51-40" name="__codelineno-51-40"></a>ScopeSpans #0
<a id="__codelineno-51-41" name="__codelineno-51-41"></a>ScopeSpans SchemaURL:
<a id="__codelineno-51-42" name="__codelineno-51-42"></a>InstrumentationScope atm-system v1.0
<a id="__codelineno-51-43" name="__codelineno-51-43"></a>ResourceSpans #1
<a id="__codelineno-51-44" name="__codelineno-51-44"></a>Resource SchemaURL:
<a id="__codelineno-51-45" name="__codelineno-51-45"></a>Resource labels:
<a id="__codelineno-51-46" name="__codelineno-51-46"></a>     -&gt; cloud.provider: STRING(aws)
<a id="__codelineno-51-47" name="__codelineno-51-47"></a>     -&gt; cloud.region: STRING(us-east-2)
<a id="__codelineno-51-48" name="__codelineno-51-48"></a>     -&gt; os.type: STRING(linux)
<a id="__codelineno-51-49" name="__codelineno-51-49"></a>     -&gt; os.version: STRING(4.16.10-300.fc28.x86_64)
<a id="__codelineno-51-50" name="__codelineno-51-50"></a>     -&gt; service.name: STRING(accounts)
<a id="__codelineno-51-51" name="__codelineno-51-51"></a>     -&gt; service.version: STRING(v2.5)
<a id="__codelineno-51-52" name="__codelineno-51-52"></a>ScopeSpans #0
<a id="__codelineno-51-53" name="__codelineno-51-53"></a>ScopeSpans SchemaURL:
<a id="__codelineno-51-54" name="__codelineno-51-54"></a>InstrumentationScope atm-system v1.0
<a id="__codelineno-51-55" name="__codelineno-51-55"></a>Span #0
<a id="__codelineno-51-56" name="__codelineno-51-56"></a>    Trace ID       : 5cce8a774d4546c2a5cbdeb607ec74c9
<a id="__codelineno-51-57" name="__codelineno-51-57"></a>    Parent ID      :
<a id="__codelineno-51-58" name="__codelineno-51-58"></a>    ID             : bb25c05c7fb13084
<a id="__codelineno-51-59" name="__codelineno-51-59"></a>    Name           : api/v2.5/balance
<a id="__codelineno-51-60" name="__codelineno-51-60"></a>    Kind           : SPAN_KIND_SERVER
<a id="__codelineno-51-61" name="__codelineno-51-61"></a>    Start time     : 2022-03-21 20:45:22.743385 +0000 UTC
<a id="__codelineno-51-62" name="__codelineno-51-62"></a>    End time       : 2022-03-21 20:45:23.743385 +0000 UTC
<a id="__codelineno-51-63" name="__codelineno-51-63"></a>    Status code    : STATUS_CODE_OK
<a id="__codelineno-51-64" name="__codelineno-51-64"></a>    Status message :
<a id="__codelineno-51-65" name="__codelineno-51-65"></a>2022-03-21T15:46:22.743-0500    info    tailtracer/trace-receiver.go:33 I should start processing traces now!   {&quot;kind&quot;: &quot;receiver&quot;, &quot;name&quot;: &quot;tailtracer&quot;}
<a id="__codelineno-51-66" name="__codelineno-51-66"></a>2022-03-21T15:46:22.744-0500    INFO    loggingexporter/logging_exporter.go:40  TracesExporter  {&quot;#spans&quot;: 1}
<a id="__codelineno-51-67" name="__codelineno-51-67"></a>2022-03-21T15:46:22.744-0500    DEBUG   loggingexporter/logging_exporter.go:49  ResourceSpans #0
<a id="__codelineno-51-68" name="__codelineno-51-68"></a>Resource SchemaURL:
<a id="__codelineno-51-69" name="__codelineno-51-69"></a>Resource labels:
<a id="__codelineno-51-70" name="__codelineno-51-70"></a>     -&gt; atm.id: INT(111)
<a id="__codelineno-51-71" name="__codelineno-51-71"></a>     -&gt; atm.stateid: STRING(IL)
<a id="__codelineno-51-72" name="__codelineno-51-72"></a>     -&gt; atm.ispnetwork: STRING(comcast-chicago)
<a id="__codelineno-51-73" name="__codelineno-51-73"></a>     -&gt; atm.serialnumber: STRING(atmxph-2022-111)
<a id="__codelineno-51-74" name="__codelineno-51-74"></a>     -&gt; service.name: STRING(ATM-111-IL)
<a id="__codelineno-51-75" name="__codelineno-51-75"></a>     -&gt; service.version: STRING(v1.0)
<a id="__codelineno-51-76" name="__codelineno-51-76"></a>ScopeSpans #0
<a id="__codelineno-51-77" name="__codelineno-51-77"></a>ScopeSpans SchemaURL:
<a id="__codelineno-51-78" name="__codelineno-51-78"></a>InstrumentationScope atm-system v1.0
<a id="__codelineno-51-79" name="__codelineno-51-79"></a>ResourceSpans #1
<a id="__codelineno-51-80" name="__codelineno-51-80"></a>Resource SchemaURL:
<a id="__codelineno-51-81" name="__codelineno-51-81"></a>Resource labels:
<a id="__codelineno-51-82" name="__codelineno-51-82"></a>     -&gt; cloud.provider: STRING(aws)
<a id="__codelineno-51-83" name="__codelineno-51-83"></a>     -&gt; cloud.region: STRING(us-east-2)
<a id="__codelineno-51-84" name="__codelineno-51-84"></a>     -&gt; os.type: STRING(linux)
<a id="__codelineno-51-85" name="__codelineno-51-85"></a>     -&gt; os.version: STRING(4.16.10-300.fc28.x86_64)
<a id="__codelineno-51-86" name="__codelineno-51-86"></a>     -&gt; service.name: STRING(accounts)
<a id="__codelineno-51-87" name="__codelineno-51-87"></a>     -&gt; service.version: STRING(v2.5)
<a id="__codelineno-51-88" name="__codelineno-51-88"></a>ScopeSpans #0
<a id="__codelineno-51-89" name="__codelineno-51-89"></a>ScopeSpans SchemaURL:
<a id="__codelineno-51-90" name="__codelineno-51-90"></a>InstrumentationScope atm-system v1.0
<a id="__codelineno-51-91" name="__codelineno-51-91"></a>Span #0
<a id="__codelineno-51-92" name="__codelineno-51-92"></a>    Trace ID       : 8a6ca822db0847f48facfebbb08bbb9e
<a id="__codelineno-51-93" name="__codelineno-51-93"></a>    Parent ID      :
<a id="__codelineno-51-94" name="__codelineno-51-94"></a>    ID             : 7cf668c1273ecee5
<a id="__codelineno-51-95" name="__codelineno-51-95"></a>    Name           : api/v2.5/withdrawn
<a id="__codelineno-51-96" name="__codelineno-51-96"></a>    Kind           : SPAN_KIND_SERVER
<a id="__codelineno-51-97" name="__codelineno-51-97"></a>    Start time     : 2022-03-21 20:46:22.74404 +0000 UTC
<a id="__codelineno-51-98" name="__codelineno-51-98"></a>    End time       : 2022-03-21 20:46:23.74404 +0000 UTC
<a id="__codelineno-51-99" name="__codelineno-51-99"></a>    Status code    : STATUS_CODE_OK
<a id="__codelineno-51-100" name="__codelineno-51-100"></a>    Status message :
</code></pre></div></td></tr></table></div>
<p>Here is what the generated trace looks like in Jaeger:
<img alt="Jaeger trace" src="/img/docs/tutorials/Jaeger-BackendSystem-Trace.png" /></p>
<p>What you currently see in Jaeger is the representation of a service that is
receiving a request from an external entity that isn't instrumented by an OTel
SDK, therefore it can't be identified as the origin/start of the trace. In order
for a <code>ptrace.Span</code> to understand it is representing an operation that was
execute as a result of another operation originated either within or outside
(nested/child) of the <code>Resource</code> within the same trace context you will need to:</p>
<ul>
<li>Set the same trace context as the caller operation by calling the
  <code>SetTraceID()</code> method and passing the <code>pcommon.TraceID</code> of the parent/caller
  <code>ptrace.Span</code> as a parameter.</li>
<li>Define who is the caller operation within the context of the trace by calling
  <code>SetParentId()</code> method and passing the <code>pcommon.SpanID</code> of the parent/caller
  <code>ptrace.Span</code> as a parameter.</li>
</ul>
<p>You will now create a <code>ptrace.Span</code> representing the <code>Atm</code> entity operations and
set it as the parent for <code>BackendSystem</code> span. Open the <code>tailtracer/model.go</code>
file and update the <code>appendTraceSpans()</code> function as follow:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-52-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-52-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-52-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-52-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-52-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-52-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-52-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-52-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-52-10">10</a></span>
<span class="normal"><a href="#__codelineno-52-11">11</a></span>
<span class="normal"><a href="#__codelineno-52-12">12</a></span>
<span class="normal"><a href="#__codelineno-52-13">13</a></span>
<span class="normal"><a href="#__codelineno-52-14">14</a></span>
<span class="normal"><a href="#__codelineno-52-15">15</a></span>
<span class="normal"><a href="#__codelineno-52-16">16</a></span>
<span class="normal"><a href="#__codelineno-52-17">17</a></span>
<span class="normal"><a href="#__codelineno-52-18">18</a></span>
<span class="normal"><a href="#__codelineno-52-19">19</a></span>
<span class="normal"><a href="#__codelineno-52-20">20</a></span>
<span class="normal"><a href="#__codelineno-52-21">21</a></span>
<span class="normal"><a href="#__codelineno-52-22">22</a></span>
<span class="normal"><a href="#__codelineno-52-23">23</a></span>
<span class="normal"><a href="#__codelineno-52-24">24</a></span>
<span class="normal"><a href="#__codelineno-52-25">25</a></span>
<span class="normal"><a href="#__codelineno-52-26">26</a></span>
<span class="normal"><a href="#__codelineno-52-27">27</a></span>
<span class="normal"><a href="#__codelineno-52-28">28</a></span>
<span class="normal"><a href="#__codelineno-52-29">29</a></span>
<span class="normal"><a href="#__codelineno-52-30">30</a></span>
<span class="normal"><a href="#__codelineno-52-31">31</a></span>
<span class="normal"><a href="#__codelineno-52-32">32</a></span>
<span class="normal"><a href="#__codelineno-52-33">33</a></span>
<span class="normal"><a href="#__codelineno-52-34">34</a></span>
<span class="normal"><a href="#__codelineno-52-35">35</a></span>
<span class="normal"><a href="#__codelineno-52-36">36</a></span>
<span class="normal"><a href="#__codelineno-52-37">37</a></span>
<span class="normal"><a href="#__codelineno-52-38">38</a></span>
<span class="normal"><a href="#__codelineno-52-39">39</a></span>
<span class="normal"><a href="#__codelineno-52-40">40</a></span>
<span class="normal"><a href="#__codelineno-52-41">41</a></span>
<span class="normal"><a href="#__codelineno-52-42">42</a></span>
<span class="normal"><a href="#__codelineno-52-43">43</a></span>
<span class="normal"><a href="#__codelineno-52-44">44</a></span>
<span class="normal"><a href="#__codelineno-52-45">45</a></span>
<span class="normal"><a href="#__codelineno-52-46">46</a></span>
<span class="normal"><a href="#__codelineno-52-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">appendTraceSpans</span><span class="p">(</span><span class="nx">backend</span><span class="w"> </span><span class="o">*</span><span class="nx">BackendSystem</span><span class="p">,</span><span class="w"> </span><span class="nx">backendScopeSpans</span><span class="w"> </span><span class="o">*</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">ScopeSpans</span><span class="p">,</span><span class="w"> </span><span class="nx">atmScopeSpans</span><span class="w"> </span><span class="o">*</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">ScopeSpans</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-52-2" name="__codelineno-52-2"></a><span class="w">    </span><span class="nx">traceId</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewTraceID</span><span class="p">()</span>
<a id="__codelineno-52-3" name="__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">atmOperationName</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-52-5" name="__codelineno-52-5"></a>
<a id="__codelineno-52-6" name="__codelineno-52-6"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-52-7" name="__codelineno-52-7"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">Contains</span><span class="p">(</span><span class="nx">backend</span><span class="p">.</span><span class="nx">Endpoint</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;balance&quot;</span><span class="p">):</span>
<a id="__codelineno-52-8" name="__codelineno-52-8"></a><span class="w">            </span><span class="nx">atmOperationName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Check Balance&quot;</span>
<a id="__codelineno-52-9" name="__codelineno-52-9"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">Contains</span><span class="p">(</span><span class="nx">backend</span><span class="p">.</span><span class="nx">Endpoint</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;deposit&quot;</span><span class="p">):</span>
<a id="__codelineno-52-10" name="__codelineno-52-10"></a><span class="w">            </span><span class="nx">atmOperationName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Make Deposit&quot;</span>
<a id="__codelineno-52-11" name="__codelineno-52-11"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">Contains</span><span class="p">(</span><span class="nx">backend</span><span class="p">.</span><span class="nx">Endpoint</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;withdraw&quot;</span><span class="p">):</span>
<a id="__codelineno-52-12" name="__codelineno-52-12"></a><span class="w">            </span><span class="nx">atmOperationName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Fast Cash&quot;</span>
<a id="__codelineno-52-13" name="__codelineno-52-13"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-52-14" name="__codelineno-52-14"></a>
<a id="__codelineno-52-15" name="__codelineno-52-15"></a><span class="w">    </span><span class="nx">atmSpanId</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewSpanID</span><span class="p">()</span>
<a id="__codelineno-52-16" name="__codelineno-52-16"></a><span class="w">    </span><span class="nx">atmSpanStartTime</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">()</span>
<a id="__codelineno-52-17" name="__codelineno-52-17"></a><span class="w">    </span><span class="nx">atmDuration</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">ParseDuration</span><span class="p">(</span><span class="s">&quot;4s&quot;</span><span class="p">)</span>
<a id="__codelineno-52-18" name="__codelineno-52-18"></a><span class="w">    </span><span class="nx">atmSpanFinishTime</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">atmSpanStartTime</span><span class="p">.</span><span class="nx">Add</span><span class="p">(</span><span class="nx">atmDuration</span><span class="p">)</span>
<a id="__codelineno-52-19" name="__codelineno-52-19"></a>
<a id="__codelineno-52-20" name="__codelineno-52-20"></a>
<a id="__codelineno-52-21" name="__codelineno-52-21"></a><span class="w">    </span><span class="nx">atmSpan</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">atmScopeSpans</span><span class="p">.</span><span class="nx">Spans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-52-22" name="__codelineno-52-22"></a><span class="w">    </span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">SetTraceID</span><span class="p">(</span><span class="nx">traceId</span><span class="p">)</span>
<a id="__codelineno-52-23" name="__codelineno-52-23"></a><span class="w">    </span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">SetSpanID</span><span class="p">(</span><span class="nx">atmSpanId</span><span class="p">)</span>
<a id="__codelineno-52-24" name="__codelineno-52-24"></a><span class="w">    </span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">SetName</span><span class="p">(</span><span class="nx">atmOperationName</span><span class="p">)</span>
<a id="__codelineno-52-25" name="__codelineno-52-25"></a><span class="w">    </span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">SetKind</span><span class="p">(</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">SpanKindClient</span><span class="p">)</span>
<a id="__codelineno-52-26" name="__codelineno-52-26"></a><span class="w">    </span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">Status</span><span class="p">().</span><span class="nx">SetCode</span><span class="p">(</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">StatusCodeOk</span><span class="p">)</span>
<a id="__codelineno-52-27" name="__codelineno-52-27"></a><span class="w">    </span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">SetStartTimestamp</span><span class="p">(</span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">NewTimestampFromTime</span><span class="p">(</span><span class="nx">atmSpanStartTime</span><span class="p">))</span>
<a id="__codelineno-52-28" name="__codelineno-52-28"></a><span class="w">    </span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">SetEndTimestamp</span><span class="p">(</span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">NewTimestampFromTime</span><span class="p">(</span><span class="nx">atmSpanFinishTime</span><span class="p">))</span>
<a id="__codelineno-52-29" name="__codelineno-52-29"></a>
<a id="__codelineno-52-30" name="__codelineno-52-30"></a>
<a id="__codelineno-52-31" name="__codelineno-52-31"></a><span class="w">    </span><span class="nx">backendSpanId</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewSpanID</span><span class="p">()</span>
<a id="__codelineno-52-32" name="__codelineno-52-32"></a>
<a id="__codelineno-52-33" name="__codelineno-52-33"></a><span class="w">    </span><span class="nx">backendDuration</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">ParseDuration</span><span class="p">(</span><span class="s">&quot;2s&quot;</span><span class="p">)</span>
<a id="__codelineno-52-34" name="__codelineno-52-34"></a><span class="w">    </span><span class="nx">backendSpanStartTime</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">atmSpanStartTime</span><span class="p">.</span><span class="nx">Add</span><span class="p">(</span><span class="nx">backendDuration</span><span class="p">)</span>
<a id="__codelineno-52-35" name="__codelineno-52-35"></a>
<a id="__codelineno-52-36" name="__codelineno-52-36"></a>
<a id="__codelineno-52-37" name="__codelineno-52-37"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">backendScopeSpans</span><span class="p">.</span><span class="nx">Spans</span><span class="p">().</span><span class="nx">AppendEmpty</span><span class="p">()</span>
<a id="__codelineno-52-38" name="__codelineno-52-38"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetTraceID</span><span class="p">(</span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">TraceID</span><span class="p">())</span>
<a id="__codelineno-52-39" name="__codelineno-52-39"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetSpanID</span><span class="p">(</span><span class="nx">backendSpanId</span><span class="p">)</span>
<a id="__codelineno-52-40" name="__codelineno-52-40"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetParentSpanID</span><span class="p">(</span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">SpanID</span><span class="p">())</span>
<a id="__codelineno-52-41" name="__codelineno-52-41"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetName</span><span class="p">(</span><span class="nx">backend</span><span class="p">.</span><span class="nx">Endpoint</span><span class="p">)</span>
<a id="__codelineno-52-42" name="__codelineno-52-42"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetKind</span><span class="p">(</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">SpanKindServer</span><span class="p">)</span>
<a id="__codelineno-52-43" name="__codelineno-52-43"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">Status</span><span class="p">().</span><span class="nx">SetCode</span><span class="p">(</span><span class="nx">ptrace</span><span class="p">.</span><span class="nx">StatusCodeOk</span><span class="p">)</span>
<a id="__codelineno-52-44" name="__codelineno-52-44"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetStartTimestamp</span><span class="p">(</span><span class="nx">pcommon</span><span class="p">.</span><span class="nx">NewTimestampFromTime</span><span class="p">(</span><span class="nx">backendSpanStartTime</span><span class="p">))</span>
<a id="__codelineno-52-45" name="__codelineno-52-45"></a><span class="w">    </span><span class="nx">backendSpan</span><span class="p">.</span><span class="nx">SetEndTimestamp</span><span class="p">(</span><span class="nx">atmSpan</span><span class="p">.</span><span class="nx">EndTimestamp</span><span class="p">())</span>
<a id="__codelineno-52-46" name="__codelineno-52-46"></a>
<a id="__codelineno-52-47" name="__codelineno-52-47"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Go ahead and run your <code>otelcol-dev</code> again and after 2 minutes running, you
should start seeing traces in Jaeger like the following:
<img alt="Jaeger trace" src="/img/docs/tutorials/Jaeger-FullSystem-Traces-List.png" /></p>
<p>We now have services representing both the <code>Atm</code> and the <code>BackendSystem</code>
telemetry generation entities in our system and can fully understand how both
entities are being used and contributing to the performance of an operation
executed by an user.</p>
<p>Here is the detailed view of one of those traces in Jaeger:
<img alt="Jaeger trace" src="/img/docs/tutorials/Jaeger-FullSystem-Trace-Details.png" /></p>
<p>That's it! You have now reached the end of this tutorial and successfully
implemented a trace receiver, congratulations!</p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      版权所有 © 2017-2023 MIT by Sindre Sorhus
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://twitter.com/sindresorhus" target="_blank" rel="noopener" title="Sindre Sorhus Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/sindresorhus" target="_blank" rel="noopener" title="Sindre Sorhus Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://instagram.com/sindresorhus" target="_blank" rel="noopener" title="Sindre Sorhus Instagram" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://sindresorhus.com/apps" target="_blank" rel="noopener" title="Sindre Sorhus Blog" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M162.4 196c4.8-4.9 6.2-5.1 36.4-5.1 27.2 0 28.1.1 32.1 2.1 5.8 2.9 8.3 7 8.3 13.6 0 5.9-2.4 10-7.6 13.4-2.8 1.8-4.5 1.9-31.1 2.1-16.4.1-29.5-.2-31.5-.8-10.3-2.9-14.1-17.7-6.6-25.3zm61.4 94.5c-53.9 0-55.8.2-60.2 4.1-3.5 3.1-5.7 9.4-5.1 13.9.7 4.7 4.8 10.1 9.2 12 2.2 1 14.1 1.7 56.3 1.2l47.9-.6 9.2-1.5c9-5.1 10.5-17.4 3.1-24.4-5.3-4.7-5-4.7-60.4-4.7zm223.4 130.1c-3.5 28.4-23 50.4-51.1 57.5-7.2 1.8-9.7 1.9-172.9 1.8-157.8 0-165.9-.1-172-1.8-8.4-2.2-15.6-5.5-22.3-10-5.6-3.8-13.9-11.8-17-16.4-3.8-5.6-8.2-15.3-10-22C.1 423 0 420.3 0 256.3 0 93.2 0 89.7 1.8 82.6 8.1 57.9 27.7 39 53 33.4c7.3-1.6 332.1-1.9 340-.3 21.2 4.3 37.9 17.1 47.6 36.4 7.7 15.3 7-1.5 7.3 180.6.2 115.8 0 164.5-.7 170.5zm-85.4-185.2c-1.1-5-4.2-9.6-7.7-11.5-1.1-.6-8-1.3-15.5-1.7-12.4-.6-13.8-.8-17.8-3.1-6.2-3.6-7.9-7.6-8-18.3 0-20.4-8.5-39.4-25.3-56.5-12-12.2-25.3-20.5-40.6-25.1-3.6-1.1-11.8-1.5-39.2-1.8-42.9-.5-52.5.4-67.1 6.2-27 10.7-46.3 33.4-53.4 62.4-1.3 5.4-1.6 14.2-1.9 64.3-.4 62.8 0 72.1 4 84.5 9.7 30.7 37.1 53.4 64.6 58.4 9.2 1.7 122.2 2.1 133.7.5 20.1-2.7 35.9-10.8 50.7-25.9 10.7-10.9 17.4-22.8 21.8-38.5 3.2-10.9 2.9-88.4 1.7-93.9z"/></svg>
    </a>
  
    
    
      
    
    
    
    <a href="https://mastodon.social/@sindresorhus" target="_blank" rel="noopener me" title="Sindre Sorhus Mastodon" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.top", "navigation.indexes", "content.code.annotate", "navigation.top"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>