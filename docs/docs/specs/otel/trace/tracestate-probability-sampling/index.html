
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="OPENTELEMETRY 文档">
      
      
        <meta name="author" content="OPENTELEMETRY">
      
      
        <link rel="canonical" href="https://wdk-docs.github.io/opentelemetry-docs/docs/specs/otel/trace/tracestate-probability-sampling/">
      
      
        <link rel="prev" href="../tracestate-handling/">
      
      
        <link rel="next" href="../sdk_exporters/jaeger/">
      
      <link rel="icon" href="../../../../../assets/favicons/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>TraceState:概率抽样 - OPENTELEMETRY 文档</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.26e3688c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tracestate" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../../.." title="OPENTELEMETRY 文档" class="md-header__button md-logo" aria-label="OPENTELEMETRY 文档" data-md-component="logo">
      
  <img src="../../../../../assets/logo/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OPENTELEMETRY 文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              TraceState:概率抽样
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/wdk-docs/opentelemetry-docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wdk-docs/opentelemetry-docs
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../.." class="md-tabs__link">
      首页
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../" class="md-tabs__link">
        文档
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../concepts/" class="md-tabs__link">
        概念
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../instrumentation/" class="md-tabs__link">
        插装
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../collector/" class="md-tabs__link">
        收集器
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../k8s/" class="md-tabs__link">
        K8S
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../faas/" class="md-tabs__link">
        FaaS
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../demo/" class="md-tabs__link">
        演示
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        规范
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../ecosystem/" class="md-tabs__link">
        生态系统
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../../status/" class="md-tabs__link">
      状态
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../community/" class="md-tabs__link">
        社区
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../blog/" class="md-tabs__link">
        博客
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../search/" class="md-tabs__link">
        其它
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="OPENTELEMETRY 文档" class="md-nav__button md-logo" aria-label="OPENTELEMETRY 文档" data-md-component="logo">
      
  <img src="../../../../../assets/logo/logo.svg" alt="logo">

    </a>
    OPENTELEMETRY 文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/wdk-docs/opentelemetry-docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wdk-docs/opentelemetry-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        首页
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../">文档</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          文档
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../what-is-opentelemetry/" class="md-nav__link">
        什么是遥测?
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../getting-started/">入门</a>
          
            <label for="__nav_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          入门
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/dev/" class="md-nav__link">
        开发者入门指南
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/ops/" class="md-nav__link">
        Ops入门
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../migration/">迁移</a>
          
            <label for="__nav_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          迁移
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../migration/opencensus/" class="md-nav__link">
        Migrating from OpenCensus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../migration/opentracing/" class="md-nav__link">
        Migrating from OpenTracing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../acknowledgements/">致谢</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          致谢
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
          contribution-guidelines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          contribution-guidelines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contribution-guidelines/" class="md-nav__link">
        Contribution guidelines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../concepts/">概念</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          概念
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/observability-primer/" class="md-nav__link">
        可观测入门指南
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../concepts/signals/">信号</a>
          
            <label for="__nav_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          信号
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/signals/traces/" class="md-nav__link">
        Traces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/signals/metrics/" class="md-nav__link">
        Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/signals/logs/" class="md-nav__link">
        Logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/signals/baggage/" class="md-nav__link">
        Baggage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../concepts/instrumentation/">插装</a>
          
            <label for="__nav_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          插装
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/instrumentation/automatic/" class="md-nav__link">
        自动插装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/instrumentation/manual/" class="md-nav__link">
        手动插装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/instrumentation/libraries/" class="md-nav__link">
        插装库
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/components/" class="md-nav__link">
        组件
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/semantic-conventions/" class="md-nav__link">
        语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/data-collection/" class="md-nav__link">
        数据收集
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../concepts/sampling/">采样</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          采样
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../concepts/sdk-configuration/">SDK配置</a>
          
            <label for="__nav_3_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_9">
          <span class="md-nav__icon md-icon"></span>
          SDK配置
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/sdk-configuration/general-sdk-configuration/" class="md-nav__link">
        通用SDK配置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/sdk-configuration/otlp-exporter-configuration/" class="md-nav__link">
        OTLP导出配置
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/distributions/" class="md-nav__link">
        分发
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../concepts/glossary/" class="md-nav__link">
        术语表
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/">插装</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          插装
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/cpp/">C++</a>
          
            <label for="__nav_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          C++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/cpp/api/" class="md-nav__link">
        API reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/cpp/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/cpp/exporters/" class="md-nav__link">
        Exporters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/cpp/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/cpp/manual/" class="md-nav__link">
        Manual Instrumentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/net/">.NET</a>
          
            <label for="__nav_4_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          .NET
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/automatic/" class="md-nav__link">
        Automatic Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/exporters/" class="md-nav__link">
        Exporters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/libraries/" class="md-nav__link">
        Using instrumentation libraries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/manual/" class="md-nav__link">
        Manual Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/metrics-api/" class="md-nav__link">
        Metrics API reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/netframework/" class="md-nav__link">
        .NET Framework instrumentation configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/resources/" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/shim/" class="md-nav__link">
        OpenTelemetry Tracing Shim
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/net/traces-api/" class="md-nav__link">
        Tracing API reference
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/erlang/">Erlang/Elixir</a>
          
            <label for="__nav_4_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Erlang/Elixir
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/erlang/api/" class="md-nav__link">
        API reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/erlang/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/erlang/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/erlang/manual/" class="md-nav__link">
        Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/erlang/propagation/" class="md-nav__link">
        Propagation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/erlang/resources/" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/erlang/sampling/" class="md-nav__link">
        Sampling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/erlang/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/go/">Go</a>
          
            <label for="__nav_4_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Go
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/go/api/" class="md-nav__link">
        API reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/go/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/go/exporters/" class="md-nav__link">
        Exporters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/go/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/go/libraries/" class="md-nav__link">
        Using instrumentation libraries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/go/manual/" class="md-nav__link">
        Manual Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/go/resources/" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/go/sampling/" class="md-nav__link">
        Sampling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/java/">Java</a>
          
            <label for="__nav_4_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Java
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/java/automatic/">自动</a>
          
            <label for="__nav_4_6_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_6_2">
          <span class="md-nav__icon md-icon"></span>
          自动
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/java/automatic/agent-config/" class="md-nav__link">
        Agent Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/java/automatic/annotations/" class="md-nav__link">
        Annotations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/java/automatic/extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/java/api/" class="md-nav__link">
        API reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/java/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/java/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/java/manual/" class="md-nav__link">
        Manual Instrumentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/js/">JavaScript</a>
          
            <label for="__nav_4_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_7">
          <span class="md-nav__icon md-icon"></span>
          JavaScript
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7_2" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/js/getting-started/">入门</a>
          
            <label for="__nav_4_7_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_7_2">
          <span class="md-nav__icon md-icon"></span>
          入门
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/getting-started/browser/" class="md-nav__link">
        浏览器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/getting-started/nodejs/" class="md-nav__link">
        Node.js
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/js/automatic/">自动</a>
          
            <label for="__nav_4_7_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_7_3">
          <span class="md-nav__icon md-icon"></span>
          自动
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/automatic/module-config/" class="md-nav__link">
        自动插装配置
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/manual/" class="md-nav__link">
        手动
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/libraries/" class="md-nav__link">
        使用工具库
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/exporters/" class="md-nav__link">
        导出器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/context/" class="md-nav__link">
        上下文
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/propagation/" class="md-nav__link">
        传播
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/resources/" class="md-nav__link">
        资源
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/sampling/" class="md-nav__link">
        采样
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/serverless/" class="md-nav__link">
        无服务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/api/" class="md-nav__link">
        API 参考
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/js/examples/" class="md-nav__link">
        示例
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/php/">PHP</a>
          
            <label for="__nav_4_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_8">
          <span class="md-nav__icon md-icon"></span>
          PHP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/php/automatic/" class="md-nav__link">
        Automatic Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/php/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/php/exporters/" class="md-nav__link">
        Exporters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/php/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/php/manual/" class="md-nav__link">
        Manual Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/php/propagation/" class="md-nav__link">
        Propagation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/php/resources/" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/php/sdk/" class="md-nav__link">
        SDK
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/python/">Python</a>
          
            <label for="__nav_4_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_9">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/python/automatic/">自动</a>
          
            <label for="__nav_4_9_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_9_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_9_2">
          <span class="md-nav__icon md-icon"></span>
          自动
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/automatic/operator/" class="md-nav__link">
        Using the OpenTelemetry Operator to Inject Auto-Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/automatic/example/" class="md-nav__link">
        Auto-Instrumentation Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/automatic/agent-config/" class="md-nav__link">
        Agent Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/api/" class="md-nav__link">
        API reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/cookbook/" class="md-nav__link">
        Cookbook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/distro/" class="md-nav__link">
        OpenTelemetry Distro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/exporters/" class="md-nav__link">
        Exporters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/manual/" class="md-nav__link">
        Manual Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/python/mypy/" class="md-nav__link">
        Using mypy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/ruby/">Ruby</a>
          
            <label for="__nav_4_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_10">
          <span class="md-nav__icon md-icon"></span>
          Ruby
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/ruby/api/" class="md-nav__link">
        API reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/ruby/automatic/" class="md-nav__link">
        Automatic instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/ruby/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/ruby/exporters/" class="md-nav__link">
        Exporters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/ruby/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/ruby/manual/" class="md-nav__link">
        Manual Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/ruby/sampling/" class="md-nav__link">
        Sampling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_11" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/rust/">Rust</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_11">
          <span class="md-nav__icon md-icon"></span>
          Rust
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_12" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/swift/">Swift</a>
          
            <label for="__nav_4_12">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_12">
          <span class="md-nav__icon md-icon"></span>
          Swift
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/swift/libraries/" class="md-nav__link">
        Instrumentation Libraries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../instrumentation/swift/manual/" class="md-nav__link">
        Manual Instrumentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_13" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../instrumentation/other/">其它</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_13">
          <span class="md-nav__icon md-icon"></span>
          其它
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../collector/">收集器</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          收集器
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/getting-started/" class="md-nav__link">
        入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../collector/deployment/">部署</a>
          
            <label for="__nav_5_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          部署
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/deployment/no-collector/" class="md-nav__link">
        没有收集器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/deployment/agent/" class="md-nav__link">
        代理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/deployment/gateway/" class="md-nav__link">
        网关
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/configuration/" class="md-nav__link">
        配置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/management/" class="md-nav__link">
        管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/distributions/" class="md-nav__link">
        分布
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/troubleshooting/" class="md-nav__link">
        故障排除
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/scaling/" class="md-nav__link">
        扩容采集器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/transforming-telemetry/" class="md-nav__link">
        改变遥测
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/custom-collector/" class="md-nav__link">
        构建自定义收集器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/custom-auth/" class="md-nav__link">
        构建自定义身份验证器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../collector/trace-receiver/" class="md-nav__link">
        建立跟踪接收器
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../k8s/">K8S</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          K8S
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../k8s/operator/">Operator</a>
          
            <label for="__nav_6_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Operator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/operator/automatic/" class="md-nav__link">
        注入自动插装
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_3" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../k8s/operator/apis/">api</a>
          
            <label for="__nav_6_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_2_3">
          <span class="md-nav__icon md-icon"></span>
          api
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/operator/apis/Instrumentation/" class="md-nav__link">
        Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/operator/apis/OpenTelemetryCollector/" class="md-nav__link">
        OpenTelemetryCollector
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../k8s/collector/">Collector</a>
          
            <label for="__nav_6_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Collector
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/vision/" class="md-nav__link">
        采集器的长期愿景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/design/" class="md-nav__link">
        收集器架构
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/monitoring/" class="md-nav__link">
        监控
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/performance/" class="md-nav__link">
        收集器性能
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/security-best-practices/" class="md-nav__link">
        安全
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/roadmap/" class="md-nav__link">
        长期路线图
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/ga-roadmap/" class="md-nav__link">
        采集器 GA 路线图
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/observability/" class="md-nav__link">
        收集器可观测性
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/processing/" class="md-nav__link">
        收集器处理器探索
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/release/" class="md-nav__link">
        收集器释放程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/scraping-receivers/" class="md-nav__link">
        抓取指标接收器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/service-extensions/" class="md-nav__link">
        收集器:扩展
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/standard-warnings/" class="md-nav__link">
        标准的警告
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../k8s/collector/troubleshooting/" class="md-nav__link">
        故障排除
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../faas/">FaaS</a>
          
            <label for="__nav_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          FaaS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../faas/lambda-auto-instrument/" class="md-nav__link">
        Lambda Auto-Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../faas/lambda-collector/" class="md-nav__link">
        Lambda Collector Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../faas/lambda-manual-instrument/" class="md-nav__link">
        Lambda Manual Instrumentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../demo/">演示</a>
          
            <label for="__nav_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          演示
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/architecture/" class="md-nav__link">
        演示架构
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../demo/collector-data-flow-dashboard/">采集器数据流仪表板</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_3">
          <span class="md-nav__icon md-icon"></span>
          采集器数据流仪表板
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/development/" class="md-nav__link">
        开发
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/docker-deployment/" class="md-nav__link">
        Docker 部署
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/feature-flags/" class="md-nav__link">
        功能标志
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/features/" class="md-nav__link">
        演示功能
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/forking/" class="md-nav__link">
        分叉演示存储库
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/kubernetes-deployment/" class="md-nav__link">
        Kubernetes 开发
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/manual-span-attributes/" class="md-nav__link">
        手动跨度属性
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/metric-features/" class="md-nav__link">
        按服务度量特征覆盖率
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_12" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../demo/requirements/">需求</a>
          
            <label for="__nav_8_12">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_12">
          <span class="md-nav__icon md-icon"></span>
          需求
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/requirements/application/" class="md-nav__link">
        应用需求
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/requirements/architecture/" class="md-nav__link">
        架构需求
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/requirements/opentelemetry/" class="md-nav__link">
        OpenTelemetry 需求
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/requirements/system/" class="md-nav__link">
        系统需求
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_13" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../demo/scenarios/">场景</a>
          
            <label for="__nav_8_13">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_13">
          <span class="md-nav__icon md-icon"></span>
          场景
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_13_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../demo/scenarios/recommendation-cache/">建议缓存</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_13_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_13_2">
          <span class="md-nav__icon md-icon"></span>
          建议缓存
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_14" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../demo/screenshots/">演示截图</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_14">
          <span class="md-nav__icon md-icon"></span>
          演示截图
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/service-table/" class="md-nav__link">
        服务的角色
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_16" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../demo/services/">服务</a>
          
            <label for="__nav_8_16">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_16_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_16">
          <span class="md-nav__icon md-icon"></span>
          服务
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/accounting/" class="md-nav__link">
        Accounting Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/ad/" class="md-nav__link">
        Ad Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/cart/" class="md-nav__link">
        Cart Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/checkout/" class="md-nav__link">
        Checkout Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/currency/" class="md-nav__link">
        Currency Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/email/" class="md-nav__link">
        Email Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/feature-flag/" class="md-nav__link">
        Feature Flag Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/fraud-detection/" class="md-nav__link">
        Fraud Detection Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/frontend-proxy/" class="md-nav__link">
        Frontend Proxy (Envoy)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/frontend/" class="md-nav__link">
        Frontend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/kafka/" class="md-nav__link">
        Kafka
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/load-generator/" class="md-nav__link">
        Load Generator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/payment/" class="md-nav__link">
        Payment Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/product-catalog/" class="md-nav__link">
        Product Catalog Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/quote/" class="md-nav__link">
        Quote Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/recommendation/" class="md-nav__link">
        Recommendation Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/services/shipping/" class="md-nav__link">
        Shipping Service
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/tests/" class="md-nav__link">
        测试
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../demo/trace-features/" class="md-nav__link">
        按服务跟踪功能覆盖
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">规范</a>
          
            <label for="__nav_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          规范
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        概述
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../baggage/">baggage</a>
          
            <label for="__nav_9_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_3">
          <span class="md-nav__icon md-icon"></span>
          baggage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../baggage/api/" class="md-nav__link">
        Baggage API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../library-guidelines/" class="md-nav__link">
        客户端设计原则
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../common/">通用规范</a>
          
            <label for="__nav_9_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_5">
          <span class="md-nav__icon md-icon"></span>
          通用规范
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common/attribute-naming/" class="md-nav__link">
        属性命名
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common/attribute-requirement-level/" class="md-nav__link">
        语义约定的属性需求级别
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common/attribute-type-mapping/" class="md-nav__link">
        将任意数据映射到 OTLP AnyValue
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common/mapping-to-non-otlp/" class="md-nav__link">
        OpenTelemetry 转换到非 otlp 格式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common/url/" class="md-nav__link">
        URL 的语义约定
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../compatibility/">兼容性</a>
          
            <label for="__nav_9_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_6">
          <span class="md-nav__icon md-icon"></span>
          兼容性
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility/logging_trace_context/" class="md-nav__link">
        以非 OTLP 日志格式跟踪上下文
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility/opencensus/" class="md-nav__link">
        OpenCensus 兼容
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility/opentracing/" class="md-nav__link">
        OpenTracing 兼容
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility/prometheus_and_openmetrics/" class="md-nav__link">
        普罗米修斯和 OpenMetrics 兼容性
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_7" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../configuration/">配置</a>
          
            <label for="__nav_9_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_7">
          <span class="md-nav__icon md-icon"></span>
          配置
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/file-configuration/" class="md-nav__link">
        File configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/sdk-configuration/" class="md-nav__link">
        Sdk configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/sdk-environment-variables/" class="md-nav__link">
        Sdk environment variables
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_8" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../context/">上下文</a>
          
            <label for="__nav_9_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_8">
          <span class="md-nav__icon md-icon"></span>
          上下文
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../context/api-propagators/" class="md-nav__link">
        繁殖专家 API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../document-status/" class="md-nav__link">
        文档状态的定义
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../error-handling/" class="md-nav__link">
        错误处理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        术语表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../library-layout/" class="md-nav__link">
        项目包布局
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_13" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../logs/">日志</a>
          
            <label for="__nav_9_13">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_13">
          <span class="md-nav__icon md-icon"></span>
          日志
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/bridge-api/" class="md-nav__link">
        日志桥 API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/data-model-appendix/" class="md-nav__link">
        数据模型附录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/data-model/" class="md-nav__link">
        日志数据模型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/event-api/" class="md-nav__link">
        事件 API 接口
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/noop/" class="md-nav__link">
        Noop
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/sdk/" class="md-nav__link">
        日志 SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_13_8" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../logs/semantic_conventions/">语义约定</a>
          
            <label for="__nav_9_13_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_13_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_13_8">
          <span class="md-nav__icon md-icon"></span>
          语义约定
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/semantic_conventions/events/" class="md-nav__link">
        事件属性的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/semantic_conventions/exceptions/" class="md-nav__link">
        异常的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/semantic_conventions/feature-flags/" class="md-nav__link">
        特征标志计算的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/semantic_conventions/general/" class="md-nav__link">
        通用属性
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../logs/semantic_conventions/media/" class="md-nav__link">
        日志媒体的语义约定
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_14" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../metrics/">指标</a>
          
            <label for="__nav_9_14">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_14">
          <span class="md-nav__icon md-icon"></span>
          指标
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/api/" class="md-nav__link">
        Api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/data-model/" class="md-nav__link">
        Data model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/metric-requirement-level/" class="md-nav__link">
        语义约定的度量需求级别
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/noop/" class="md-nav__link">
        Noop
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/sdk/" class="md-nav__link">
        Sdk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/supplementary-guidelines/" class="md-nav__link">
        补充指南
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_14_8" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../metrics/sdk_exporters/">SDK出口商</a>
          
            <label for="__nav_9_14_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_14_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_14_8">
          <span class="md-nav__icon md-icon"></span>
          SDK出口商
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/sdk_exporters/in-memory/" class="md-nav__link">
        In memory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/sdk_exporters/otlp/" class="md-nav__link">
        Otlp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/sdk_exporters/prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/sdk_exporters/stdout/" class="md-nav__link">
        Stdout
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_14_9" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../metrics/semantic_conventions/">语义约定</a>
          
            <label for="__nav_9_14_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_14_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_14_9">
          <span class="md-nav__icon md-icon"></span>
          语义约定
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/semantic_conventions/database-metrics/" class="md-nav__link">
        Database metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/semantic_conventions/faas-metrics/" class="md-nav__link">
        Faas metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/semantic_conventions/hardware-metrics/" class="md-nav__link">
        Hardware metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/semantic_conventions/http-metrics/" class="md-nav__link">
        Http metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/semantic_conventions/process-metrics/" class="md-nav__link">
        Process metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/semantic_conventions/rpc-metrics/" class="md-nav__link">
        Rpc metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/semantic_conventions/runtime-environment-metrics/" class="md-nav__link">
        Runtime environment metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/semantic_conventions/system-metrics/" class="md-nav__link">
        System metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_14_9_10" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../metrics/semantic_conventions/instrumentation/">插装</a>
          
            <label for="__nav_9_14_9_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_14_9_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_14_9_10">
          <span class="md-nav__icon md-icon"></span>
          插装
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/semantic_conventions/instrumentation/kafka/" class="md-nav__link">
        Kafka
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../performance-benchmark/" class="md-nav__link">
        API 性能基准
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../performance/" class="md-nav__link">
        API 性能和阻塞
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../project-management/" class="md-nav__link">
        项目管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_18" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../protocol/">协议</a>
          
            <label for="__nav_9_18">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_18_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_18">
          <span class="md-nav__icon md-icon"></span>
          协议
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/design-goals/" class="md-nav__link">
        OpenTelemetry 有线协议的设计目标
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/exporter/" class="md-nav__link">
        OpenTelemetry 协议导出器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/file-exporter/" class="md-nav__link">
        OpenTelemetry 协议文件导出器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/otlp/" class="md-nav__link">
        OpenTelemetry 协议规范
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/requirements/" class="md-nav__link">
        OpenTelemetry 协议要求
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_19" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../resource/">资源</a>
          
            <label for="__nav_9_19">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_19_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_19">
          <span class="md-nav__icon md-icon"></span>
          资源
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/sdk/" class="md-nav__link">
        Resource SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_19_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../resource/semantic_conventions/">语义约定</a>
          
            <label for="__nav_9_19_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_19_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_19_3">
          <span class="md-nav__icon md-icon"></span>
          语义约定
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/browser/" class="md-nav__link">
        浏览器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/cloud/" class="md-nav__link">
        云
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/container/" class="md-nav__link">
        容器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/deployment_environment/" class="md-nav__link">
        开发环境
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/device/" class="md-nav__link">
        硬件
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/faas/" class="md-nav__link">
        函数即服务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/host/" class="md-nav__link">
        主机
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/k8s/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/os/" class="md-nav__link">
        操作系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/process/" class="md-nav__link">
        进程和进程运行时资源
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/webengine/" class="md-nav__link">
        Web 引擎
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_19_3_13" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9_19_3_13" id="__nav_9_19_3_13_label" tabindex="0">
          云提供商
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_19_3_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_19_3_13">
          <span class="md-nav__icon md-icon"></span>
          云提供商
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_19_3_13_1" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9_19_3_13_1" id="__nav_9_19_3_13_1_label" tabindex="0">
          heroku
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_9_19_3_13_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_19_3_13_1">
          <span class="md-nav__icon md-icon"></span>
          heroku
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/cloud_provider/heroku/" class="md-nav__link">
        Heroku
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_19_3_13_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../resource/semantic_conventions/cloud_provider/aws/">aws</a>
          
            <label for="__nav_9_19_3_13_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_9_19_3_13_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_19_3_13_2">
          <span class="md-nav__icon md-icon"></span>
          aws
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/cloud_provider/aws/ecs/" class="md-nav__link">
        AWS ECS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/cloud_provider/aws/eks/" class="md-nav__link">
        AWS EKS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/cloud_provider/aws/logs/" class="md-nav__link">
        AWS Logs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_19_3_13_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../resource/semantic_conventions/cloud_provider/gcp/">gcp</a>
          
            <label for="__nav_9_19_3_13_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_9_19_3_13_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_19_3_13_3">
          <span class="md-nav__icon md-icon"></span>
          gcp
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/semantic_conventions/cloud_provider/gcp/cloud_run/" class="md-nav__link">
        Google Cloud Run
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_20" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../schemas/">模式</a>
          
            <label for="__nav_9_20">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_20_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_20">
          <span class="md-nav__icon md-icon"></span>
          模式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../schemas/file_format_v1.0.0/" class="md-nav__link">
        File format v1.0.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../schemas/file_format_v1.1.0/" class="md-nav__link">
        File format v1.1.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../semantic-conventions/" class="md-nav__link">
        语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../telemetry-stability/" class="md-nav__link">
        遥测稳定
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_23" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">追踪</a>
          
            <label for="__nav_9_23">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_23_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_9_23">
          <span class="md-nav__icon md-icon"></span>
          追踪
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        追踪 API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        异常
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sdk/" class="md-nav__link">
        追踪 SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tracestate-handling/" class="md-nav__link">
        TraceState 处理
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          TraceState:概率抽样
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        TraceState:概率抽样
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    Definitions
  </a>
  
    <nav class="md-nav" aria-label="Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sampling" class="md-nav__link">
    Sampling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adjusted-count" class="md-nav__link">
    Adjusted count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sampler" class="md-nav__link">
    Sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent-based-sampler" class="md-nav__link">
    Parent-based sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probability-sampler" class="md-nav__link">
    Probability sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consistent-probability-sampler" class="md-nav__link">
    Consistent probability sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-completeness" class="md-nav__link">
    Trace completeness
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-probability-sampler" class="md-nav__link">
    Non-probability sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always-on-consistent-probability-sampler" class="md-nav__link">
    Always-on consistent probability sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always-off-sampler" class="md-nav__link">
    Always-off sampler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consistent-probability-sampling" class="md-nav__link">
    Consistent Probability sampling
  </a>
  
    <nav class="md-nav" aria-label="Consistent Probability sampling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conformance" class="md-nav__link">
    Conformance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#completeness-guarantee" class="md-nav__link">
    Completeness guarantee
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-invariants" class="md-nav__link">
    Context invariants
  </a>
  
    <nav class="md-nav" aria-label="Context invariants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sampled-flag" class="md-nav__link">
    Sampled flag
  </a>
  
    <nav class="md-nav" aria-label="Sampled flag">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-inconsistent-p-values-are-unset" class="md-nav__link">
    Requirement: Inconsistent p-values are unset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-value" class="md-nav__link">
    P-value
  </a>
  
    <nav class="md-nav" aria-label="P-value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-out-of-range-p-values-are-unset" class="md-nav__link">
    Requirement: Out-of-range p-values are unset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-value" class="md-nav__link">
    R-value
  </a>
  
    <nav class="md-nav" aria-label="R-value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-out-of-range-r-values-unset-both-p-and-r" class="md-nav__link">
    Requirement: Out-of-range r-values unset both p and r
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-r-value-is-generated-with-the-correct-probabilities" class="md-nav__link">
    Requirement: R-value is generated with the correct probabilities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-context-invariants" class="md-nav__link">
    Examples: Context invariants
  </a>
  
    <nav class="md-nav" aria-label="Examples: Context invariants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-probability-sampled-context" class="md-nav__link">
    Example: Probability sampled context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-probability-unsampled" class="md-nav__link">
    Example: Probability unsampled
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samplers" class="md-nav__link">
    Samplers
  </a>
  
    <nav class="md-nav" aria-label="Samplers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parentconsistentprobabilitybased-sampler" class="md-nav__link">
    ParentConsistentProbabilityBased sampler
  </a>
  
    <nav class="md-nav" aria-label="ParentConsistentProbabilityBased sampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-parentconsistentprobabilitybased-api" class="md-nav__link">
    Requirement: ParentConsistentProbabilityBased API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-parentconsistentprobabilitybased-does-not-modify-valid-tracestate" class="md-nav__link">
    Requirement: ParentConsistentProbabilityBased does not modify valid tracestate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-parentconsistentprobabilitybased-calls-the-configured-root-sampler-for-root-spans" class="md-nav__link">
    Requirement: ParentConsistentProbabilityBased calls the configured root sampler for root spans
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-parentconsistentprobabilitybased-respects-the-sampled-flag-for-non-root-spans" class="md-nav__link">
    Requirement: ParentConsistentProbabilityBased respects the sampled flag for non-root spans
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consistentprobabilitybased-sampler" class="md-nav__link">
    ConsistentProbabilityBased sampler
  </a>
  
    <nav class="md-nav" aria-label="ConsistentProbabilityBased sampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-traceidratiobased-api-compatibility" class="md-nav__link">
    Requirement: TraceIdRatioBased API compatibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-sets-r-for-root-span" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler sets r for root span
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-unsets-p-when-not-sampled" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler unsets p when not sampled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-sets-p-when-sampled" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler sets p when sampled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-records-unbiased-adjusted-counts" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler records unbiased adjusted counts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-sets-r-for-non-root-span" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler sets r for non-root span
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-decides-not-to-sample-for-probabilities-less-than-2-62" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler decides not to sample for probabilities less than 2**-62
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-consistent-probability-samplers" class="md-nav__link">
    Examples: Consistent probability samplers
  </a>
  
    <nav class="md-nav" aria-label="Examples: Consistent probability samplers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-setting-r-value-for-a-root-span" class="md-nav__link">
    Example: Setting R-value for a root span
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-handling-inconsistent-p-value" class="md-nav__link">
    Example: Handling inconsistent P-value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-handling-corrupt-r-value" class="md-nav__link">
    Example: Handling corrupt R-value
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composition-rules" class="md-nav__link">
    Composition rules
  </a>
  
    <nav class="md-nav" aria-label="Composition rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list-of-requirements" class="md-nav__link">
    List of requirements
  </a>
  
    <nav class="md-nav" aria-label="List of requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-combining-multiple-sampling-decisions-using-logical-or" class="md-nav__link">
    Requirement: Combining multiple sampling decisions using logical or
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-combine-multiple-consistent-probability-samplers-using-the-minimum-p-value" class="md-nav__link">
    Requirement: Combine multiple consistent probability samplers using the minimum p-value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-unset-p-when-multiple-consistent-probability-samplers-decide-not-to-sample" class="md-nav__link">
    Requirement: Unset p when multiple consistent probability samplers decide not to sample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-use-probability-sampler-p-value-when-its-decision-to-sample-is-combined-with-non-probability-samplers" class="md-nav__link">
    Requirement: Use probability sampler p-value when its decision to sample is combined with non-probability samplers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-use-p-value-63-when-a-probability-sampler-decision-not-to-sample-is-combined-with-a-non-probability-sampler-decision-to-sample" class="md-nav__link">
    Requirement: Use p-value 63 when a probability sampler decision not to sample is combined with a non-probability sampler decision to sample
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-composition" class="md-nav__link">
    Examples: Composition
  </a>
  
    <nav class="md-nav" aria-label="Examples: Composition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-probability-and-non-probability-sampler-in-a-root-context" class="md-nav__link">
    Example: Probability and non-probability sampler in a root context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-two-consistent-probability-samplers" class="md-nav__link">
    Example: Two consistent probability samplers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#producer-and-consumer-recommendations" class="md-nav__link">
    Producer and consumer recommendations
  </a>
  
    <nav class="md-nav" aria-label="Producer and consumer recommendations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trace-producer-completeness" class="md-nav__link">
    Trace producer: completeness
  </a>
  
    <nav class="md-nav" aria-label="Trace producer: completeness">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommenendation-use-non-descending-power-of-two-probabilities" class="md-nav__link">
    Recommenendation: use non-descending power-of-two probabilities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-producer-correctness" class="md-nav__link">
    Trace producer: correctness
  </a>
  
    <nav class="md-nav" aria-label="Trace producer: correctness">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommenendation-sampler-delegation" class="md-nav__link">
    Recommenendation: sampler delegation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-producer-interoperability-with-parentbased-sampler" class="md-nav__link">
    Trace producer: interoperability with ParentBased sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-producer-interoperability-with-traceidratiobased-sampler" class="md-nav__link">
    Trace producer: interoperability with TraceIDRatioBased sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-consumer" class="md-nav__link">
    Trace consumer
  </a>
  
    <nav class="md-nav" aria-label="Trace consumer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommendation-recognize-inconsistent-r-values" class="md-nav__link">
    Recommendation: Recognize inconsistent r-values
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appendix-statistical-test-requirements" class="md-nav__link">
    Appendix: Statistical test requirements
  </a>
  
    <nav class="md-nav" aria-label="Appendix: Statistical test requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-procedure-non-powers-of-two" class="md-nav__link">
    Test procedure: non-powers of two
  </a>
  
    <nav class="md-nav" aria-label="Test procedure: non-powers of two">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-pass-12-non-power-of-two-statistical-tests" class="md-nav__link">
    Requirement: Pass 12 non-power-of-two statistical tests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-procedure-exact-powers-of-two" class="md-nav__link">
    Test procedure: exact powers of two
  </a>
  
    <nav class="md-nav" aria-label="Test procedure: exact powers of two">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-pass-3-power-of-two-statistical-tests" class="md-nav__link">
    Requirement: Pass 3 power-of-two statistical tests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-implementation" class="md-nav__link">
    Test implementation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix" class="md-nav__link">
    Appendix
  </a>
  
    <nav class="md-nav" aria-label="Appendix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods-for-generating-r-values" class="md-nav__link">
    Methods for generating R-values
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_23_7" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9_23_7" id="__nav_9_23_7_label" tabindex="0">
          SDK导出器
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_23_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_23_7">
          <span class="md-nav__icon md-icon"></span>
          SDK导出器
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sdk_exporters/jaeger/" class="md-nav__link">
        OpenTelemetry to Jaeger Transformation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sdk_exporters/zipkin/" class="md-nav__link">
        OpenTelemetry to Zipkin Transformation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_23_8" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../semantic_conventions/">语义约定</a>
          
            <label for="__nav_9_23_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_23_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_23_8">
          <span class="md-nav__icon md-icon"></span>
          语义约定
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/cloudevents/" class="md-nav__link">
        CloudEvents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/compatibility/" class="md-nav__link">
        兼容性组件的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/database/" class="md-nav__link">
        数据库客户机调用的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/exceptions/" class="md-nav__link">
        异常的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/faas/" class="md-nav__link">
        FaaS 的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/feature-flags/" class="md-nav__link">
        特性标志的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/http/" class="md-nav__link">
        HTTP 跨的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/messaging/" class="md-nav__link">
        消息传递系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/rpc/" class="md-nav__link">
        RPC 跨越的语义约定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/span-general/" class="md-nav__link">
        通用属性
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_23_8_12" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9_23_8_12" id="__nav_9_23_8_12_label" tabindex="0">
          插装
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_23_8_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_23_8_12">
          <span class="md-nav__icon md-icon"></span>
          插装
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/instrumentation/aws-lambda/" class="md-nav__link">
        Instrumenting AWS Lambda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/instrumentation/aws-sdk/" class="md-nav__link">
        Semantic conventions for AWS SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_conventions/instrumentation/graphql/" class="md-nav__link">
        Semantic conventions for GraphQL Server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/" class="md-nav__link">
        供应商
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../versioning-and-stability/" class="md-nav__link">
        客户端的版本控制和稳定性
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../ecosystem/">生态系统</a>
          
            <label for="__nav_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          生态系统
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../ecosystem/demo/" class="md-nav__link">
        开遥演示
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../ecosystem/integrations/" class="md-nav__link">
        集成
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../ecosystem/vendors/" class="md-nav__link">
        供应商
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../ecosystem/registry/">注册表</a>
          
            <label for="__nav_10_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10_5">
          <span class="md-nav__icon md-icon"></span>
          注册表
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../ecosystem/registry/adding/" class="md-nav__link">
        添加到注册表
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../status/" class="md-nav__link">
        状态
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../community/">社区</a>
          
            <label for="__nav_12">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          社区
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../community/marketing-guidelines/" class="md-nav__link">
        贡献组织开放遥测营销指南
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../community/end-user/">终端用户</a>
          
            <label for="__nav_12_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_12_3">
          <span class="md-nav__icon md-icon"></span>
          终端用户
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../community/end-user/discussion-group/" class="md-nav__link">
        Monthly Discussion Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../community/end-user/feedback-survey/" class="md-nav__link">
        Feedback Survey
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../community/end-user/interviews-feedback/" class="md-nav__link">
        Interviews or Feedback Sessions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../community/end-user/otel-in-practice/" class="md-nav__link">
        OpenTelemetry In Practice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../community/end-user/slack-channel/" class="md-nav__link">
        Slack Channel
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
      
      
        
          
            
          
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../blog/">博客</a>
          
            <label for="__nav_13">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          博客
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2019/opentelemetry-governance-committee-explained/" class="md-nav__link">
        OpenTelemetry Governance Committee Explained
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2021/auto-instrumentation-k8s/" class="md-nav__link">
        Using OpenTelemetry auto-instrumentation/agents in Kubernetes (Medium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2021/collector/" class="md-nav__link">
        OpenTelemetry Collector achieves Tracing stability milestone (Medium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2021/cpp/" class="md-nav__link">
        OpenTelemetry C++ v1.0 — what’s there, and what next (Medium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2021/gc-election/" class="md-nav__link">
        Announcing the 2021 OpenTelemetry Governance Committee Election (Medium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2021/malabi/" class="md-nav__link">
        Trace-Based Testing with OpenTelemetry: Meet Open Source Malabi (Medium)

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2021/otel-gc/" class="md-nav__link">
        Welcome to the incoming 2021 OpenTelemetry Governance Committee (Medium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2021/python/" class="md-nav__link">
        Announcing OpenTelemetry Python 1.0 (Medium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2021/swift/" class="md-nav__link">
        OpenTelemetry Swift 1.0 Beta (Medium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2021/womens-day/" class="md-nav__link">
        OpenTelemetry Observes International Women's Day 2021 (Medium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/announcing-community-manager/" class="md-nav__link">
        Announcing the OpenTelemetry Community Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/dotnet-instrumentation-first-beta/" class="md-nav__link">
        OpenTelemetry .NET Automatic Instrumentation Releases its first Beta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/dotnet-instrumentation-metrics/" class="md-nav__link">
        OpenTelemetry .NET Automatic Instrumentation metric signal support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/gc-candidates/" class="md-nav__link">
        Final list of candidates for the 2022 OpenTelemetry Governance Committee
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/gc-election-results/" class="md-nav__link">
        Announcing the 2022 Governance Committee Election Results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/gc-elections/" class="md-nav__link">
        Announcing the 2022 OpenTelemetry Governance Committee Election
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/kubecon-na-project-update/" class="md-nav__link">
        OpenTelemetry Project and Roadmap Update from Kubecon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/kubecon-na/" class="md-nav__link">
        Join us for OpenTelemetry Talks and Activities at Kubecon NA 2022
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/metrics-announcement/" class="md-nav__link">
        OpenTelemetry Metrics Release Candidates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/new-end-user-resources/" class="md-nav__link">
        Introducing new resources for OpenTelemetry end users to connect and discover best practices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/otel-in-practice/" class="md-nav__link">
        OpenTelemetry in Practice: Kubernetes & the Collector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/otel-tuesday-v1-sunset/" class="md-nav__link">
        OpenTelemetry Tuesdays, Signing Off!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/otel-unplugged-kubecon-na/" class="md-nav__link">
        OTel Unplugged at KubeCon NA 2022!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/troubleshooting-nodejs/" class="md-nav__link">
        Checklist for TroublesShooting OpenTelemetry Node.js Tracing Issues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/v1.0-trio/" class="md-nav__link">
        OpenTelemetry Erlang/Elixir, Javascript, and Ruby v1.0 (Medium)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/welcome/" class="md-nav__link">
        Welcome to the OpenTelemetry blog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/announcing-opentelemetry-demo-release/" class="md-nav__link">
        OpenTelemetry Demo now Generally Available!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/apisix/" class="md-nav__link">
        Apache APISIX Integrates with OpenTelemetry to Collect Tracing Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/collector-builder-sample/" class="md-nav__link">
        Using the Collector Builder with Sample Configs on GCP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/debug-otel-with-otel/" class="md-nav__link">
        How we used OpenTelemetry to fix a bug in OpenTelemetry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/demo-announcement/" class="md-nav__link">
        Announcing a Community Demo for OpenTelemetry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/end-user-discussion-group-apac/" class="md-nav__link">
        End User Discussion Group: New APAC Sessions Announcement!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/exponential-histograms/" class="md-nav__link">
        Exponential Histograms: Better Data, Zero Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/frontend-overhaul/" class="md-nav__link">
        Front-end Overhaul of the OpenTelemetry Demo (Go to Next.js)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/go-web-app-instrumentation/" class="md-nav__link">
        Go Web-app Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/instrument-apache-httpd-server/" class="md-nav__link">
        Learn how to instrument Apache Http Server with OpenTelemetry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/instrument-kafka-clients/" class="md-nav__link">
        Instrumenting Apache Kafka clients with OpenTelemetry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/instrument-nginx/" class="md-nav__link">
        Learn how to instrument NGINX with OpenTelemetry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/jaeger-native-otlp/" class="md-nav__link">
        Supporting Jaeger with native OTLP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/k8s-metadata/" class="md-nav__link">
        Improved troubleshooting using k8s metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/k8s-otel-expose/" class="md-nav__link">
        Exposing a Collector for cross cluster communication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/knative/" class="md-nav__link">
        Distributed tracing in Knative
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/opamp/" class="md-nav__link">
        Using OpenTelemetry OpAMP to modify service telemetry on the go
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/otel-demo-app-nomad/" class="md-nav__link">
        Running the OpenTelemetry Demo App on HashiCorp Nomad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/tail-sampling/" class="md-nav__link">
        Tail Sampling with OpenTelemetry: Why it’s useful, how to do it, and what to consider
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2022/why-and-how-ebay-pivoted-to-opentelemetry/" class="md-nav__link">
        Why and How eBay Pivoted to OpenTelemetry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/ecs-otel-semconv-convergence/" class="md-nav__link">
        Announcing the Elastic Common Schema (ECS) and OpenTelemetry Semantic Convention Convergence
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/end-user-discussions-01/" class="md-nav__link">
        OpenTelemetry End-User Discussions Summary for January 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/end-user-discussions-02/" class="md-nav__link">
        OpenTelemetry End-User Discussions Summary for February 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/end-user-discussions-03/" class="md-nav__link">
        OpenTelemetry End-User Discussions Summary for March 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/end-user-discussions-04/" class="md-nav__link">
        OpenTelemetry End-User Discussions Summary for April 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/end-user-q-and-a-01/" class="md-nav__link">
        End-User Q&A Series: Using OTel with GraphQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/end-user-q-and-a-02/" class="md-nav__link">
        End-User Q&A Series: Using OTel at Uplight
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/end-user-q-and-a-03/" class="md-nav__link">
        End-User Q&A Series: Using OTel at Farfetch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/exponential-histograms/" class="md-nav__link">
        Exponential Histograms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/http-conventions-stability/" class="md-nav__link">
        Final push to HTTP semantic convention stability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/kubecon-eu/" class="md-nav__link">
        Join us for OpenTelemetry Talks and Activities at KubeCon EU 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/lambda-release/" class="md-nav__link">
        OpenTelemetry Updates Lambda Support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/new-apac-meetings/" class="md-nav__link">
        New APAC Collector-SIG meetings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/otel-in-focus-01/" class="md-nav__link">
        OpenTelemetry in Focus, January 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/otel-in-focus-02/" class="md-nav__link">
        OpenTelemetry in Focus, February 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/otel-in-focus-03/" class="md-nav__link">
        OpenTelemetry in Focus, March 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/otel-in-focus-04/" class="md-nav__link">
        OpenTelemetry in Focus, April 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/otel-in-focus-05/" class="md-nav__link">
        OpenTelemetry in Focus, May 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/outreachy-may-cohort/" class="md-nav__link">
        Call for participation - Outreachy May 2023
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/php-beta-release/" class="md-nav__link">
        Opentelemetry PHP Beta Release
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/submitting-your-first-conference-talk/" class="md-nav__link">
        Submitting Your First Conference Talk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/sunsetting-opencensus/" class="md-nav__link">
        Sunsetting OpenCensus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/demo-birthday/" class="md-nav__link">
        The OpenTelemetry Demo Turns 1(.4)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/histograms-vs-summaries/" class="md-nav__link">
        Histograms vs Summaries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/jmx-metric-insight/" class="md-nav__link">
        Gaining JMX Metric Insights with the OpenTelemetry Java Agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/k8s-runtime-observability/" class="md-nav__link">
        Creating a Kubernetes Cluster with Runtime Observability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/php-auto-instrumentation/" class="md-nav__link">
        OpenTelemetry PHP Auto-Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../blog/2023/why-histograms/" class="md-nav__link">
        Why Histograms?
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
          其它
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          其它
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../search/" class="md-nav__link">
        Search Results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tags/" class="md-nav__link">
        tags
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    Definitions
  </a>
  
    <nav class="md-nav" aria-label="Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sampling" class="md-nav__link">
    Sampling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adjusted-count" class="md-nav__link">
    Adjusted count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sampler" class="md-nav__link">
    Sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent-based-sampler" class="md-nav__link">
    Parent-based sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probability-sampler" class="md-nav__link">
    Probability sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consistent-probability-sampler" class="md-nav__link">
    Consistent probability sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-completeness" class="md-nav__link">
    Trace completeness
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-probability-sampler" class="md-nav__link">
    Non-probability sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always-on-consistent-probability-sampler" class="md-nav__link">
    Always-on consistent probability sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always-off-sampler" class="md-nav__link">
    Always-off sampler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consistent-probability-sampling" class="md-nav__link">
    Consistent Probability sampling
  </a>
  
    <nav class="md-nav" aria-label="Consistent Probability sampling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conformance" class="md-nav__link">
    Conformance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#completeness-guarantee" class="md-nav__link">
    Completeness guarantee
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-invariants" class="md-nav__link">
    Context invariants
  </a>
  
    <nav class="md-nav" aria-label="Context invariants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sampled-flag" class="md-nav__link">
    Sampled flag
  </a>
  
    <nav class="md-nav" aria-label="Sampled flag">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-inconsistent-p-values-are-unset" class="md-nav__link">
    Requirement: Inconsistent p-values are unset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#p-value" class="md-nav__link">
    P-value
  </a>
  
    <nav class="md-nav" aria-label="P-value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-out-of-range-p-values-are-unset" class="md-nav__link">
    Requirement: Out-of-range p-values are unset
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-value" class="md-nav__link">
    R-value
  </a>
  
    <nav class="md-nav" aria-label="R-value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-out-of-range-r-values-unset-both-p-and-r" class="md-nav__link">
    Requirement: Out-of-range r-values unset both p and r
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-r-value-is-generated-with-the-correct-probabilities" class="md-nav__link">
    Requirement: R-value is generated with the correct probabilities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-context-invariants" class="md-nav__link">
    Examples: Context invariants
  </a>
  
    <nav class="md-nav" aria-label="Examples: Context invariants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-probability-sampled-context" class="md-nav__link">
    Example: Probability sampled context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-probability-unsampled" class="md-nav__link">
    Example: Probability unsampled
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samplers" class="md-nav__link">
    Samplers
  </a>
  
    <nav class="md-nav" aria-label="Samplers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parentconsistentprobabilitybased-sampler" class="md-nav__link">
    ParentConsistentProbabilityBased sampler
  </a>
  
    <nav class="md-nav" aria-label="ParentConsistentProbabilityBased sampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-parentconsistentprobabilitybased-api" class="md-nav__link">
    Requirement: ParentConsistentProbabilityBased API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-parentconsistentprobabilitybased-does-not-modify-valid-tracestate" class="md-nav__link">
    Requirement: ParentConsistentProbabilityBased does not modify valid tracestate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-parentconsistentprobabilitybased-calls-the-configured-root-sampler-for-root-spans" class="md-nav__link">
    Requirement: ParentConsistentProbabilityBased calls the configured root sampler for root spans
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-parentconsistentprobabilitybased-respects-the-sampled-flag-for-non-root-spans" class="md-nav__link">
    Requirement: ParentConsistentProbabilityBased respects the sampled flag for non-root spans
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consistentprobabilitybased-sampler" class="md-nav__link">
    ConsistentProbabilityBased sampler
  </a>
  
    <nav class="md-nav" aria-label="ConsistentProbabilityBased sampler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-traceidratiobased-api-compatibility" class="md-nav__link">
    Requirement: TraceIdRatioBased API compatibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-sets-r-for-root-span" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler sets r for root span
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-unsets-p-when-not-sampled" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler unsets p when not sampled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-sets-p-when-sampled" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler sets p when sampled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-records-unbiased-adjusted-counts" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler records unbiased adjusted counts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-sets-r-for-non-root-span" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler sets r for non-root span
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-consistentprobabilitybased-sampler-decides-not-to-sample-for-probabilities-less-than-2-62" class="md-nav__link">
    Requirement: ConsistentProbabilityBased sampler decides not to sample for probabilities less than 2**-62
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-consistent-probability-samplers" class="md-nav__link">
    Examples: Consistent probability samplers
  </a>
  
    <nav class="md-nav" aria-label="Examples: Consistent probability samplers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-setting-r-value-for-a-root-span" class="md-nav__link">
    Example: Setting R-value for a root span
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-handling-inconsistent-p-value" class="md-nav__link">
    Example: Handling inconsistent P-value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-handling-corrupt-r-value" class="md-nav__link">
    Example: Handling corrupt R-value
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composition-rules" class="md-nav__link">
    Composition rules
  </a>
  
    <nav class="md-nav" aria-label="Composition rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list-of-requirements" class="md-nav__link">
    List of requirements
  </a>
  
    <nav class="md-nav" aria-label="List of requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-combining-multiple-sampling-decisions-using-logical-or" class="md-nav__link">
    Requirement: Combining multiple sampling decisions using logical or
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-combine-multiple-consistent-probability-samplers-using-the-minimum-p-value" class="md-nav__link">
    Requirement: Combine multiple consistent probability samplers using the minimum p-value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-unset-p-when-multiple-consistent-probability-samplers-decide-not-to-sample" class="md-nav__link">
    Requirement: Unset p when multiple consistent probability samplers decide not to sample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-use-probability-sampler-p-value-when-its-decision-to-sample-is-combined-with-non-probability-samplers" class="md-nav__link">
    Requirement: Use probability sampler p-value when its decision to sample is combined with non-probability samplers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirement-use-p-value-63-when-a-probability-sampler-decision-not-to-sample-is-combined-with-a-non-probability-sampler-decision-to-sample" class="md-nav__link">
    Requirement: Use p-value 63 when a probability sampler decision not to sample is combined with a non-probability sampler decision to sample
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-composition" class="md-nav__link">
    Examples: Composition
  </a>
  
    <nav class="md-nav" aria-label="Examples: Composition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-probability-and-non-probability-sampler-in-a-root-context" class="md-nav__link">
    Example: Probability and non-probability sampler in a root context
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-two-consistent-probability-samplers" class="md-nav__link">
    Example: Two consistent probability samplers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#producer-and-consumer-recommendations" class="md-nav__link">
    Producer and consumer recommendations
  </a>
  
    <nav class="md-nav" aria-label="Producer and consumer recommendations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trace-producer-completeness" class="md-nav__link">
    Trace producer: completeness
  </a>
  
    <nav class="md-nav" aria-label="Trace producer: completeness">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommenendation-use-non-descending-power-of-two-probabilities" class="md-nav__link">
    Recommenendation: use non-descending power-of-two probabilities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-producer-correctness" class="md-nav__link">
    Trace producer: correctness
  </a>
  
    <nav class="md-nav" aria-label="Trace producer: correctness">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommenendation-sampler-delegation" class="md-nav__link">
    Recommenendation: sampler delegation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-producer-interoperability-with-parentbased-sampler" class="md-nav__link">
    Trace producer: interoperability with ParentBased sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-producer-interoperability-with-traceidratiobased-sampler" class="md-nav__link">
    Trace producer: interoperability with TraceIDRatioBased sampler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-consumer" class="md-nav__link">
    Trace consumer
  </a>
  
    <nav class="md-nav" aria-label="Trace consumer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommendation-recognize-inconsistent-r-values" class="md-nav__link">
    Recommendation: Recognize inconsistent r-values
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appendix-statistical-test-requirements" class="md-nav__link">
    Appendix: Statistical test requirements
  </a>
  
    <nav class="md-nav" aria-label="Appendix: Statistical test requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-procedure-non-powers-of-two" class="md-nav__link">
    Test procedure: non-powers of two
  </a>
  
    <nav class="md-nav" aria-label="Test procedure: non-powers of two">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-pass-12-non-power-of-two-statistical-tests" class="md-nav__link">
    Requirement: Pass 12 non-power-of-two statistical tests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-procedure-exact-powers-of-two" class="md-nav__link">
    Test procedure: exact powers of two
  </a>
  
    <nav class="md-nav" aria-label="Test procedure: exact powers of two">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirement-pass-3-power-of-two-statistical-tests" class="md-nav__link">
    Requirement: Pass 3 power-of-two statistical tests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-implementation" class="md-nav__link">
    Test implementation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix" class="md-nav__link">
    Appendix
  </a>
  
    <nav class="md-nav" aria-label="Appendix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods-for-generating-r-values" class="md-nav__link">
    Methods for generating R-values
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="tracestate">TraceState:概率抽样<a class="headerlink" href="#tracestate" title="Permanent link">&para;</a></h1>
<p><strong>Status</strong>: <a href="../../document-status/">Experimental</a></p>
<details>
<summary>Table of Contents</summary>

<!-- toc -->

- [TraceState:概率抽样](#tracestate概率抽样)
  - [Overview](#overview)
    - [Definitions](#definitions)
      - [Sampling](#sampling)
      - [Adjusted count](#adjusted-count)
      - [Sampler](#sampler)
      - [Parent-based sampler](#parent-based-sampler)
      - [Probability sampler](#probability-sampler)
      - [Consistent probability sampler](#consistent-probability-sampler)
      - [Trace completeness](#trace-completeness)
      - [Non-probability sampler](#non-probability-sampler)
      - [Always-on consistent probability sampler](#always-on-consistent-probability-sampler)
      - [Always-off sampler](#always-off-sampler)
  - [Consistent Probability sampling](#consistent-probability-sampling)
    - [Conformance](#conformance)
    - [Completeness guarantee](#completeness-guarantee)
    - [Context invariants](#context-invariants)
      - [Sampled flag](#sampled-flag)
        - [Requirement: Inconsistent p-values are unset](#requirement-inconsistent-p-values-are-unset)
      - [P-value](#p-value)
        - [Requirement: Out-of-range p-values are unset](#requirement-out-of-range-p-values-are-unset)
      - [R-value](#r-value)
        - [Requirement: Out-of-range r-values unset both p and r](#requirement-out-of-range-r-values-unset-both-p-and-r)
        - [Requirement: R-value is generated with the correct probabilities](#requirement-r-value-is-generated-with-the-correct-probabilities)
      - [Examples: Context invariants](#examples-context-invariants)
        - [Example: Probability sampled context](#example-probability-sampled-context)
        - [Example: Probability unsampled](#example-probability-unsampled)
    - [Samplers](#samplers)
      - [ParentConsistentProbabilityBased sampler](#parentconsistentprobabilitybased-sampler)
        - [Requirement: ParentConsistentProbabilityBased API](#requirement-parentconsistentprobabilitybased-api)
        - [Requirement: ParentConsistentProbabilityBased does not modify valid tracestate](#requirement-parentconsistentprobabilitybased-does-not-modify-valid-tracestate)
        - [Requirement: ParentConsistentProbabilityBased calls the configured root sampler for root spans](#requirement-parentconsistentprobabilitybased-calls-the-configured-root-sampler-for-root-spans)
        - [Requirement: ParentConsistentProbabilityBased respects the sampled flag for non-root spans](#requirement-parentconsistentprobabilitybased-respects-the-sampled-flag-for-non-root-spans)
      - [ConsistentProbabilityBased sampler](#consistentprobabilitybased-sampler)
        - [Requirement: TraceIdRatioBased API compatibility](#requirement-traceidratiobased-api-compatibility)
        - [Requirement: ConsistentProbabilityBased sampler sets r for root span](#requirement-consistentprobabilitybased-sampler-sets-r-for-root-span)
        - [Requirement: ConsistentProbabilityBased sampler unsets p when not sampled](#requirement-consistentprobabilitybased-sampler-unsets-p-when-not-sampled)
        - [Requirement: ConsistentProbabilityBased sampler sets p when sampled](#requirement-consistentprobabilitybased-sampler-sets-p-when-sampled)
        - [Requirement: ConsistentProbabilityBased sampler records unbiased adjusted counts](#requirement-consistentprobabilitybased-sampler-records-unbiased-adjusted-counts)
        - [Requirement: ConsistentProbabilityBased sampler sets r for non-root span](#requirement-consistentprobabilitybased-sampler-sets-r-for-non-root-span)
        - [Requirement: ConsistentProbabilityBased sampler decides not to sample for probabilities less than 2\*\*-62](#requirement-consistentprobabilitybased-sampler-decides-not-to-sample-for-probabilities-less-than-2-62)
      - [Examples: Consistent probability samplers](#examples-consistent-probability-samplers)
        - [Example: Setting R-value for a root span](#example-setting-r-value-for-a-root-span)
        - [Example: Handling inconsistent P-value](#example-handling-inconsistent-p-value)
        - [Example: Handling corrupt R-value](#example-handling-corrupt-r-value)
    - [Composition rules](#composition-rules)
      - [List of requirements](#list-of-requirements)
        - [Requirement: Combining multiple sampling decisions using logical `or`](#requirement-combining-multiple-sampling-decisions-using-logical-or)
        - [Requirement: Combine multiple consistent probability samplers using the minimum p-value](#requirement-combine-multiple-consistent-probability-samplers-using-the-minimum-p-value)
        - [Requirement: Unset p when multiple consistent probability samplers decide not to sample](#requirement-unset-p-when-multiple-consistent-probability-samplers-decide-not-to-sample)
        - [Requirement: Use probability sampler p-value when its decision to sample is combined with non-probability samplers](#requirement-use-probability-sampler-p-value-when-its-decision-to-sample-is-combined-with-non-probability-samplers)
        - [Requirement: Use p-value 63 when a probability sampler decision not to sample is combined with a non-probability sampler decision to sample](#requirement-use-p-value-63-when-a-probability-sampler-decision-not-to-sample-is-combined-with-a-non-probability-sampler-decision-to-sample)
      - [Examples: Composition](#examples-composition)
        - [Example: Probability and non-probability sampler in a root context](#example-probability-and-non-probability-sampler-in-a-root-context)
        - [Example: Two consistent probability samplers](#example-two-consistent-probability-samplers)
    - [Producer and consumer recommendations](#producer-and-consumer-recommendations)
      - [Trace producer: completeness](#trace-producer-completeness)
        - [Recommenendation: use non-descending power-of-two probabilities](#recommenendation-use-non-descending-power-of-two-probabilities)
      - [Trace producer: correctness](#trace-producer-correctness)
        - [Recommenendation: sampler delegation](#recommenendation-sampler-delegation)
      - [Trace producer: interoperability with `ParentBased` sampler](#trace-producer-interoperability-with-parentbased-sampler)
      - [Trace producer: interoperability with `TraceIDRatioBased` sampler](#trace-producer-interoperability-with-traceidratiobased-sampler)
      - [Trace consumer](#trace-consumer)
        - [Recommendation: Recognize inconsistent r-values](#recommendation-recognize-inconsistent-r-values)
    - [Appendix: Statistical test requirements](#appendix-statistical-test-requirements)
      - [Test procedure: non-powers of two](#test-procedure-non-powers-of-two)
        - [Requirement: Pass 12 non-power-of-two statistical tests](#requirement-pass-12-non-power-of-two-statistical-tests)
      - [Test procedure: exact powers of two](#test-procedure-exact-powers-of-two)
        - [Requirement: Pass 3 power-of-two statistical tests](#requirement-pass-3-power-of-two-statistical-tests)
      - [Test implementation](#test-implementation)
  - [Appendix](#appendix)
    - [Methods for generating R-values](#methods-for-generating-r-values)

<!-- tocstop -->

</details>

<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Probability sampling allows OpenTelemetry tracing users to lower span collection
costs by the use of randomized sampling techniques. The objectives are:</p>
<ul>
<li>Compatible with the existing W3C trace context <code>sampled</code> flag</li>
<li>Spans can be accurately counted using a Span-to-metrics pipeline</li>
<li>Traces tend to be complete, even though spans may make independent sampling
  decisions.</li>
</ul>
<p>This document specifies an approach based on an "r-value" and a "p-value". At a
very high level, r-value is a source of randomness and p-value encodes the
sampling probability. A context is sampled when <code>p &lt;= r</code>.</p>
<p>Significantly, by including the r-value and p-value in the OpenTelemetry
<code>tracestate</code>, these two values automatically propagate through the context and
are recorded on every Span. This allows Trace consumers to correctly count spans
simply by interpreting the p-value on a given span.</p>
<p>For efficiency, the supported sampling probabilities are limited to powers of
two. P-value is derived from sampling probability, which equals <code>2**-p</code>, thus
p-value is encoded using an unsigned integer.</p>
<p>For example, a p-value of 3 indicates a sampling probability of &#8539;.</p>
<p>Since the W3C trace context does not specify that any of the 128 bits in a
TraceID are true uniform-distributed random bits, the r-value is introduced as
an additional source of randomness.</p>
<p>The recommended method of generating an "r-value" is to count the number of
leading 0s in a string of 62 random bits, however, it is not required to use
this approach.</p>
<h3 id="definitions">Definitions<a class="headerlink" href="#definitions" title="Permanent link">&para;</a></h3>
<h4 id="sampling">Sampling<a class="headerlink" href="#sampling" title="Permanent link">&para;</a></h4>
<p>Sampling is a family of techniques for collecting and analyzing only a fraction
of a complete data set. Individual items that are "sampled" are taken to
represent one or more spans when collected and counted. The representivity of
each span is used in a Span-to-Metrics pipeline to accurately count spans.</p>
<p>Sampling terminology uses "population" to refer to the complete set of data
being sampled from. In OpenTelemetry tracing, "population" refers to all spans.</p>
<p>In probability sampling, the representivity of individual sample items is
generally known, whereas OpenTelemetry also recognizes "non-probability"
sampling approaches, in which representivity is not explicitly quantified.</p>
<h4 id="adjusted-count">Adjusted count<a class="headerlink" href="#adjusted-count" title="Permanent link">&para;</a></h4>
<p>Adjusted count is a measure of representivity, the number of spans in the
population that are represented by the individually sampled span.
Span-to-metrics pipelines can be built by adding the adjusted count of each
sample span to a counter of matching spans.</p>
<p>For probability sampling, adjusted count is defined as the reciprocal (i.e.,
mathematical inverse) of sampling probability.</p>
<p>For non-probability sampling, adjusted count is unknown.</p>
<p>Zero adjusted count is defined in a way that supports composition of probability
and non-probability sampling. Zero is assigned as the adjusted count when a
probability sampler does not select a span.</p>
<p>Thus, there are three meaningfully distinct categories of adjusted count:</p>
<table>
<thead>
<tr>
<th>Adjusted count is</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>Unknown</em></td>
<td>The adjusted count is not known, possibly as a result of a non-probability sampler. Items in this category should not be counted.</td>
</tr>
<tr>
<td><em>Zero</em></td>
<td>The adjusted count is known; the effective count of the item is zero.</td>
</tr>
<tr>
<td><em>Non-zero</em></td>
<td>The adjusted count is known; the effective count of the item is greater than zero.</td>
</tr>
</tbody>
</table>
<h4 id="sampler">Sampler<a class="headerlink" href="#sampler" title="Permanent link">&para;</a></h4>
<p>A Sampler provides configurable logic, used by the SDK, for selecting which
Spans are "recorded" and/or "sampled" in a tracing client library. To "record" a
span means to build a representation of it in the client's memory, which makes
it eligible for being exported. To "sample" a span implies setting the W3C
<code>sampled</code> flag, recording the span, and exporting the span when it is finished.</p>
<p>OpenTelemetry supports spans that are "recorded" and not "sampled" for
in-process observability of live spans (e.g., z-pages).</p>
<p>The Sampler interface and the built-in Samplers defined by OpenTelemetry decide
immediately whether to sample a span, and the child context immediately
propagates the decision.</p>
<h4 id="parent-based-sampler">Parent-based sampler<a class="headerlink" href="#parent-based-sampler" title="Permanent link">&para;</a></h4>
<p>A Sampler that makes its decision to sample based on the W3C <code>sampled</code> flag from
the context is said to use parent-based sampling.</p>
<h4 id="probability-sampler">Probability sampler<a class="headerlink" href="#probability-sampler" title="Permanent link">&para;</a></h4>
<p>A probability Sampler is a Sampler that knows immediately, for each of its
decisions, the probability that the span had of being selected.</p>
<p>Sampling probability is defined as a number less than or equal to 1 and greater
than 0 (i.e., <code>0 &lt; probability &lt;= 1</code>). The case of 0 probability is treated as a
special, non-probabilistic case.</p>
<h4 id="consistent-probability-sampler">Consistent probability sampler<a class="headerlink" href="#consistent-probability-sampler" title="Permanent link">&para;</a></h4>
<p>A consistent probability sampler is a Sampler that supports independent sampling
decisions at each span in a trace while maintaining that traces will be complete
with a certain minimum probability across the trace.</p>
<p>Consistent probability sampling requires that for any span in a given trace, if
a Sampler with lesser sampling probability selects the span for sampling, then
the span would also be selected by a Sampler configured with greater sampling
probability.</p>
<h4 id="trace-completeness">Trace completeness<a class="headerlink" href="#trace-completeness" title="Permanent link">&para;</a></h4>
<p>A trace is said to be complete when all of the spans belonging to the trace are
collected. When at least one span is collected but not all spans are collected,
the trace is considered incomplete.</p>
<p>Trace incompleteness may happen on purpose (e.g., through sampling
configuration), or by accident (e.g., through collection errors). The
OpenTelemetry trace data model supports a <em>one-way</em> test for incompleteness: for
any non-root span, the trace is definitely incomplete if the span's parent span
was not collected.</p>
<p>Incomplete traces that result from sampling configuration (i.e., on purpose) are
known as partial traces. An important subset of the partial traces are those
which are also complete subtraces. A complete subtrace is defined at span S when
every descendent span is collected.</p>
<p>Since the test for an incompleteness is one-way, it is important to know which
sampling configurations may lead to incomplete traces. Sampling configurations
that lead naturally to complete traces and complete subtraces are
<a href="#trace-producer-completeness">discussed below</a>.</p>
<h4 id="non-probability-sampler">Non-probability sampler<a class="headerlink" href="#non-probability-sampler" title="Permanent link">&para;</a></h4>
<p>A non-probability sampler is a Sampler that makes its decisions not based on
chance, but instead uses arbitrary logic and internal state. The adjusted count
of spans sampled by a non-probability sampler is unknown.</p>
<h4 id="always-on-consistent-probability-sampler">Always-on consistent probability sampler<a class="headerlink" href="#always-on-consistent-probability-sampler" title="Permanent link">&para;</a></h4>
<p>An always-on sampler is another name for a consistent probability sampler with
probability equal to one.</p>
<h4 id="always-off-sampler">Always-off sampler<a class="headerlink" href="#always-off-sampler" title="Permanent link">&para;</a></h4>
<p>An always-off Sampler has the effect of disabling a span completely, effectively
excluding it from the population. This is defined as a non-probability sampler,
not a zero-percent probability sampler, because the spans are effectively
unrepresented.</p>
<h2 id="consistent-probability-sampling">Consistent Probability sampling<a class="headerlink" href="#consistent-probability-sampling" title="Permanent link">&para;</a></h2>
<p>The consistent sampling scheme adopted by OpenTelemetry propagates two values
via the context, termed "p-value" and "r-value".</p>
<p>Both fields are propagated via the OpenTelemetry <code>tracestate</code> under the <code>ot</code>
vendor tag using the rules for <a href="../tracestate-handling/">tracestate handling</a>.
Both fields are represented as unsigned decimal integers requiring at most 6
bits of information.</p>
<p>This sampling scheme selects items from among a fixed set of 63 distinct
probability values. The set of supported probabilities includes the integer
powers of two between 1 and 2**-62. Zero probability and probabilities smaller
than 2**-62 are treated as a special case of "ConsistentAlwaysOff" sampler, just
as unit probability (i.e., 100%) describes a special case of
"ConsistentAlwaysOn" sampler.</p>
<p>R-value encodes which among the 63 possibilities will consistently decide to
sample for a given trace. Specifically, r-value specifies the smallest
probability that will decide to sample a given trace in terms of the
corresponding p-value. For example, a trace with r-value 0 will sample spans
configured for 100% sampling, while r-value 1 will sample spans configured for
50% or 100% sampling, and so on through r-value 62, for which a consistent
probability sampler will decide "yes" at every supported probability (i.e.,
greater than or equal to 2**-62).</p>
<p>P-value encodes the adjusted count for child contexts (i.e., consumers of
<code>tracestate</code>) and consumers of sampled spans to record for use in
Span-to-metrics pipelines. A special p-value of 63 is defined to mean zero
adjusted count, which helps define composition rules for non-probability
samplers.</p>
<p>An invariant will be stated that connects the <code>sampled</code> trace flag found in
<code>traceparent</code> context to the r-value and p-value found in <code>tracestate</code> context.</p>
<h3 id="conformance">Conformance<a class="headerlink" href="#conformance" title="Permanent link">&para;</a></h3>
<p>Consumers of OpenTelemetry <code>tracestate</code> data are expected to validate the
probability sampling fields before interpreting the data. This applies to the
two samplers specified here as well as consumers of span data, who are expected
to validate <code>tracestate</code> before interpreting span adjusted counts.</p>
<p>Producers of OpenTelemetry <code>tracestate</code> containing p-value and r-value fields
are required to meet the behavioral requirements stated for the
<code>ConsistentProbabilityBased</code> sampler and to ensure statistically valid outcomes.
A test suite is included in this specification so that users and consumers of
OpenTelemetry <code>tracestate</code> can be assured of accuracy in Span-to-metrics
pipelines.</p>
<h3 id="completeness-guarantee">Completeness guarantee<a class="headerlink" href="#completeness-guarantee" title="Permanent link">&para;</a></h3>
<p>This specification defines consistent sampling for power-of-two sampling
probabilities. When a sampler is configured with a non-power-of-two sampling
probability, the sampler will probabilistically choose between the nearest
powers of two.</p>
<p>When a single consistent probability sampler is used at the root of a trace and
all other spans use a parent-based sampler, the resulting traces are always
complete (ignoring collection errors). This property holds even for
non-power-of-two sampling probabilities.</p>
<p>When multiple consistent probability samplers are used in the same trace, in
general, trace completeness is ensured at the smallest power of two greater than
or equal to the minimum sampling probability across the trace.</p>
<h3 id="context-invariants">Context invariants<a class="headerlink" href="#context-invariants" title="Permanent link">&para;</a></h3>
<p>The W3C <code>traceparent</code> (version 0) contains three fields of information: the
TraceId, the SpanId, and the trace flags. The <code>sampled</code> trace flag has been
defined by W3C to signal an intent to sample the context.</p>
<p>The <a href="../sdk/#sampler">Sampler API</a> is responsible for setting the <code>sampled</code> flag
and the <code>tracestate</code>.</p>
<p>P-value and r-value are set in the OpenTelemetry <code>tracestate</code>, under the vendor
tag <code>ot</code>, using the identifiers <code>p</code> and <code>r</code>. P-value is an unsigned integer
valid in the inclusive range <code>[0, 63]</code> (i.e., there are 64 valid values).
R-value is an unsigned integer valid in the inclusive range <code>[0, 62]</code> (i.e.,
there are 63 valid values). P-value and r-value are independent settings, each
can be meaningfully set without the other present.</p>
<h4 id="sampled-flag">Sampled flag<a class="headerlink" href="#sampled-flag" title="Permanent link">&para;</a></h4>
<p>Probability sampling uses additional information to enable consistent decision
making and to record the adjusted count of sampled spans. When both values are
defined and in the specified range, the invariant between r-value and p-value
and the <code>sampled</code> trace flag states that
<code>((p &lt;= r) == sampled) OR (sampled AND (p == 63)) == TRUE</code>.</p>
<p>The invariant between <code>sampled</code>, <code>p</code>, and <code>r</code> only applies when both <code>p</code> and <code>r</code>
are present. When the invariant is violated, the <code>sampled</code> flag takes precedence
and <code>p</code> is unset from <code>tracestate</code> in order to signal unknown adjusted count.</p>
<h5 id="requirement-inconsistent-p-values-are-unset">Requirement: Inconsistent p-values are unset<a class="headerlink" href="#requirement-inconsistent-p-values-are-unset" title="Permanent link">&para;</a></h5>
<p>Samplers SHOULD unset <code>p</code> when the invariant between the <code>sampled</code>, <code>p</code>, and <code>r</code>
values is violated before using the <code>tracestate</code> to make a sampling decision or
interpret adjusted count.</p>
<h4 id="p-value">P-value<a class="headerlink" href="#p-value" title="Permanent link">&para;</a></h4>
<p>Zero adjusted count is represented by the special p-value 63, otherwise the
p-value is set to the negative base-2 logarithm of sampling probability:</p>
<table>
<thead>
<tr>
<th>p-value</th>
<th>Parent Probability</th>
<th>Adjusted count</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>&frac12;</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>&frac14;</td>
<td>4</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>N</td>
<td>2**-N</td>
<td>2**N</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>61</td>
<td>2**-61</td>
<td>2**61</td>
</tr>
<tr>
<td>62</td>
<td>2**-62</td>
<td>2**62</td>
</tr>
<tr>
<td>63</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<h5 id="requirement-out-of-range-p-values-are-unset">Requirement: Out-of-range p-values are unset<a class="headerlink" href="#requirement-out-of-range-p-values-are-unset" title="Permanent link">&para;</a></h5>
<p>Consumers SHOULD unset <code>p</code> from the <code>tracestate</code> if the unsigned decimal value
is greater than 63 before using the <code>tracestate</code> to make a sampling decision or
interpret adjusted count.</p>
<h4 id="r-value">R-value<a class="headerlink" href="#r-value" title="Permanent link">&para;</a></h4>
<p>R-value is set in the <code>tracestate</code> by the Sampler at the root of the trace, in
order to support consistent probability sampling. When the value is omitted or
not present, child spans in the trace are not able to participate in consistent
probability sampling.</p>
<p>R-value determines which sampling probabilities will decide to sample or not
decide to sample for spans of a given trace, as follows:</p>
<table>
<thead>
<tr>
<th>r-value</th>
<th>Implied sampling probabilities</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>&frac12; and above</td>
</tr>
<tr>
<td>2</td>
<td>&frac14; and above</td>
</tr>
<tr>
<td>3</td>
<td>&#8539; and above</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>0 &lt;= r &lt;= 61</td>
<td>2**-r and above</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>59</td>
<td>2**-59 and above</td>
</tr>
<tr>
<td>60</td>
<td>2**-60 and above</td>
</tr>
<tr>
<td>61</td>
<td>2**-61 and above</td>
</tr>
<tr>
<td>62</td>
<td>2**-62 and above</td>
</tr>
</tbody>
</table>
<p>These probabilities are specified to ensure that conforming Sampler
implementations record spans with correct adjusted counts. The recommended
method of generating r-values is to count the number of leading 0s in a string
of 62 random bits, however it is not required to use this approach.</p>
<h5 id="requirement-out-of-range-r-values-unset-both-p-and-r">Requirement: Out-of-range r-values unset both p and r<a class="headerlink" href="#requirement-out-of-range-r-values-unset-both-p-and-r" title="Permanent link">&para;</a></h5>
<p>Samplers SHOULD unset both <code>r</code> and <code>p</code> from the <code>tracestate</code> if the unsigned
decimal value of <code>r</code> is greater than 62 before using the <code>tracestate</code> to make a
sampling decision.</p>
<h5 id="requirement-r-value-is-generated-with-the-correct-probabilities">Requirement: R-value is generated with the correct probabilities<a class="headerlink" href="#requirement-r-value-is-generated-with-the-correct-probabilities" title="Permanent link">&para;</a></h5>
<p>Samplers MUST generate r-values using a randomized scheme that produces each
value with the probabilities equivalent to those produced by counting the number
of leading 0s in a string of 62 random bits.</p>
<h4 id="examples-context-invariants">Examples: Context invariants<a class="headerlink" href="#examples-context-invariants" title="Permanent link">&para;</a></h4>
<h5 id="example-probability-sampled-context">Example: Probability sampled context<a class="headerlink" href="#example-probability-sampled-context" title="Permanent link">&para;</a></h5>
<p>Consider a trace context with the following headers:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>traceparent: 00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>tracestate: ot=r:3;p:2
</code></pre></div></td></tr></table></div>
<p>The <code>traceparent</code> contents in this example example are repeated from the
<a href="https://www.w3.org/TR/trace-context/#examples-of-http-traceparent-headers">W3C specification</a>)
and have the following base64-encoded field values:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>base16(version) = 00
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>base16(trace-id) = 4bf92f3577b34da6a3ce929d0e0e4736
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>base16(parent-id) = 00f067aa0ba902b7
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>base16(trace-flags) = 01  // (i.e., sampled)
</code></pre></div></td></tr></table></div>
<p>The <code>tracestate</code> header contains OpenTelemetry string <code>r:3;p:2</code>, containing
decimal-encoded p-value and r-value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>base10(r) = 3
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>base10(p) = 2
</code></pre></div></td></tr></table></div>
<p>Here, r-value 3 indicates that a consistent probability sampler configured with
probability 12.5% (i.e., 1-in-8) or greater will sample the trace. The p-value 2
indicates that the parent that set the <code>sampled</code> flag was configured to sample
at 25% (i.e., 1-in-4). This trace context is consistent because <code>p &lt;= r</code> is true
and the <code>sampled</code> flag is set.</p>
<h5 id="example-probability-unsampled">Example: Probability unsampled<a class="headerlink" href="#example-probability-unsampled" title="Permanent link">&para;</a></h5>
<p>This example has an unsampled context where only the r-value is set.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>traceparent: 00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-00
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>tracestate: ot=r:3
</code></pre></div></td></tr></table></div>
<p>This supports consistent probability sampling in child contexts by virtue of
having an r-value. P-value is not set, consistent with an unsampled context.</p>
<h3 id="samplers">Samplers<a class="headerlink" href="#samplers" title="Permanent link">&para;</a></h3>
<h4 id="parentconsistentprobabilitybased-sampler">ParentConsistentProbabilityBased sampler<a class="headerlink" href="#parentconsistentprobabilitybased-sampler" title="Permanent link">&para;</a></h4>
<p>The <code>ParentConsistentProbabilityBased</code> sampler is meant as an optional
replacement for the <a href="../sdk/#parentbased"><code>ParentBased</code> Sampler</a>. It is required
to first validate the <code>tracestate</code> and then respect the <code>sampled</code> flag in the
W3C traceparent.</p>
<h5 id="requirement-parentconsistentprobabilitybased-api">Requirement: ParentConsistentProbabilityBased API<a class="headerlink" href="#requirement-parentconsistentprobabilitybased-api" title="Permanent link">&para;</a></h5>
<p>The <code>ParentConsistentProbabilityBased</code> Sampler constructor SHOULD take a single
Sampler argument, which is the Sampler to use in case the
<code>ParentConsistentProbabilityBased</code> Sampler is called for a root span.</p>
<h5 id="requirement-parentconsistentprobabilitybased-does-not-modify-valid-tracestate">Requirement: ParentConsistentProbabilityBased does not modify valid tracestate<a class="headerlink" href="#requirement-parentconsistentprobabilitybased-does-not-modify-valid-tracestate" title="Permanent link">&para;</a></h5>
<p>The <code>ParentConsistentProbabilityBased</code> Sampler MUST NOT modify a valid
<code>tracestate</code>.</p>
<h5 id="requirement-parentconsistentprobabilitybased-calls-the-configured-root-sampler-for-root-spans">Requirement: ParentConsistentProbabilityBased calls the configured root sampler for root spans<a class="headerlink" href="#requirement-parentconsistentprobabilitybased-calls-the-configured-root-sampler-for-root-spans" title="Permanent link">&para;</a></h5>
<p>The <code>ParentConsistentProbabilityBased</code> Sampler MUST delegate to the configured
root Sampler when there is not a valid parent trace context.</p>
<h5 id="requirement-parentconsistentprobabilitybased-respects-the-sampled-flag-for-non-root-spans">Requirement: ParentConsistentProbabilityBased respects the sampled flag for non-root spans<a class="headerlink" href="#requirement-parentconsistentprobabilitybased-respects-the-sampled-flag-for-non-root-spans" title="Permanent link">&para;</a></h5>
<p>The <code>ParentConsistentProbabilityBased</code> Sampler MUST decide to sample the span
according to the value of the <code>sampled</code> flag in the W3C traceparent header.</p>
<h4 id="consistentprobabilitybased-sampler">ConsistentProbabilityBased sampler<a class="headerlink" href="#consistentprobabilitybased-sampler" title="Permanent link">&para;</a></h4>
<p>The <code>ConsistentProbabilityBased</code> sampler is meant as an optional replacement for
the <a href="../sdk/#traceidratiobased"><code>TraceIdRatioBased</code> Sampler</a>. In the case where
it is used as a root sampler, the <code>ConsistentProbabilityBased</code> sampler is
required to produce a valid <code>tracestate</code>. In the case where it is used in a
non-root context, it is required to validate the incoming <code>tracestate</code> and to
produce a valid <code>tracestate</code> for the outgoing context.</p>
<p>The <code>ConsistentProbabilityBased</code> sampler is required to support probabilities
that are not exact powers of two. To do so, implementations are required to
select between the nearest powers of two probabilistically. For example, 5%
sampling can be achieved by selecting 1/16 sampling 60% of the time and 1/32
sampling 40% of the time.</p>
<h5 id="requirement-traceidratiobased-api-compatibility">Requirement: TraceIdRatioBased API compatibility<a class="headerlink" href="#requirement-traceidratiobased-api-compatibility" title="Permanent link">&para;</a></h5>
<p>The <code>ConsistentProbabilityBased</code> Sampler MUST have the same constructor
signature as the built-in <code>TraceIdRatioBased</code> sampler in each OpenTelemetry SDK.</p>
<h5 id="requirement-consistentprobabilitybased-sampler-sets-r-for-root-span">Requirement: ConsistentProbabilityBased sampler sets r for root span<a class="headerlink" href="#requirement-consistentprobabilitybased-sampler-sets-r-for-root-span" title="Permanent link">&para;</a></h5>
<p>The <code>ConsistentProbabilityBased</code> Sampler MUST set <code>r</code> when it makes a root
sampling decision.</p>
<h5 id="requirement-consistentprobabilitybased-sampler-unsets-p-when-not-sampled">Requirement: ConsistentProbabilityBased sampler unsets p when not sampled<a class="headerlink" href="#requirement-consistentprobabilitybased-sampler-unsets-p-when-not-sampled" title="Permanent link">&para;</a></h5>
<p>The <code>ConsistentProbabilityBased</code> Sampler MUST unset <code>p</code> from the <code>tracestate</code>
when it decides not to sample.</p>
<h5 id="requirement-consistentprobabilitybased-sampler-sets-p-when-sampled">Requirement: ConsistentProbabilityBased sampler sets p when sampled<a class="headerlink" href="#requirement-consistentprobabilitybased-sampler-sets-p-when-sampled" title="Permanent link">&para;</a></h5>
<p>The <code>ConsistentProbabilityBased</code> Sampler MUST set <code>p</code> when it decides to sample
according to its configured sampling probability.</p>
<h5 id="requirement-consistentprobabilitybased-sampler-records-unbiased-adjusted-counts">Requirement: ConsistentProbabilityBased sampler records unbiased adjusted counts<a class="headerlink" href="#requirement-consistentprobabilitybased-sampler-records-unbiased-adjusted-counts" title="Permanent link">&para;</a></h5>
<p>The <code>ConsistentProbabilityBased</code> Sampler with non-zero probability MUST set <code>p</code>
so that the adjusted count interpreted from the <code>tracestate</code> is an unbiased
estimate of the number of representative spans in the population.</p>
<h5 id="requirement-consistentprobabilitybased-sampler-sets-r-for-non-root-span">Requirement: ConsistentProbabilityBased sampler sets r for non-root span<a class="headerlink" href="#requirement-consistentprobabilitybased-sampler-sets-r-for-non-root-span" title="Permanent link">&para;</a></h5>
<p>If <code>r</code> is not set on the input <code>tracecontext</code> and the Span is not a root span,
<code>ConsistentProbabilityBased</code> SHOULD set <code>r</code> as if it were a root span and warn
the user that a potentially inconsistent trace is being produced.</p>
<h5 id="requirement-consistentprobabilitybased-sampler-decides-not-to-sample-for-probabilities-less-than-2-62">Requirement: ConsistentProbabilityBased sampler decides not to sample for probabilities less than 2**-62<a class="headerlink" href="#requirement-consistentprobabilitybased-sampler-decides-not-to-sample-for-probabilities-less-than-2-62" title="Permanent link">&para;</a></h5>
<p>If the configured sampling probability is in the interval <code>[0, 2**-62)</code>, the
Sampler MUST decide not to sample.</p>
<h4 id="examples-consistent-probability-samplers">Examples: Consistent probability samplers<a class="headerlink" href="#examples-consistent-probability-samplers" title="Permanent link">&para;</a></h4>
<h5 id="example-setting-r-value-for-a-root-span">Example: Setting R-value for a root span<a class="headerlink" href="#example-setting-r-value-for-a-root-span" title="Permanent link">&para;</a></h5>
<p>A new root span is sampled by a consistent probability sampler at 25%. A new
r-value should be generated (see the appendix for suitable methods), in this
example r-value 5 is used which happens 1.5625% of the time and indicates to
sample:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>tracestate: ot=r:5;p:2
</code></pre></div></td></tr></table></div>
<p>The span would be sampled because p-value 2 is less than or equal to r-value 5.
An example <code>tracestate</code> where r-value 1 indicates not to sample at 25%:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>tracestate: ot=r:1
</code></pre></div></td></tr></table></div>
<p>This span would not be sampled because p-value 2 (corresponding with 25%
sampling) is greater than r-value 1.</p>
<h5 id="example-handling-inconsistent-p-value">Example: Handling inconsistent P-value<a class="headerlink" href="#example-handling-inconsistent-p-value" title="Permanent link">&para;</a></h5>
<p>When either the consistent probability sampler or the parent-based consistent
probability sampler receives a sampled context but invalid p-value, for example,</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>tracestate: ot=r:4;p:73
</code></pre></div></td></tr></table></div>
<p>the <code>tracestate</code> will have its p-value stripped. The r-value is kept, and the
sampler should act as if the following had been received:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>tracestate: ot=r:4
</code></pre></div></td></tr></table></div>
<p>The consistent probability sampler will make its own (consistent) decision using
the r-value that was received.</p>
<p>The parent-based consistent probability sampler will in this case follow the
<code>sampled</code> flag. If the context is sampled, the resulting span will have an
r-value without a p-value, which indicates unknown adjusted count.</p>
<h5 id="example-handling-corrupt-r-value">Example: Handling corrupt R-value<a class="headerlink" href="#example-handling-corrupt-r-value" title="Permanent link">&para;</a></h5>
<p>A non-root span receives:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>tracestate: ot=r:100;p:10
</code></pre></div></td></tr></table></div>
<p>where the r-value is out of its valid range. The r-value and p-value are
stripped during validation, according to the invariants. In this case, the
sampler will act as though no <code>tracestate</code> were received.</p>
<p>The parent-based consistent probability sampler will sample or not sample based
on the <code>sampled</code> flag, in this case. If the context is sampled, the recorded
span will have an r-value without a p-value, which indicates unknown adjusted
count.</p>
<p>The consistent probability sampler will generate a new r-value and make a new
sampling decision while warning the user of a corrupt and potentially
inconsistent r-value.</p>
<h3 id="composition-rules">Composition rules<a class="headerlink" href="#composition-rules" title="Permanent link">&para;</a></h3>
<p>When more than one Sampler participates in the decision to sample a context,
their decisions can be combined using composition rules. In all cases, the
combined decision to sample is the logical-OR of the Samplers' decisions (i.e.,
sample if at least one of the composite Samplers decides to sample).</p>
<p>To combine p-values from two consistent probability Sampler decisions, the
Sampler with the greater probability takes effect. The output p-value becomes
the minimum of the two values for <code>p</code>.</p>
<p>To combine a consistent probability Sampler decision with a non-probability
Sampler decision, p-value 63 is used to signify zero adjusted count. If the
probability Sampler decides to sample, its p-value takes effect. If the
probability Sampler decides not to sample when the non-probability sample does
sample, p-value 63 takes effect signifying zero adjusted count.</p>
<h4 id="list-of-requirements">List of requirements<a class="headerlink" href="#list-of-requirements" title="Permanent link">&para;</a></h4>
<h5 id="requirement-combining-multiple-sampling-decisions-using-logical-or">Requirement: Combining multiple sampling decisions using logical <code>or</code><a class="headerlink" href="#requirement-combining-multiple-sampling-decisions-using-logical-or" title="Permanent link">&para;</a></h5>
<p>When multiple samplers are combined using composition, the sampling decision
MUST be to sample if at least one of the combined samplers decides to sample.</p>
<h5 id="requirement-combine-multiple-consistent-probability-samplers-using-the-minimum-p-value">Requirement: Combine multiple consistent probability samplers using the minimum p-value<a class="headerlink" href="#requirement-combine-multiple-consistent-probability-samplers-using-the-minimum-p-value" title="Permanent link">&para;</a></h5>
<p>When combining Sampler decisions for multiple consistent probability Samplers
and at least one decides to sample, the minimum of the "yes" decision <code>p</code> values
MUST be set in the <code>tracestate</code>.</p>
<h5 id="requirement-unset-p-when-multiple-consistent-probability-samplers-decide-not-to-sample">Requirement: Unset p when multiple consistent probability samplers decide not to sample<a class="headerlink" href="#requirement-unset-p-when-multiple-consistent-probability-samplers-decide-not-to-sample" title="Permanent link">&para;</a></h5>
<p>When combining Sampler decisions for multiple consistent probability Samplers
and none decides to sample, p-value MUST be unset in the <code>tracestate</code>.</p>
<h5 id="requirement-use-probability-sampler-p-value-when-its-decision-to-sample-is-combined-with-non-probability-samplers">Requirement: Use probability sampler p-value when its decision to sample is combined with non-probability samplers<a class="headerlink" href="#requirement-use-probability-sampler-p-value-when-its-decision-to-sample-is-combined-with-non-probability-samplers" title="Permanent link">&para;</a></h5>
<p>When combining Sampler decisions for a consistent probability Sampler and a
non-probability Sampler, and the probability Sampler decides to sample, its
p-value MUST be set in the <code>tracestate</code> regardless of the non-probability
Sampler decision.</p>
<h5 id="requirement-use-p-value-63-when-a-probability-sampler-decision-not-to-sample-is-combined-with-a-non-probability-sampler-decision-to-sample">Requirement: Use p-value 63 when a probability sampler decision not to sample is combined with a non-probability sampler decision to sample<a class="headerlink" href="#requirement-use-p-value-63-when-a-probability-sampler-decision-not-to-sample-is-combined-with-a-non-probability-sampler-decision-to-sample" title="Permanent link">&para;</a></h5>
<p>When combining Sampler decisions for a consistent probability Sampler and a
non-probability Sampler, and the probability Sampler decides not to sample but
the non-probability does sample, p-value 63 MUST be set in the <code>tracestate</code>.</p>
<h4 id="examples-composition">Examples: Composition<a class="headerlink" href="#examples-composition" title="Permanent link">&para;</a></h4>
<h5 id="example-probability-and-non-probability-sampler-in-a-root-context">Example: Probability and non-probability sampler in a root context<a class="headerlink" href="#example-probability-and-non-probability-sampler-in-a-root-context" title="Permanent link">&para;</a></h5>
<p>In a new root context, a consistent probability sampler decides not to set the
sampled flag, adds <code>r:4</code> indicating that the trace is consistently sampled at
6.5% (i.e., 1-in-16) and larger probabilities.</p>
<p>The probability sampler decision is composed with a non-probability sampler that
decides to sample the context. Setting <code>sampled</code> when the probability sampler
has not sampled requires setting <code>p:63</code>, indicating zero adjusted count.</p>
<p>The resulting context:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>traceparent: 00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>tracestate: ot=r:4;p:63
</code></pre></div></td></tr></table></div>
<h5 id="example-two-consistent-probability-samplers">Example: Two consistent probability samplers<a class="headerlink" href="#example-two-consistent-probability-samplers" title="Permanent link">&para;</a></h5>
<p>Whether a root or non-root, if multiple consistent probability samplers make a
decision to sample a given context, the minimum p-value is output in the
tracestate.</p>
<p>If a root context, the first of the samplers generates <code>r:15</code> and its own
p-value <code>p:10</code> (i.e., adjusted count 1024). The second of the two probability
samplers outputs a smaller adjusted count <code>p:8</code> (i.e., adjusted count 256).</p>
<p>The resulting context takes the smaller p-value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>traceparent: 00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>tracestate: ot=r:15;p:8
</code></pre></div></td></tr></table></div>
<h3 id="producer-and-consumer-recommendations">Producer and consumer recommendations<a class="headerlink" href="#producer-and-consumer-recommendations" title="Permanent link">&para;</a></h3>
<h4 id="trace-producer-completeness">Trace producer: completeness<a class="headerlink" href="#trace-producer-completeness" title="Permanent link">&para;</a></h4>
<p>As stated in the <a href="#completeness-guarantee">completeness guarantee</a>, traces will
be possibly incomplete when configuring multiple consistent probability samplers
in the same trace. One way to avoid producing incomplete traces is to use
parent-based samplers except for root spans.</p>
<p>There is a simple test for trace incompleteness, but it is a one-way test and
does not detect when child spans are uncollected. One way to avoid producing
incomplete traces is to avoid configuring non-power-of-two sampling
probabilities for non-root spans, because completeness is not guaranteed for
non-power-of-two sampling probabilities.</p>
<h5 id="recommenendation-use-non-descending-power-of-two-probabilities">Recommenendation: use non-descending power-of-two probabilities<a class="headerlink" href="#recommenendation-use-non-descending-power-of-two-probabilities" title="Permanent link">&para;</a></h5>
<p>Complete subtraces will be produced when the sequence of sampling probabilities
from the root of a trace to its leaves consists of non-descending powers of two.
To ensure complete sub-traces are produced, child samplers SHOULD be configured
with a power-of-two probability greater than or equal to the parent span's
sampling probability.</p>
<h4 id="trace-producer-correctness">Trace producer: correctness<a class="headerlink" href="#trace-producer-correctness" title="Permanent link">&para;</a></h4>
<p>The use of tracestate to convey adjusted count information rests upon trust
between participants in a trace. Users are advised not to use a Span-to-metrics
pipeline when the parent sampling decision's corresponding adjusted count is
untrustworthy.</p>
<p>The <code>ConsistentProbabilityBased</code> and <code>ParentConsistentProbabilityBased</code> samplers
can be used as delegates of another sampler, for conditioning the choice of
sampler on span and other fixed attributes. However, for adjusted counts to be
trustworthy, the choice of non-root sampler cannot be conditioned on the
parent's sampled trace flag or the OpenTelemetry tracestate r-value and p-value,
as these decisions would lead to incorrect adjusted counts.</p>
<p>For example, the built-in <a href="../sdk/#parentbased"><code>ParentBased</code> sampler</a> supports
configuring the delegated-to sampler based on whether the parent context is
remote or non-remote, sampled or unsampled. If a <code>ParentBased</code> sampler delegates
to a <code>ConsistentProbabilityBased</code> sampler only for unsampled contexts, the
resulting Span-to-metrics pipeline will (probably) overcount spans.</p>
<h5 id="recommenendation-sampler-delegation">Recommenendation: sampler delegation<a class="headerlink" href="#recommenendation-sampler-delegation" title="Permanent link">&para;</a></h5>
<p>For non-root spans, composite samplers SHOULD NOT condition the choice of
delegated-to sampler based on the parent's sampled flag or OpenTelemetry
tracestate.</p>
<h4 id="trace-producer-interoperability-with-parentbased-sampler">Trace producer: interoperability with <code>ParentBased</code> sampler<a class="headerlink" href="#trace-producer-interoperability-with-parentbased-sampler" title="Permanent link">&para;</a></h4>
<p>The OpenTelemetry built-in <code>ParentBased</code> sampler is interoperable with the
<code>ConsistentProbabilityBased</code> sampler, provided that the delegated-to sampler
does not change the decision that determined its selection. For example, it is
safe to configure an alternate <code>ParentBased</code> sampler delegate for unsampled
spans, provided the decision does not change to sampled.</p>
<p>Because the <code>ParentBased</code> sampler honors the sampled trace flag, and
OpenTelemetry SDKs include the tracestate in the <code>Span</code> data, which means a
system can be upgraded to probability sampling by just replacing
<code>TraceIDRatioBased</code> samplers with conforming <code>ConsistentProbabilityBased</code>
samplers everywhere in the trace.</p>
<h4 id="trace-producer-interoperability-with-traceidratiobased-sampler">Trace producer: interoperability with <code>TraceIDRatioBased</code> sampler<a class="headerlink" href="#trace-producer-interoperability-with-traceidratiobased-sampler" title="Permanent link">&para;</a></h4>
<p>The <a href="../sdk/#traceidratiobased"><code>TraceIDRatioBased</code> specification</a> includes a
RECOMMENDATION against being used for non-root spans because it does not specify
how to make the sampler decision consistent across the trace. A
<code>TraceIDRatioBased</code> sampler at the root span is interoperable with a
<code>ConsistentParentProbabilityBased</code> sampler in terms of completeness, although
the resulting spans will have unknown adjusted count.</p>
<p>When a <code>TraceIDRatioBased</code> sampler is configured for a non-root span, several
cases arise where an incorrect OpenTelemetry tracestate can be generated.
Consider for example a trace with three spans where the root (R) has a
<code>ConsistentProbabilityBased</code> sampler, the root's child (P) has a
<code>TraceIDRatioBased</code> sampler, and the grand-child (C) has a <code>ParentBased</code>
sampler. Because the <code>TraceIDRatioBased</code> sampler change the intermediate sampled
flag without updating the OpenTelemetry tracestate, we have the following cases:</p>
<ol>
<li>If <code>TraceIDRatioBased</code> does not change P's decision, the trace is complete
   and all spans' adjusted counts are correct.</li>
<li>If <code>TraceIDRatioBased</code> changes P's decision from no to yes, the consumer will
   observe a (definitely) incomplete trace containing P and C. Both spans will
   have invalid OpenTelemetry tracestate, leading to unknown adjusted count in
   this case.</li>
<li>If <code>TraceIDRatioBased</code> changes the sampling decision from yes to no, the
   consumer will observe singleton trace with correct adjusted count. The
   consumer cannot determine that R has two unsampled descendents.</li>
</ol>
<p>As these cases demonstrate, users can expect incompleteness and unknown adjusted
count when using <code>TraceIDRatioBased</code> samplers for non-root spans, but this goes
against the originally specified warning.</p>
<h4 id="trace-consumer">Trace consumer<a class="headerlink" href="#trace-consumer" title="Permanent link">&para;</a></h4>
<p>Trace consumers are expected to apply the simple one-way test for
incompleteness. When non-root spans are configured with independent sampling
probabilities, traces may be complete in a way that cannot be detected. Because
of the one-way test, consumers wanting to ensure complete traces are expected to
know the minimum sampling probability across the system.</p>
<p>Ignoring accidental data loss, a trace will be complete if all its spans are
sampled with consistent probability samplers and the trace's r-value is larger
than the corresponding smallest power of two greater than or equal to the
minimum sampling probability across the trace.</p>
<p>Due to the <code>ConsistentProbabilityBased</code> Sampler requirement about setting <code>r</code>
when it is unset for a non-root span, trace consumers are advised to check
traces for r-value consistency. When a single trace contains more than a single
distinct <code>r</code> value, it means the trace was not correctly sampled at the root for
probability sampling. While the adjusted count of each span is correct in this
scenario, it may be impossible to detect complete traces.</p>
<h5 id="recommendation-recognize-inconsistent-r-values">Recommendation: Recognize inconsistent r-values<a class="headerlink" href="#recommendation-recognize-inconsistent-r-values" title="Permanent link">&para;</a></h5>
<p>When a single trace contains spans with <code>tracestate</code> values containing more than
one distinct value for <code>r</code>, the consumer SHOULD recognize the trace as
inconsistently sampled.</p>
<h3 id="appendix-statistical-test-requirements">Appendix: Statistical test requirements<a class="headerlink" href="#appendix-statistical-test-requirements" title="Permanent link">&para;</a></h3>
<p>This section specifies a test that can be implemented to ensure basic
conformance with the requirement that sampling decisions are unbiased.</p>
<p>The goal of this test specification is to be simple to implement and not require
advanced statistical skills or libraries to be successful.</p>
<p>This test is not meant to evaluate the performance of a random number generator.
This test assumes the underlying RNG is of good quality and checks that the
sampler produces the expected proportionality with a high degree of statistical
confidence.</p>
<p>One of the challenges of this kind of test is that probabilistic tests are
expected to occasionally produce exceptional results. To make this a strict test
for random behavior, we take the following approach:</p>
<ul>
<li>Generate a pre-determined list of 20 random seeds</li>
<li>Use fixed values for significance level (5%) and trials (20)</li>
<li>Use a population size of 100,000 spans</li>
<li>For each trial, simulate the population and compute ChiSquared test statistic</li>
<li>Locate the first seed value in the ordered list such that the Chi-Squared
  significance test fails exactly once out of 20 trials</li>
</ul>
<p>To create this test, perform the above sequence using the seed values from the
predetermined list, in order, until a seed value is found with exactly one
failure. This is expected to happen fairly often and is required to happen once
among the 20 available seeds. After calculating the index of the first seed with
exactly one ChiSquared failure, record it in the test. For continuous
integration testing, it is only necessary to re-run the test using the
predetermined seed index.</p>
<p>As specified, the Chi-Squared test has either one or two degrees of freedom,
depending on whether the sampling probability is an exact power of two or not.</p>
<h4 id="test-procedure-non-powers-of-two">Test procedure: non-powers of two<a class="headerlink" href="#test-procedure-non-powers-of-two" title="Permanent link">&para;</a></h4>
<p>In this case there are two degrees of freedom for the Chi-Squared test. The
following table summarizes the test parameters.</p>
<table>
<thead>
<tr>
<th>Test case</th>
<th>Sampling probability</th>
<th>Lower, Upper p-value when sampled</th>
<th>Expect<sub>lower</sub></th>
<th>Expect<sub>upper</sub></th>
<th>Expect<sub>unsampled</sub></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0.900000</td>
<td>0, 1</td>
<td>10000</td>
<td>80000</td>
<td>10000</td>
</tr>
<tr>
<td>2</td>
<td>0.600000</td>
<td>0, 1</td>
<td>40000</td>
<td>20000</td>
<td>40000</td>
</tr>
<tr>
<td>3</td>
<td>0.330000</td>
<td>1, 2</td>
<td>17000</td>
<td>16000</td>
<td>67000</td>
</tr>
<tr>
<td>4</td>
<td>0.130000</td>
<td>2, 3</td>
<td>12000</td>
<td>1000</td>
<td>87000</td>
</tr>
<tr>
<td>5</td>
<td>0.100000</td>
<td>3, 4</td>
<td>2500</td>
<td>7500</td>
<td>90000</td>
</tr>
<tr>
<td>6</td>
<td>0.050000</td>
<td>4, 5</td>
<td>1250</td>
<td>3750</td>
<td>95000</td>
</tr>
<tr>
<td>7</td>
<td>0.017000</td>
<td>5, 6</td>
<td>1425</td>
<td>275</td>
<td>98300</td>
</tr>
<tr>
<td>8</td>
<td>0.010000</td>
<td>6, 7</td>
<td>562.5</td>
<td>437.5</td>
<td>99000</td>
</tr>
<tr>
<td>9</td>
<td>0.005000</td>
<td>7, 8</td>
<td>281.25</td>
<td>218.75</td>
<td>99500</td>
</tr>
<tr>
<td>10</td>
<td>0.002900</td>
<td>8, 9</td>
<td>100.625</td>
<td>189.375</td>
<td>99710</td>
</tr>
<tr>
<td>11</td>
<td>0.001000</td>
<td>9, 10</td>
<td>95.3125</td>
<td>4.6875</td>
<td>99900</td>
</tr>
<tr>
<td>12</td>
<td>0.000500</td>
<td>10, 11</td>
<td>47.65625</td>
<td>2.34375</td>
<td>99950</td>
</tr>
</tbody>
</table>
<p>The formula for computing Chi-Squared in this case is:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>ChiSquared = math.Pow(sampled_lowerP - expect_lowerP, 2) / expect_lowerP +
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>             math.Pow(sampled_upperP - expect_upperP, 2) / expect_upperP +
<a id="__codelineno-11-3" name="__codelineno-11-3"></a>             math.Pow(100000 - sampled_lowerP - sampled_upperP - expect_unsampled, 2) / expect_unsampled
</code></pre></div></td></tr></table></div>
<p>This should be compared with 0.102587, the value of the Chi-Squared distribution
for two degrees of freedom with significance level 5%. For each probability in
the table above, the test is required to demonstrate a seed that produces
exactly one ChiSquared value less than 0.102587.</p>
<h5 id="requirement-pass-12-non-power-of-two-statistical-tests">Requirement: Pass 12 non-power-of-two statistical tests<a class="headerlink" href="#requirement-pass-12-non-power-of-two-statistical-tests" title="Permanent link">&para;</a></h5>
<p>For the test with 20 trials and 100,000 spans each, the test MUST demonstrate a
random number generator seed such that the ChiSquared test statistic is below
0.102587 exactly 1 out of 20 times.</p>
<h4 id="test-procedure-exact-powers-of-two">Test procedure: exact powers of two<a class="headerlink" href="#test-procedure-exact-powers-of-two" title="Permanent link">&para;</a></h4>
<p>In this case there is one degree of freedom for the Chi-Squared test. The
following table summarizes the test parameters.</p>
<table>
<thead>
<tr>
<th>Test case</th>
<th>Sampling probability</th>
<th>P-value when sampled</th>
<th>Expect<sub>sampled</sub></th>
<th>Expect<sub>unsampled</sub></th>
</tr>
</thead>
<tbody>
<tr>
<td>13</td>
<td>0x1p-01 (0.500000)</td>
<td>1</td>
<td>50000</td>
<td>50000</td>
</tr>
<tr>
<td>14</td>
<td>0x1p-04 (0.062500)</td>
<td>4</td>
<td>6250</td>
<td>93750</td>
</tr>
<tr>
<td>15</td>
<td>0x1p-07 (0.007812)</td>
<td>7</td>
<td>781.25</td>
<td>99218.75</td>
</tr>
</tbody>
</table>
<p>The formula for computing Chi-Squared in this case is:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>ChiSquared = math.Pow(sampled - expect_sampled, 2) / expect_sampled +
<a id="__codelineno-12-2" name="__codelineno-12-2"></a>             math.Pow(100000 - sampled - expect_unsampled, 2) / expect_unsampled
</code></pre></div></td></tr></table></div>
<p>This should be compared with 0.003932, the value of the Chi-Squared distribution
for one degree of freedom with significance level 5%. For each probability in
the table above, the test is required to demonstrate a seed that produces
exactly one ChiSquared value less than 0.003932.</p>
<h5 id="requirement-pass-3-power-of-two-statistical-tests">Requirement: Pass 3 power-of-two statistical tests<a class="headerlink" href="#requirement-pass-3-power-of-two-statistical-tests" title="Permanent link">&para;</a></h5>
<p>For the test with 20 trials and 100,000 spans each, the test MUST demonstrate a
random number generator seed such that the ChiSquared test statistic is below
0.003932 exactly 1 out of 20 times.</p>
<h4 id="test-implementation">Test implementation<a class="headerlink" href="#test-implementation" title="Permanent link">&para;</a></h4>
<p>The recommended structure for this test uses a table listing the 15 probability
values, the expected p-values, whether the ChiSquared statistic has one or two
degrees of freedom, and the index into the predetermined list of seeds.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a>    for _, test := range []testCase{
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>        // Non-powers of two
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>        {0.90000, 1, twoDegrees, 3},
<a id="__codelineno-13-4" name="__codelineno-13-4"></a>        {0.60000, 1, twoDegrees, 2},
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>        {0.33000, 2, twoDegrees, 2},
<a id="__codelineno-13-6" name="__codelineno-13-6"></a>        {0.13000, 3, twoDegrees, 1},
<a id="__codelineno-13-7" name="__codelineno-13-7"></a>        {0.10000, 4, twoDegrees, 0},
<a id="__codelineno-13-8" name="__codelineno-13-8"></a>        {0.05000, 5, twoDegrees, 0},
<a id="__codelineno-13-9" name="__codelineno-13-9"></a>        {0.01700, 6, twoDegrees, 2},
<a id="__codelineno-13-10" name="__codelineno-13-10"></a>        {0.01000, 7, twoDegrees, 2},
<a id="__codelineno-13-11" name="__codelineno-13-11"></a>        {0.00500, 8, twoDegrees, 2},
<a id="__codelineno-13-12" name="__codelineno-13-12"></a>        {0.00290, 9, twoDegrees, 4},
<a id="__codelineno-13-13" name="__codelineno-13-13"></a>        {0.00100, 10, twoDegrees, 6},
<a id="__codelineno-13-14" name="__codelineno-13-14"></a>        {0.00050, 11, twoDegrees, 0},
<a id="__codelineno-13-15" name="__codelineno-13-15"></a>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a>        // Powers of two
<a id="__codelineno-13-17" name="__codelineno-13-17"></a>        {0x1p-1, 1, oneDegree, 0},
<a id="__codelineno-13-18" name="__codelineno-13-18"></a>        {0x1p-4, 4, oneDegree, 0},
<a id="__codelineno-13-19" name="__codelineno-13-19"></a>        {0x1p-7, 7, oneDegree, 1},
<a id="__codelineno-13-20" name="__codelineno-13-20"></a>    } {
</code></pre></div></td></tr></table></div>
<p>Note that seed indexes in the example above have what appears to be the correct
distribution. The five 0s, two 1s, five 2s, one 3s, and one 4 demonstrate that
it is relatively easy to find examples where there is exactly one failure.
Probability 0.001, with seed index 6 in this case, is a reminder that outliers
exist. Further significance testing of this distribution is not recommended.</p>
<h2 id="appendix">Appendix<a class="headerlink" href="#appendix" title="Permanent link">&para;</a></h2>
<h3 id="methods-for-generating-r-values">Methods for generating R-values<a class="headerlink" href="#methods-for-generating-r-values" title="Permanent link">&para;</a></h3>
<p>The method used for generating r-values is not specified, in order to leave the
implementation freedom to optimize. Typically, when the TraceId is known to
contain at a 62-bit substring of random bits, R-values can be derived directly
from the 62 random bits of TraceId by:</p>
<ol>
<li>Count the leading zeros</li>
<li>Count the leading ones</li>
<li>Count the trailing zeros</li>
<li>Count the trailing ones.</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="s">&quot;math/rand&quot;</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">    </span><span class="s">&quot;math/bits&quot;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="p">)</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="kd">func</span><span class="w"> </span><span class="nx">nextRValueLeading</span><span class="p">()</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">    </span><span class="nx">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">uint64</span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nx">Int63</span><span class="p">())</span><span class="w"> </span><span class="c1">// 63 least-significant bits are random</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="nx">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mh">0x3</span><span class="w">         </span><span class="c1">// 62 most-significant bits are random</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">bits</span><span class="p">.</span><span class="nx">LeadingZeros64</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>If the TraceId contains unknown or insufficient randomness, another approach is
to generate random bits until the first true or false value.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span>
<span class="normal"><a href="#__codelineno-15-6">6</a></span>
<span class="normal"><a href="#__codelineno-15-7">7</a></span>
<span class="normal"><a href="#__codelineno-15-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a>func nextRValueGenerated() int {
<a id="__codelineno-15-2" name="__codelineno-15-2"></a>    for r := 0; r &lt; 62; r++ {
<a id="__codelineno-15-3" name="__codelineno-15-3"></a>        if rand.Bool() == true {
<a id="__codelineno-15-4" name="__codelineno-15-4"></a>            return r
<a id="__codelineno-15-5" name="__codelineno-15-5"></a>        }
<a id="__codelineno-15-6" name="__codelineno-15-6"></a>    }
<a id="__codelineno-15-7" name="__codelineno-15-7"></a>    return 62
<a id="__codelineno-15-8" name="__codelineno-15-8"></a>}
</code></pre></div></td></tr></table></div>
<p>Any scheme that produces r-values shown in the following table is considered
conforming.</p>
<table>
<thead>
<tr>
<th>r-value</th>
<th>Probability of r-value</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>&frac12;</td>
</tr>
<tr>
<td>1</td>
<td>&frac14;</td>
</tr>
<tr>
<td>2</td>
<td>&#8539;</td>
</tr>
<tr>
<td>3</td>
<td>1/16</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>0 &lt;= r &lt;= 61</td>
<td>2**-(r+1)</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>59</td>
<td>2**-60</td>
</tr>
<tr>
<td>60</td>
<td>2**-61</td>
</tr>
<tr>
<td>61</td>
<td>2**-62</td>
</tr>
<tr>
<td>62</td>
<td>2**-62</td>
</tr>
</tbody>
</table>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      版权所有 © 2017-2023 MIT by Sindre Sorhus
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://twitter.com/sindresorhus" target="_blank" rel="noopener" title="Sindre Sorhus Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/sindresorhus" target="_blank" rel="noopener" title="Sindre Sorhus Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://instagram.com/sindresorhus" target="_blank" rel="noopener" title="Sindre Sorhus Instagram" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://sindresorhus.com/apps" target="_blank" rel="noopener" title="Sindre Sorhus Blog" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M162.4 196c4.8-4.9 6.2-5.1 36.4-5.1 27.2 0 28.1.1 32.1 2.1 5.8 2.9 8.3 7 8.3 13.6 0 5.9-2.4 10-7.6 13.4-2.8 1.8-4.5 1.9-31.1 2.1-16.4.1-29.5-.2-31.5-.8-10.3-2.9-14.1-17.7-6.6-25.3zm61.4 94.5c-53.9 0-55.8.2-60.2 4.1-3.5 3.1-5.7 9.4-5.1 13.9.7 4.7 4.8 10.1 9.2 12 2.2 1 14.1 1.7 56.3 1.2l47.9-.6 9.2-1.5c9-5.1 10.5-17.4 3.1-24.4-5.3-4.7-5-4.7-60.4-4.7zm223.4 130.1c-3.5 28.4-23 50.4-51.1 57.5-7.2 1.8-9.7 1.9-172.9 1.8-157.8 0-165.9-.1-172-1.8-8.4-2.2-15.6-5.5-22.3-10-5.6-3.8-13.9-11.8-17-16.4-3.8-5.6-8.2-15.3-10-22C.1 423 0 420.3 0 256.3 0 93.2 0 89.7 1.8 82.6 8.1 57.9 27.7 39 53 33.4c7.3-1.6 332.1-1.9 340-.3 21.2 4.3 37.9 17.1 47.6 36.4 7.7 15.3 7-1.5 7.3 180.6.2 115.8 0 164.5-.7 170.5zm-85.4-185.2c-1.1-5-4.2-9.6-7.7-11.5-1.1-.6-8-1.3-15.5-1.7-12.4-.6-13.8-.8-17.8-3.1-6.2-3.6-7.9-7.6-8-18.3 0-20.4-8.5-39.4-25.3-56.5-12-12.2-25.3-20.5-40.6-25.1-3.6-1.1-11.8-1.5-39.2-1.8-42.9-.5-52.5.4-67.1 6.2-27 10.7-46.3 33.4-53.4 62.4-1.3 5.4-1.6 14.2-1.9 64.3-.4 62.8 0 72.1 4 84.5 9.7 30.7 37.1 53.4 64.6 58.4 9.2 1.7 122.2 2.1 133.7.5 20.1-2.7 35.9-10.8 50.7-25.9 10.7-10.9 17.4-22.8 21.8-38.5 3.2-10.9 2.9-88.4 1.7-93.9z"/></svg>
    </a>
  
    
    
      
    
    
    
    <a href="https://mastodon.social/@sindresorhus" target="_blank" rel="noopener me" title="Sindre Sorhus Mastodon" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.top", "navigation.indexes", "content.code.annotate", "navigation.top"], "search": "../../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>